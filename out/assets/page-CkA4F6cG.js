import{u as ne,a as ie,e as ce,r as a,f as de,j as e}from"./index-DlD1gmTD.js";import{H as xe,F as me}from"./Footer-B2vMGxQd.js";const A=de("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd");function ge(){const R=ne(),{items:N,total:l,clearCart:ue}=ie(),{user:o}=ce(),[g,V]=a.useState("shipping"),[F,q]=a.useState(!1),[$,v]=a.useState(""),[D,J]=a.useState(!1),[t,x]=a.useState({full_name:"",email:"",phone:"",street:"",city:"",postal_code:"",country:"PT"}),[k,K]=a.useState([]),[Q,L]=a.useState(""),[T,U]=a.useState(!1),[w,Y]=a.useState([]),[O,M]=a.useState(0),[S,B]=a.useState(0),[Z,W]=a.useState(null),[b,I]=a.useState(0),[P,X]=a.useState(!1),[E,ee]=a.useState(!0),[u,z]=a.useState(0);a.useEffect(()=>{o&&ae()},[o]),a.useEffect(()=>{se()},[]),a.useEffect(()=>{w.length>0&&G(t.country)},[t.country,l,w]),a.useEffect(()=>{te()},[t.country,l,O]);const se=async()=>{try{console.log("ğŸ”„ A carregar custos de envio por paÃ­s do database...");const{data:s,error:d}=await A.from("site_settings").select("value").eq("key","country_shipping_rates").maybeSingle();if(d){console.error("âŒ Erro ao carregar custos de envio:",d);return}s&&s.value&&Array.isArray(s.value)?(console.log("âœ… Custos de envio carregados:",s.value.length,"paÃ­ses"),Y(s.value),G(t.country,s.value)):console.log("âš ï¸ Nenhuma configuraÃ§Ã£o de envio encontrada no database")}catch(s){console.error("âŒ Erro ao carregar configuraÃ§Ãµes de envio:",s)}},G=(s,d)=>{const r=d||w;if(r.length===0){console.log("âš ï¸ Sem configuraÃ§Ãµes de envio disponÃ­veis");return}const i=r.find(f=>f.code===s&&f.enabled);i?(console.log(`âœ… ConfiguraÃ§Ã£o encontrada para ${i.name} (${s}):`),console.log(`   - Custo de envio: â‚¬${i.cost}`),console.log(`   - Envio grÃ¡tis acima de: â‚¬${i.free_threshold}`),M(i.cost),B(i.free_threshold)):(console.log(`âš ï¸ PaÃ­s ${s} nÃ£o encontrado ou desativado. A usar valores padrÃ£o.`),M(7.99),B(50))},te=async()=>{try{const{data:s,error:d}=await A.from("site_settings").select("*").eq("key","tax_shipping_settings").maybeSingle();if(s&&s.value){const r=s.value;if(W(r),r.taxEnabled!==void 0){X(r.taxEnabled);const i=r.taxCalculation==="included";if(ee(i),r.taxEnabled){const f=r.taxRates?.find(h=>h.country_code===t.country&&h.enabled),y=f?f.rate:23;if(z(y),i){const h=l*y/(100+y);I(h)}else{const h=l*(y/100);I(h)}}else I(0),z(0)}}}catch(s){console.error("Erro ao carregar configuraÃ§Ãµes de IVA:",s)}},ae=async()=>{if(o)try{const{data:s,error:d}=await A.from("addresses").select("*").eq("user_id",o.id).order("is_default",{ascending:!1});if(s&&!d){K(s);const r=s.find(i=>i.is_default);r&&(x({full_name:r.full_name||o.full_name||"",email:o.email||"",phone:r.phone||o.phone||"",street:r.street||"",city:r.city||"",postal_code:r.postal_code||"",country:r.country||"PT"}),L(r.id))}}catch(s){console.error("Erro ao carregar endereÃ§os:",s)}},re=s=>{x({full_name:s.full_name||o?.full_name||"",email:o?.email||"",phone:s.phone||o?.phone||"",street:s.street||"",city:s.city||"",postal_code:s.postal_code||"",country:s.country||"PT"}),L(s.id),U(!1)};a.useEffect(()=>{o&&k.length===0&&x(s=>({...s,full_name:o.full_name||"",email:o.email||"",phone:o.phone||""}))},[o,k]),a.useEffect(()=>{N.length===0&&R("/cart")},[N,R]);const C=()=>!(!t.full_name||!t.email||!t.phone||!t.street||!t.city||!t.postal_code||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)),oe=()=>{if(v(""),!C()){v("Por favor, preencha todos os campos obrigatÃ³rios");return}V("payment"),window.scrollTo({top:0,behavior:"smooth"})},le=async()=>{if(!C()){v("Por favor, preencha todos os campos obrigatÃ³rios");return}q(!0),v("");try{console.log("ğŸ”„ Iniciando processo de pagamento...");const d=(await A.auth.getSession()).data.session?.access_token;console.log("ğŸ”‘ Token obtido:",d?"Sim":"NÃ£o");const r=window.location.origin+"/",i=`${r}/checkout/success?session_id={CHECKOUT_SESSION_ID}`,f=`${r}/checkout/error`;console.log("ğŸ”— URLs configuradas:",{successUrl:i,cancelUrl:f});const y={items:N.map(p=>({id:p.id,name:p.name,price:p.price,quantity:p.quantity,image:p.image,size:p.size,color:p.color})),shippingAddress:t,shippingCountry:t.country,saveCardInfo:D,successUrl:i,cancelUrl:f};console.log("ğŸ“¦ Dados a enviar:",{items:y.items.length,email:t.email,country:t.country,total:l.toFixed(2)});const h={"Content-Type":"application/json",apikey:"sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd"};d&&(h.Authorization=`Bearer ${d}`),console.log("ğŸ“¡ A enviar pedido para Edge Function...");const _=await fetch("https://sgfwwldumrsyvviajdqp.supabase.co/functions/v1/create-checkout-session",{method:"POST",headers:h,body:JSON.stringify(y)});console.log("ğŸ“¥ Resposta recebida:",_.status,_.statusText);const H=await _.text();console.log("ğŸ“„ Resposta (texto):",H);let c;try{c=JSON.parse(H),console.log("âœ… Resposta (JSON):",c)}catch(p){throw console.error("âŒ Erro ao fazer parse da resposta:",p),new Error("Resposta invÃ¡lida do servidor")}if(!_.ok)throw console.error("âŒ Erro na resposta:",c),new Error(c.error||"Erro ao processar pagamento");if(!c.success)throw console.error("âŒ Pagamento nÃ£o teve sucesso:",c),new Error(c.error||"Erro ao criar sessÃ£o de pagamento");if(!c.url)throw console.error("âŒ URL de pagamento nÃ£o recebida:",c),new Error("URL de pagamento nÃ£o disponÃ­vel");console.log("âœ… SessÃ£o criada com sucesso!"),console.log("ğŸ†” Session ID:",c.sessionId),console.log("ğŸ”— URL de pagamento:",c.url),console.log("ğŸ’° Valor:",c.amount),console.log("ğŸš€ A redirecionar para Stripe..."),window.location.href=c.url}catch(s){console.error("âŒ ERRO CRÃTICO:",s),console.error("âŒ Mensagem:",s.message),console.error("âŒ Stack:",s.stack),v(s.message||"Erro ao processar pagamento. Tente novamente."),q(!1)}},n=l>=S?0:O;let j=0,m=0;return P?E?(n>0&&(m=n*u/(100+u)),j=l+n):(n>0&&(m=n*(u/100)),j=l+b+n+m):j=l+n,N.length===0?null:e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-sky-50 via-blue-50 to-indigo-50",children:[e.jsx(xe,{}),e.jsx("main",{className:"flex-1 pt-24 sm:pt-32 pb-12 sm:pb-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 mb-4",children:"Finalizar Compra"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${g==="shipping"?"text-sky-600":"text-green-600"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${g==="shipping"?"bg-sky-600 text-white":"bg-green-600 text-white"}`,children:g==="shipping"?"1":e.jsx("i",{className:"ri-check-line"})}),e.jsx("span",{className:"font-semibold",children:"Dados de Envio"})]}),e.jsx("div",{className:"flex-1 h-1 bg-gray-200 rounded",children:e.jsx("div",{className:`h-full rounded transition-all duration-500 ${g==="payment"?"bg-sky-600 w-full":"bg-gray-200 w-0"}`})}),e.jsxs("div",{className:`flex items-center gap-2 ${g==="payment"?"text-sky-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${g==="payment"?"bg-sky-600 text-white":"bg-gray-200"}`,children:"2"}),e.jsx("span",{className:"font-semibold",children:"Pagamento"})]})]})]}),$&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"ri-error-warning-line text-xl text-red-600 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-semibold text-red-700",children:$})}),e.jsx("button",{onClick:()=>v(""),className:"text-red-600 hover:text-red-800 cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[g==="shipping"&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-sm border-2 border-sky-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Dados de Envio"}),o&&k.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"EndereÃ§os Salvos"}),e.jsx("button",{type:"button",onClick:()=>U(!T),className:"text-sm text-sky-600 hover:text-sky-700 cursor-pointer font-medium",children:T?"Ocultar":"Escolher endereÃ§o"})]}),T&&e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto border border-gray-200 rounded-lg p-3 bg-sky-50",children:k.map(s=>e.jsx("button",{type:"button",onClick:()=>re(s),className:`w-full text-left p-4 rounded-lg border-2 transition-all cursor-pointer ${Q===s.id?"border-sky-500 bg-sky-100":"border-gray-200 bg-white hover:border-sky-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.street}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.postal_code," ",s.city,", ",s.country]}),s.phone&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("i",{className:"ri-phone-line mr-1"}),s.phone]})]}),s.is_default&&e.jsx("span",{className:"text-xs bg-sky-500 text-white px-2 py-1 rounded-full",children:"PadrÃ£o"})]})},s.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:t.full_name,onChange:s=>x({...t,full_name:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all",placeholder:"Seu nome completo",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:t.email,onChange:s=>x({...t,email:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all",placeholder:"seu@email.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:t.phone,onChange:s=>x({...t,phone:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all",placeholder:"+351 xxx xxx xxx",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Morada Completa *"}),e.jsx("input",{type:"text",value:t.street,onChange:s=>x({...t,street:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all",placeholder:"Rua, nÃºmero, andar",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade *"}),e.jsx("input",{type:"text",value:t.city,onChange:s=>x({...t,city:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CÃ³digo Postal *"}),e.jsx("input",{type:"text",value:t.postal_code,onChange:s=>x({...t,postal_code:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PaÃ­s *"}),e.jsxs("select",{value:t.country,onChange:s=>x({...t,country:s.target.value}),className:"w-full px-4 py-3 bg-sky-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent cursor-pointer transition-all",required:!0,children:[e.jsx("option",{value:"PT",children:"ğŸ‡µğŸ‡¹ Portugal"}),e.jsx("option",{value:"ES",children:"ğŸ‡ªğŸ‡¸ Espanha"}),e.jsx("option",{value:"FR",children:"ğŸ‡«ğŸ‡· FranÃ§a"}),e.jsx("option",{value:"DE",children:"ğŸ‡©ğŸ‡ª Alemanha"}),e.jsx("option",{value:"IT",children:"ğŸ‡®ğŸ‡¹ ItÃ¡lia"}),e.jsx("option",{value:"NL",children:"ğŸ‡³ğŸ‡± PaÃ­ses Baixos"}),e.jsx("option",{value:"BE",children:"ğŸ‡§ğŸ‡ª BÃ©lgica"}),e.jsx("option",{value:"LU",children:"ğŸ‡±ğŸ‡º Luxemburgo"}),e.jsx("option",{value:"AT",children:"ğŸ‡¦ğŸ‡¹ Ãustria"}),e.jsx("option",{value:"GR",children:"ğŸ‡¬ğŸ‡· GrÃ©cia"}),e.jsx("option",{value:"IE",children:"ğŸ‡®ğŸ‡ª Irlanda"}),e.jsx("option",{value:"DK",children:"ğŸ‡©ğŸ‡° Dinamarca"}),e.jsx("option",{value:"SE",children:"ğŸ‡¸ğŸ‡ª SuÃ©cia"}),e.jsx("option",{value:"FI",children:"ğŸ‡«ğŸ‡® FinlÃ¢ndia"}),e.jsx("option",{value:"PL",children:"ğŸ‡µğŸ‡± PolÃ³nia"}),e.jsx("option",{value:"CZ",children:"ğŸ‡¨ğŸ‡¿ RepÃºblica Checa"}),e.jsx("option",{value:"HU",children:"ğŸ‡­ğŸ‡º Hungria"}),e.jsx("option",{value:"RO",children:"ğŸ‡·ğŸ‡´ RomÃ©nia"}),e.jsx("option",{value:"BG",children:"ğŸ‡§ğŸ‡¬ BulgÃ¡ria"}),e.jsx("option",{value:"HR",children:"ğŸ‡­ğŸ‡· CroÃ¡cia"}),e.jsx("option",{value:"SK",children:"ğŸ‡¸ğŸ‡° EslovÃ¡quia"}),e.jsx("option",{value:"SI",children:"ğŸ‡¸ğŸ‡® EslovÃ©nia"}),e.jsx("option",{value:"EE",children:"ğŸ‡ªğŸ‡ª EstÃ³nia"}),e.jsx("option",{value:"LV",children:"ğŸ‡±ğŸ‡» LetÃ³nia"}),e.jsx("option",{value:"LT",children:"ğŸ‡±ğŸ‡¹ LituÃ¢nia"}),e.jsx("option",{value:"MT",children:"ğŸ‡²ğŸ‡¹ Malta"}),e.jsx("option",{value:"CY",children:"ğŸ‡¨ğŸ‡¾ Chipre"})]})]})]}),e.jsx("button",{onClick:oe,disabled:!C(),className:"w-full px-8 py-5 bg-gradient-to-r from-sky-500 to-blue-600 text-white rounded-xl hover:from-sky-600 hover:to-blue-700 transition-all duration-300 text-base font-bold shadow-lg shadow-sky-300/50 whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transform hover:scale-[1.02] hover:shadow-2xl hover:shadow-sky-400/60 active:scale-95",children:e.jsxs("span",{className:"flex items-center justify-center gap-3",children:["Continuar para Pagamento Seguro",e.jsx("i",{className:"ri-arrow-right-line text-xl"})]})})]})]}),g==="payment"&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-sm border-2 border-sky-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Pagamento Seguro"}),e.jsxs("button",{onClick:()=>V("shipping"),disabled:F,className:"text-sky-600 hover:text-blue-700 font-medium cursor-pointer hover:underline transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Voltar"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"MÃ©todos de Pagamento Aceites"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-sky-50 to-blue-100 p-4 rounded-xl border-2 border-sky-300 flex items-center justify-center hover:scale-110 transition-transform duration-200 cursor-pointer hover:shadow-lg",children:e.jsx("i",{className:"ri-bank-card-line text-3xl text-sky-600"})}),e.jsx("div",{className:"bg-gradient-to-br from-sky-50 to-blue-100 p-4 rounded-xl border-2 border-sky-300 flex items-center justify-center hover:scale-110 transition-transform duration-200 cursor-pointer hover:shadow-lg",children:e.jsx("i",{className:"ri-mastercard-line text-3xl text-sky-600"})}),e.jsx("div",{className:"bg-gradient-to-br from-sky-50 to-blue-100 p-4 rounded-xl border-2 border-sky-300 flex items-center justify-center hover:scale-110 transition-transform duration-200 cursor-pointer hover:shadow-lg",children:e.jsx("i",{className:"ri-google-line text-3xl text-sky-600"})}),e.jsx("div",{className:"bg-gradient-to-br from-sky-50 to-blue-100 p-4 rounded-xl border-2 border-sky-300 flex items-center justify-center hover:scale-110 transition-transform duration-200 cursor-pointer hover:shadow-lg",children:e.jsx("i",{className:"ri-apple-line text-3xl text-sky-600"})})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("i",{className:"ri-shield-check-line text-3xl text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-green-900 mb-2",children:"Pagamento 100% Seguro"}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"âœ“ EncriptaÃ§Ã£o SSL de nÃ­vel bancÃ¡rio"}),e.jsx("li",{children:"âœ“ Conformidade PCI DSS NÃ­vel 1"}),e.jsx("li",{children:"âœ“ AutenticaÃ§Ã£o 3D Secure"}),e.jsx("li",{children:"âœ“ Processamento seguro pela tecnologia lÃ­der mundial"})]})]})]})}),e.jsxs("div",{className:"bg-sky-50 p-4 rounded-xl mb-6 border-2 border-sky-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Dados de Envio"}),e.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome:"})," ",t.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefone:"})," ",t.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Morada:"})," ",t.street,", ",t.city,", ",t.postal_code,", ",t.country]})]})]}),o&&e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:s=>J(s.target.checked),className:"w-5 h-5 text-sky-600 rounded cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Guardar informaÃ§Ãµes de pagamento para compras futuras"})]})}),e.jsx("button",{onClick:le,disabled:F||!C(),className:"w-full px-8 py-5 bg-gradient-to-r from-sky-600 to-blue-700 text-white rounded-xl hover:from-sky-700 hover:to-blue-800 transition-all duration-300 font-bold text-lg shadow-xl shadow-sky-300/50 whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transform hover:scale-[1.02] hover:shadow-2xl hover:shadow-sky-400/60 active:scale-95",children:F?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-2xl"}),"A processar pagamento seguro..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("i",{className:"ri-lock-line text-xl"}),"Pagar â‚¬",j.toFixed(2)," com SeguranÃ§a"]})}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-4",children:'Ao clicar em "Pagar", serÃ¡ redirecionado para uma pÃ¡gina de pagamento segura'})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border-2 border-sky-200 sticky top-24",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Resumo do Pedido"}),e.jsx("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto",children:N.map(s=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Qtd: ",s.quantity]}),e.jsxs("p",{className:"text-sm font-semibold text-sky-600",children:["â‚¬",(s.price*s.quantity).toFixed(2)]})]})]},s.id))}),e.jsxs("div",{className:"space-y-4 mb-6 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-base",children:[e.jsx("span",{className:"text-gray-700",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold text-gray-800",children:["â‚¬",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-base",children:[e.jsxs("span",{className:"text-gray-700",children:["Envio (",w.find(s=>s.code===t.country)?.name||t.country,")"]}),e.jsx("span",{className:"font-semibold text-gray-800",children:n===0?e.jsx("span",{className:"text-green-600 font-bold",children:"GrÃ¡tis ğŸ‰"}):`â‚¬${n.toFixed(2)}`})]}),l<S&&S>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:["ğŸ’¡ Faltam ",e.jsxs("strong",{children:["â‚¬",(S-l).toFixed(2)]})," para envio grÃ¡tis em ",w.find(s=>s.code===t.country)?.name||t.country,"!"]})}),P&&u>0&&e.jsxs("div",{className:"flex justify-between text-base",children:[e.jsxs("span",{className:"text-gray-700",children:["IVA (",u,"%) - ",t.country]}),e.jsx("span",{className:"font-semibold text-gray-800",children:E?e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-600",children:["â‚¬",(b+m).toFixed(2)]}),e.jsx("span",{className:"text-xs",children:"(incluÃ­do)"})]}):e.jsxs("span",{className:"text-sky-600",children:["â‚¬",(b+m).toFixed(2)]})})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold text-sky-600",children:["â‚¬",j.toFixed(2)]})]}),P&&e.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[E?e.jsx("p",{className:"text-xs text-gray-500 text-center",children:Z?.legalText||"Os preÃ§os incluem IVA conforme a legislaÃ§Ã£o da UniÃ£o Europeia."}):e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["O IVA foi calculado conforme o paÃ­s de entrega selecionado (",t.country,")."]}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium mb-2 text-center",children:"ğŸ“Š Detalhes do IVA:"}),e.jsx("div",{className:"space-y-1 text-xs text-blue-600",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal produtos:"}),e.jsxs("span",{className:"font-semibold",children:["â‚¬",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-blue-500 text-[10px]",children:[e.jsx("span",{className:"pl-2",children:"â€¢ Base (sem IVA):"}),e.jsxs("span",{children:["â‚¬",(l-b).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-blue-500 text-[10px]",children:[e.jsxs("span",{className:"pl-2",children:["â€¢ IVA (",u,"%):"]}),e.jsxs("span",{children:["â‚¬",b.toFixed(2)]})]}),n>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{children:"Envio:"}),e.jsxs("span",{className:"font-semibold",children:["â‚¬",n.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-blue-500 text-[10px]",children:[e.jsx("span",{className:"pl-2",children:"â€¢ Base (sem IVA):"}),e.jsxs("span",{children:["â‚¬",(n-m).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-blue-500 text-[10px]",children:[e.jsxs("span",{className:"pl-2",children:["â€¢ IVA (",u,"%):"]}),e.jsxs("span",{children:["â‚¬",m.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-between border-t border-blue-200 pt-1 mt-2",children:[e.jsx("span",{className:"font-medium",children:"IVA total incluÃ­do:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["â‚¬",(b+m).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t border-blue-200 pt-1",children:[e.jsx("span",{className:"font-medium",children:"Total a pagar:"}),e.jsxs("span",{className:"font-bold",children:["â‚¬",j.toFixed(2)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal (sem IVA):"}),e.jsxs("span",{className:"font-semibold",children:["â‚¬",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["IVA sobre produtos (",u,"%):"]}),e.jsxs("span",{className:"font-semibold text-sky-600",children:["+ â‚¬",b.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Envio:"}),e.jsx("span",{className:"font-semibold",children:n===0?"GrÃ¡tis":`+ â‚¬${n.toFixed(2)}`})]}),n>0&&m>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["IVA sobre envio (",u,"%):"]}),e.jsxs("span",{className:"font-semibold text-sky-600",children:["+ â‚¬",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between border-t border-blue-200 pt-1",children:[e.jsx("span",{children:"Total a pagar:"}),e.jsxs("span",{className:"font-bold",children:["â‚¬",j.toFixed(2)]})]})]})})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-sky-50 rounded-xl border-2 border-sky-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"ri-customer-service-line text-2xl text-sky-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm mb-1",children:"Precisa de Ajuda?"}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Estamos aqui para si!"}),e.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[e.jsxs("p",{children:["ğŸ‘¨â€ğŸ’¼ ",e.jsx("strong",{children:"Suporte:"})," 8:30-18:00"]}),e.jsxs("p",{children:["ğŸ“ ",e.jsx("strong",{children:"Tel:"})," +352 631 377 168"]}),e.jsxs("p",{children:["ğŸ“§ ",e.jsx("strong",{children:"Email:"})," contacto@marisol.com"]})]})]})]})})]})})]})]})}),e.jsx(me,{})]})}export{ge as default};
//# sourceMappingURL=page-CkA4F6cG.js.map
