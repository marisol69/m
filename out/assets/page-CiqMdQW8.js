import{r as l,s as T,j as e,f as be,u as Ne,e as we}from"./index-DlD1gmTD.js";function ve({darkMode:t}){const[u,P]=l.useState(!0),[g,C]=l.useState({salesToday:0,salesWeek:0,salesMonth:0,salesTodayChange:0,salesWeekChange:0,salesMonthChange:0,revenueTotal:0,revenueChange:0,ordersTotal:0,ordersChange:0,averageTicket:0,averageTicketChange:0,profit:0,profitChange:0,ivaCollected:0,ivaChange:0,pendingShipments:0,pendingOrders:0,processingOrders:0,shippedOrders:0,deliveredOrders:0,cancelledOrders:0,totalCustomers:0,newCustomersToday:0,newCustomersWeek:0,newCustomersMonth:0,returningCustomers:0,totalProducts:0,outOfStockProducts:0,lowStockProducts:0,promotionProducts:0,totalVisits:0,uniqueVisitors:0,mostViewedProduct:"",newsletterSubscribers:0,newSubscribersWeek:0,ivaActive:!1,freeShippingActive:!1,freeShippingOrders:0,unreadMessages:0,newNewsletterSubs:0,stockAlerts:0,stripeStatus:!0,supabaseStatus:!0,lastLogin:new Date().toISOString()}),[h,F]=l.useState([]),[R,w]=l.useState([]),[b,q]=l.useState([]);l.useEffect(()=>{$()},[]);const $=async()=>{try{P(!0);const{data:p}=await T.from("orders").select("*"),D=new Date,k=new Date(D.getFullYear(),D.getMonth(),D.getDate()),O=new Date(D.getTime()-10080*60*1e3),z=new Date(D.getTime()-720*60*60*1e3),G=new Date(D.getTime()-336*60*60*1e3),_=new Date(D.getTime()-1440*60*60*1e3),i=p?.filter(y=>new Date(y.created_at)>=k).reduce((y,te)=>y+parseFloat(te.total_amount||0),0)||0,m=p?.filter(y=>new Date(y.created_at)>=O).reduce((y,te)=>y+parseFloat(te.total_amount||0),0)||0,f=p?.filter(y=>new Date(y.created_at)>=z).reduce((y,te)=>y+parseFloat(te.total_amount||0),0)||0,o=p?.filter(y=>new Date(y.created_at)>=G&&new Date(y.created_at)<O).reduce((y,te)=>y+parseFloat(te.total_amount||0),0)||1,I=p?.filter(y=>new Date(y.created_at)>=_&&new Date(y.created_at)<z).reduce((y,te)=>y+parseFloat(te.total_amount||0),0)||1,j=p?.reduce((y,te)=>y+parseFloat(te.total_amount||0),0)||0,S=p?.length||0,c=p?.filter(y=>new Date(y.created_at)>=_&&new Date(y.created_at)<z).length||1,L=S>0?j/S:0,H=p?.filter(y=>y.status==="pending").length||0,Z=p?.filter(y=>y.status==="processing").length||0,Q=p?.filter(y=>y.status==="shipped").length||0,J=p?.filter(y=>y.status==="delivered").length||0,d=p?.filter(y=>y.status==="cancelled").length||0,{data:r}=await T.from("customers").select("*").order("created_at",{ascending:!1}),a=r?.length||0,n=r?.filter(y=>new Date(y.created_at)>=k).length||0,U=r?.filter(y=>new Date(y.created_at)>=O).length||0,A=r?.filter(y=>new Date(y.created_at)>=z).length||0;F(r?.slice(0,5)||[]);const{data:V}=await T.from("products").select("*"),x=V?.filter(y=>y.is_active).length||0,v=V?.filter(y=>y.stock===0).length||0,B=V?.filter(y=>y.stock>0&&y.stock<=10).length||0,X=V?.filter(y=>y.is_promotion).length||0,ee=V?.filter(y=>y.stock<=10).map(y=>({id:y.id,name:y.name,stock:y.stock}))||[];q(ee.slice(0,5)),w(V?.slice(0,5).map(y=>({id:y.id,name:y.name,sales:Math.floor(Math.random()*50)+10,image_url:y.image_url}))||[]);const{data:M}=await T.from("newsletter_subscribers").select("*"),ae=M?.length||0,ne=M?.filter(y=>new Date(y.created_at)>=O).length||0,{data:ce}=await T.from("notifications").select("*").eq("is_read",!1),ie=ce?.filter(y=>y.type==="message").length||0,{data:xe}=await T.from("site_settings").select("*").single(),de=xe?.vat_enabled||!1,ge=xe?.free_shipping_enabled||!1,re=j*.17;C({salesToday:i,salesWeek:m,salesMonth:f,salesTodayChange:(i/(o/7)-1)*100,salesWeekChange:(m/o-1)*100,salesMonthChange:(f/I-1)*100,revenueTotal:j,revenueChange:(f/I-1)*100,ordersTotal:S,ordersChange:(S/c-1)*100,averageTicket:L,averageTicketChange:5.2,profit:j*.3,profitChange:8.1,ivaCollected:re,ivaChange:(f/I-1)*100,pendingShipments:H+Z,pendingOrders:H,processingOrders:Z,shippedOrders:Q,deliveredOrders:J,cancelledOrders:d,totalCustomers:a,newCustomersToday:n,newCustomersWeek:U,newCustomersMonth:A,returningCustomers:Math.floor(a*.4),totalProducts:x,outOfStockProducts:v,lowStockProducts:B,promotionProducts:X,totalVisits:Math.floor(S*15),uniqueVisitors:Math.floor(S*12),mostViewedProduct:V?.[0]?.name||"N/A",newsletterSubscribers:ae,newSubscribersWeek:ne,ivaActive:de,freeShippingActive:ge,freeShippingOrders:p?.filter(y=>parseFloat(y.total_amount)>=50).length||0,unreadMessages:ie,newNewsletterSubs:ne,stockAlerts:B+v,stripeStatus:!0,supabaseStatus:!0,lastLogin:new Date().toISOString()})}catch(p){console.error("Erro ao carregar dashboard:",p)}finally{P(!1)}};if(u)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})});const E=({icon:p,title:D,value:k,change:O,color:z})=>e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${z} flex items-center justify-center`,children:e.jsx("i",{className:`${p} text-white text-2xl`})}),O!==void 0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm font-semibold ${O>=0?"text-green-500":"text-red-500"}`,children:[e.jsx("i",{className:`${O>=0?"ri-arrow-up-line":"ri-arrow-down-line"}`}),Math.abs(O).toFixed(1),"%"]})]}),e.jsx("h3",{className:`text-sm font-medium mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:D}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:k})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:"VisÃ£o Geral"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Dashboard completo da Marisol"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"ðŸ“Š Indicadores Principais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{icon:"ri-line-chart-line",title:"Vendas Hoje",value:`â‚¬${g.salesToday.toFixed(2)}`,change:g.salesTodayChange,color:"bg-gradient-to-br from-blue-500 to-blue-600"}),e.jsx(E,{icon:"ri-calendar-line",title:"Vendas Esta Semana",value:`â‚¬${g.salesWeek.toFixed(2)}`,change:g.salesWeekChange,color:"bg-gradient-to-br from-purple-500 to-purple-600"}),e.jsx(E,{icon:"ri-calendar-2-line",title:"Vendas Este MÃªs",value:`â‚¬${g.salesMonth.toFixed(2)}`,change:g.salesMonthChange,color:"bg-gradient-to-br from-pink-500 to-pink-600"}),e.jsx(E,{icon:"ri-money-euro-circle-line",title:"Receita Total",value:`â‚¬${g.revenueTotal.toFixed(2)}`,change:g.revenueChange,color:"bg-gradient-to-br from-green-500 to-green-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(E,{icon:"ri-shopping-bag-line",title:"Total de Encomendas",value:g.ordersTotal,change:g.ordersChange,color:"bg-gradient-to-br from-orange-500 to-orange-600"}),e.jsx(E,{icon:"ri-price-tag-3-line",title:"Ticket MÃ©dio",value:`â‚¬${g.averageTicket.toFixed(2)}`,change:g.averageTicketChange,color:"bg-gradient-to-br from-teal-500 to-teal-600"}),e.jsx(E,{icon:"ri-line-chart-fill",title:"Lucro Estimado",value:`â‚¬${g.profit.toFixed(2)}`,change:g.profitChange,color:"bg-gradient-to-br from-emerald-500 to-emerald-600"}),e.jsx(E,{icon:"ri-file-text-line",title:"IVA Arrecadado",value:`â‚¬${g.ivaCollected.toFixed(2)}`,change:g.ivaChange,color:"bg-gradient-to-br from-indigo-500 to-indigo-600"})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ“¦ Estado das Encomendas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400 mb-2",children:g.pendingOrders}),e.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-300 font-medium",children:"Pendentes"}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=encomendas&filter=pending",className:"mt-3 text-xs text-yellow-600 dark:text-yellow-400 hover:underline",children:"Ver detalhes â†’"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:g.processingOrders}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"Em Processamento"}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=encomendas&filter=processing",className:"mt-3 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Ver detalhes â†’"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:g.shippedOrders}),e.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"Enviadas"}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=encomendas&filter=shipped",className:"mt-3 text-xs text-purple-600 dark:text-purple-400 hover:underline",children:"Ver detalhes â†’"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:g.deliveredOrders}),e.jsx("div",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Entregues"}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=encomendas&filter=delivered",className:"mt-3 text-xs text-green-600 dark:text-green-400 hover:underline",children:"Ver detalhes â†’"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-2",children:g.cancelledOrders}),e.jsx("div",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Canceladas"}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=encomendas&filter=cancelled",className:"mt-3 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Ver detalhes â†’"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ‘¥ Clientes"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-pink-50 dark:bg-pink-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-pink-300":"text-pink-700"}`,children:"Total de Clientes"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-pink-400":"text-pink-600"}`,children:g.totalCustomers})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-blue-300":"text-blue-700"}`,children:"Novos Hoje"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:g.newCustomersToday})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-purple-300":"text-purple-700"}`,children:"Novos Esta Semana"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-purple-400":"text-purple-600"}`,children:g.newCustomersWeek})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 dark:bg-green-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-green-300":"text-green-700"}`,children:"Clientes Recorrentes"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-green-400":"text-green-600"}`,children:g.returningCustomers})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold mb-3 ${t?"text-gray-300":"text-gray-700"}`,children:"Ãšltimos Clientes Registados"}),e.jsx("div",{className:"space-y-2",children:h.map(p=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${t?"bg-gray-700":"bg-gray-50"} hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-colors cursor-pointer`,onClick:()=>window.location.href="/admin?tab=clientes",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-semibold",children:p.full_name?.charAt(0)||"C"}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:p.full_name||"Cliente"}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:p.email})]})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400"})]},p.id))})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ› Produtos"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-blue-300":"text-blue-700"}`,children:"Produtos Ativos"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-blue-400":"text-blue-600"}`,children:g.totalProducts})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-50 dark:bg-red-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-red-300":"text-red-700"}`,children:"Produtos Esgotados"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-red-400":"text-red-600"}`,children:g.outOfStockProducts})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-orange-300":"text-orange-700"}`,children:"Stock Baixo"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-orange-400":"text-orange-600"}`,children:g.lowStockProducts})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:[e.jsx("span",{className:`font-medium ${t?"text-purple-300":"text-purple-700"}`,children:"Em PromoÃ§Ã£o"}),e.jsx("span",{className:`text-xl font-bold ${t?"text-purple-400":"text-purple-600"}`,children:g.promotionProducts})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold mb-3 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸš¨ Alertas de Stock"}),e.jsx("div",{className:"space-y-2",children:b.length>0?b.map(p=>e.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg ${t?"bg-gray-700":"bg-gray-50"} border ${p.stock===0?"border-red-500":"border-orange-500"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:`ri-alert-line text-xl ${p.stock===0?"text-red-500":"text-orange-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:p.name}),e.jsx("div",{className:`text-xs ${p.stock===0?"text-red-500":"text-orange-500"}`,children:p.stock===0?"Esgotado":`Apenas ${p.stock} em stock`})]})]})},p.id)):e.jsx("div",{className:`text-center py-4 ${t?"text-gray-400":"text-gray-500"}`,children:"âœ… Nenhum alerta de stock"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ“ˆ TrÃ¡fego & Visitas"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-90 mb-1",children:"Total de Visitas"}),e.jsx("div",{className:"text-3xl font-bold",children:g.totalVisits})]}),e.jsx("i",{className:"ri-eye-line text-4xl opacity-50"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-pink-500 to-orange-500 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-90 mb-1",children:"Visitantes Ãšnicos"}),e.jsx("div",{className:"text-3xl font-bold",children:g.uniqueVisitors})]}),e.jsx("i",{className:"ri-user-line text-4xl opacity-50"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Produto Mais Visto"}),e.jsx("div",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:g.mostViewedProduct})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:`p-3 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"ðŸ”"}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Google"}),e.jsx("div",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:"45%"})]}),e.jsxs("div",{className:`p-3 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"ðŸ“±"}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Social"}),e.jsx("div",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:"30%"})]}),e.jsxs("div",{className:`p-3 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:"ðŸ”—"}),e.jsx("div",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Direto"}),e.jsx("div",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:"25%"})]})]})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ’Œ Marketing & Newsletter"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-pink-500 to-rose-500 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-90 mb-1",children:"Total de Subscritores"}),e.jsx("div",{className:"text-3xl font-bold",children:g.newsletterSubscribers})]}),e.jsx("i",{className:"ri-mail-line text-4xl opacity-50"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Novas InscriÃ§Ãµes (Semana)"}),e.jsxs("span",{className:"font-bold text-green-500",children:["+",g.newSubscribersWeek]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 h-2 rounded-full",style:{width:`${g.newSubscribersWeek/g.newsletterSubscribers*100}%`}})})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=marketing",className:"w-full py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-send-plane-line"}),"Criar Nova Campanha"]}),e.jsx("div",{className:`p-4 rounded-lg border-2 border-dashed ${t?"border-gray-600":"border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-calendar-check-line text-3xl text-pink-500 mb-2"}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Ãšltima Campanha Enviada"}),e.jsx("div",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:"HÃ¡ 3 dias"}),e.jsx("div",{className:"mt-2 text-xs text-green-500",children:"Taxa de Abertura: 42%"})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ§¾ IVA/TVA & Envio"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-90 mb-1",children:"IVA Arrecadado (MÃªs)"}),e.jsxs("div",{className:"text-3xl font-bold",children:["â‚¬",g.ivaCollected.toFixed(2)]})]}),e.jsx("i",{className:"ri-file-text-line text-4xl opacity-50"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.ivaActive?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Status IVA"})]}),e.jsx("div",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:g.ivaActive?"Ativo":"Inativo"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.freeShippingActive?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Envio GrÃ¡tis"})]}),e.jsx("div",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:g.freeShippingActive?"Ativo":"Inativo"})]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Encomendas com Envio GrÃ¡tis"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:g.freeShippingOrders}),e.jsxs("div",{className:"text-sm text-green-500",children:[g.ordersTotal>0?(g.freeShippingOrders/g.ordersTotal*100).toFixed(1):0,"%"]})]})]}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=iva-envio",className:`w-full py-3 px-4 rounded-lg font-semibold transition-all ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Gerir IVA & Envio"})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ”” NotificaÃ§Ãµes & Alertas"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",onClick:()=>window.location.href="/admin?tab=notificacoes",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("i",{className:"ri-message-3-line text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:"Novas Mensagens"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"FormulÃ¡rio de Contacto"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.unreadMessages})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx("i",{className:"ri-mail-line text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:"Newsletter"}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Novas InscriÃ§Ãµes"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.newNewsletterSubs})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center",children:e.jsx("i",{className:"ri-alert-line text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:"Alertas de Stock"}),e.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:"Produtos com Stock Baixo"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:g.stockAlerts})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("i",{className:"ri-shopping-bag-line text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${t?"text-white":"text-gray-900"}`,children:"Novos Pedidos"}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"Pendentes de Processamento"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:g.pendingOrders})]}),e.jsx("button",{onClick:()=>window.location.href="/admin?tab=notificacoes",className:"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all",children:"Ver Todas as NotificaÃ§Ãµes"})]})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"âš™ï¸ AÃ§Ãµes RÃ¡pidas"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=produtos&action=add",className:"p-4 rounded-lg bg-gradient-to-br from-pink-500 to-rose-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-add-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Adicionar Produto"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=produtos&action=promotion",className:"p-4 rounded-lg bg-gradient-to-br from-orange-500 to-red-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-price-tag-3-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Criar PromoÃ§Ã£o"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=encomendas",className:"p-4 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-shopping-bag-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Ver Encomendas"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=marketing",className:"p-4 rounded-lg bg-gradient-to-br from-purple-500 to-indigo-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-mail-send-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Enviar Newsletter"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=pagina-inicial",className:"p-4 rounded-lg bg-gradient-to-br from-green-500 to-teal-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-image-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Alterar Banner"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=iva-envio",className:"p-4 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-file-text-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Gerir IVA"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=clientes",className:"p-4 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-user-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Ver Clientes"})]}),e.jsxs("button",{onClick:()=>window.location.href="/admin?tab=categorias",className:"p-4 rounded-lg bg-gradient-to-br from-pink-500 to-purple-500 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx("i",{className:"ri-stack-line text-3xl mb-2"}),e.jsx("div",{className:"font-semibold",children:"Gerir Categorias"})]})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ” SeguranÃ§a & Estado do Sistema"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.stripeStatus?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("i",{className:"ri-bank-card-line text-2xl text-purple-500"})]}),e.jsx("div",{className:`text-sm mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Stripe"}),e.jsx("div",{className:`font-bold ${g.stripeStatus?"text-green-500":"text-red-500"}`,children:g.stripeStatus?"Conectado":"Erro"})]}),e.jsxs("div",{className:`p-4 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${g.supabaseStatus?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("i",{className:"ri-database-2-line text-2xl text-emerald-500"})]}),e.jsx("div",{className:`text-sm mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Supabase"}),e.jsx("div",{className:`font-bold ${g.supabaseStatus?"text-green-500":"text-red-500"}`,children:g.supabaseStatus?"Conectado":"Erro"})]}),e.jsxs("div",{className:`p-4 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse"}),e.jsx("i",{className:"ri-global-line text-2xl text-blue-500"})]}),e.jsx("div",{className:`text-sm mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Site"}),e.jsx("div",{className:"font-bold text-green-500",children:"Online"})]}),e.jsxs("div",{className:`p-4 rounded-lg text-center ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:e.jsx("i",{className:"ri-user-settings-line text-2xl text-pink-500"})}),e.jsx("div",{className:`text-sm mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Ãšltimo Login"}),e.jsx("div",{className:`font-bold ${t?"text-white":"text-gray-900"}`,children:"Agora"})]})]})]}),R.length>0&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg border ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("h2",{className:`text-xl font-bold mb-6 ${t?"text-white":"text-gray-900"}`,children:"ðŸ† Produtos Mais Vendidos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:R.map((p,D)=>e.jsxs("div",{className:`relative p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"} hover:shadow-lg transition-all cursor-pointer`,onClick:()=>window.location.href="/admin?tab=produtos",children:[e.jsxs("div",{className:"absolute top-2 left-2 w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm",children:["#",D+1]}),e.jsx("img",{src:p.image_url,alt:p.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("div",{className:`font-medium mb-1 text-sm ${t?"text-white":"text-gray-900"}`,children:p.name}),e.jsxs("div",{className:"text-xs text-pink-500 font-semibold",children:[p.sales," vendas"]})]},p.id))})]})]})}const oe=be("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd");function $e({darkMode:t=!1}){const[u,P]=l.useState([]),[g,C]=l.useState([]),[h,F]=l.useState([]),[R,w]=l.useState([]),[b,q]=l.useState([]),[$,E]=l.useState(!0),[p,D]=l.useState(!1),[k,O]=l.useState(null),[z,G]=l.useState(""),[_,i]=l.useState(""),[m,f]=l.useState(""),[o,I]=l.useState(!1),[j,S]=l.useState([]),[c,L]=l.useState({name_pt:"",name_en:"",name_fr:"",name_de:"",description:"",price:"",category_id:"",subcategory_id:"",colors:[],sizes:[],stock:"",images:[],is_active:!0,is_on_sale:!1,sale_price:"",discount_percentage:0}),[H,Z]=l.useState(""),[Q,J]=l.useState(""),[d,r]=l.useState("");l.useEffect(()=>{a(),n()},[]);const a=async()=>{E(!0);try{const[s,N,W]=await Promise.all([oe.from("products").select("*").order("created_at",{ascending:!1}),oe.from("categories").select("*").order("name"),oe.from("subcategories").select("*").order("name")]);s.data&&P(s.data),N.data&&C(N.data),W.data&&F(W.data)}catch(s){console.error("Erro ao carregar dados:",s)}finally{E(!1)}},n=async()=>{try{const{data:s}=await oe.from("products").select("colors"),N=new Set;s?.forEach(Y=>{Y.colors&&Array.isArray(Y.colors)&&Y.colors.forEach(he=>N.add(he))}),w(Array.from(N).sort());const W=new Set;s?.forEach(Y=>{Y.sizes&&Array.isArray(Y.sizes)&&Y.sizes.forEach(he=>W.add(he))}),q(Array.from(W).sort())}catch(s){console.error("Erro ao carregar filtros:",s)}},U=async()=>{if(!c.name_pt||!c.price){alert("âŒ Nome e preÃ§o sÃ£o obrigatÃ³rios");return}if(!c.category_id){alert("âŒ Por favor, selecione uma categoria");return}if(c.images.length===0){alert("âŒ Adicione pelo menos uma imagem");return}I(!0);try{const s={name_pt:c.name_pt,name_en:c.name_en||c.name_pt,name_fr:c.name_fr||c.name_pt,name_de:c.name_de||c.name_pt,price:parseFloat(c.price),stock:parseInt(c.stock)||0,category:c.category_id,category_id:c.category_id,description:c.description||"",images:c.images,colors:c.colors,sizes:c.sizes,is_active:c.is_active,is_on_sale:c.is_on_sale,sale_price:c.is_on_sale&&c.sale_price?parseFloat(c.sale_price):null,discount_percentage:c.is_on_sale?c.discount_percentage:0,updated_at:new Date().toISOString()};if(c.subcategory_id&&(s.subcategory_id=c.subcategory_id),k){const{error:N}=await oe.from("products").update(s).eq("id",k.id);if(N)throw N;alert("âœ… Produto atualizado com sucesso!")}else{const N={...s,created_at:new Date().toISOString()},{error:W}=await oe.from("products").insert([N]);if(W)throw W;alert("âœ… Produto adicionado com sucesso!")}D(!1),O(null),M(),await a(),await n()}catch(s){console.error("Erro ao guardar produto:",s),alert(`âŒ Erro ao guardar produto: ${s.message||"Erro desconhecido"}`)}finally{I(!1)}},A=async s=>{if(confirm("âŒ Tem certeza que deseja eliminar este produto?"))try{const{error:N}=await oe.from("products").delete().eq("id",s);if(N)throw N;alert("âœ… Produto eliminado com sucesso!"),await a(),await n()}catch(N){console.error("Erro:",N),alert("âŒ Erro ao eliminar produto")}},V=async()=>{if(j.length===0){alert("âŒ Por favor, selecione pelo menos um produto");return}if(confirm(`âŒ Tem certeza que deseja eliminar ${j.length} produto(s)?`))try{const{error:s}=await oe.from("products").delete().in("id",j);if(s)throw s;alert(`âœ… ${j.length} produto(s) eliminado(s) com sucesso!`),S([]),await a(),await n()}catch(s){console.error("Erro ao eliminar produtos:",s),alert("âŒ Erro ao eliminar produtos")}},x=async()=>{if(j.length===0){alert("âŒ Por favor, selecione pelo menos um produto");return}try{const{error:s}=await oe.from("products").update({is_active:!0}).in("id",j);if(s)throw s;alert(`âœ… ${j.length} produto(s) ativado(s) com sucesso!`),S([]),await a()}catch(s){console.error("Erro:",s),alert("âŒ Erro ao ativar produtos")}},v=async()=>{if(j.length===0){alert("âŒ Por favor, selecione pelo menos um produto");return}try{const{error:s}=await oe.from("products").update({is_active:!1}).in("id",j);if(s)throw s;alert(`âœ… ${j.length} produto(s) desativado(s) com sucesso!`),S([]),await a()}catch(s){console.error("Erro:",s),alert("âŒ Erro ao desativar produtos")}},B=async s=>{try{const N={...s,id:void 0,name_pt:`${s.name_pt} (CÃ³pia)`,name_en:`${s.name_en||s.name_pt} (Copy)`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:W}=await oe.from("products").insert([N]);if(W)throw W;alert("âœ… Produto duplicado com sucesso!"),await a()}catch(N){console.error("Erro ao duplicar produto:",N),alert("âŒ Erro ao duplicar produto")}},X=s=>{j.includes(s)?S(j.filter(N=>N!==s)):S([...j,s])},ee=()=>{j.length===re.length?S([]):S(re.map(s=>s.id))},M=()=>{L({name_pt:"",name_en:"",name_fr:"",name_de:"",description:"",price:"",category_id:"",subcategory_id:"",colors:[],sizes:[],stock:"",images:[],is_active:!0,is_on_sale:!1,sale_price:"",discount_percentage:0}),Z(""),J(""),r("")},ae=s=>{O(s),L({name_pt:s.name_pt||"",name_en:s.name_en||"",name_fr:s.name_fr||"",name_de:s.name_de||"",description:s.description||"",price:s.price?.toString()||"",category_id:s.category_id||"",subcategory_id:s.subcategory_id||"",colors:s.colors||[],sizes:s.sizes||[],stock:s.stock?.toString()||"",images:s.images||[],is_active:s.is_active!==!1,is_on_sale:s.is_on_sale||!1,sale_price:s.sale_price?.toString()||"",discount_percentage:s.discount_percentage||0}),D(!0)},ne=()=>{H.trim()&&!c.colors.includes(H.trim())&&(L({...c,colors:[...c.colors,H.trim()]}),Z(""))},ce=s=>{L({...c,colors:c.colors.filter(N=>N!==s)})},ie=()=>{Q.trim()&&!c.sizes.includes(Q.trim())&&(L({...c,sizes:[...c.sizes,Q.trim()]}),J(""))},xe=s=>{L({...c,sizes:c.sizes.filter(N=>N!==s)})},de=()=>{d.trim()&&!c.images.includes(d.trim())&&(L({...c,images:[...c.images,d.trim()]}),r(""))},ge=s=>{L({...c,images:c.images.filter(N=>N!==s)})},re=u.filter(s=>{const N=s.name_pt?.toLowerCase().includes(z.toLowerCase()),W=!_||s.category_id===_,Y=!m||m==="active"&&s.is_active!==!1||m==="inactive"&&s.is_active===!1||m==="out_ofstock"&&(s.stock||0)===0||m==="onsale"&&s.is_on_sale;return N&&W&&Y}),y=h.filter(s=>s.category_id===c.category_id),te=u.length,ye=u.filter(s=>s.is_active!==!1).length,fe=u.filter(s=>(s.stock||0)===0).length,je=u.filter(s=>s.is_on_sale).length,ue=u.filter(s=>(s.stock||0)>0&&(s.stock||0)<=10).length;return $?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"GestÃ£o de Produtos"}),e.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Gerir todos os produtos da sua loja"})]}),e.jsxs("div",{className:"flex gap-3",children:[j.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:x,className:"px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"Ativar"]}),e.jsxs("button",{onClick:v,className:"px-4 py-3 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-off-line mr-2"}),"Desativar"]}),e.jsxs("button",{onClick:V,className:"px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Eliminar (",j.length,")"]})]}),e.jsxs("button",{onClick:()=>{M(),O(null),D(!0)},className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar Produto"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl p-4 border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Total"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:te})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-shopping-bag-line text-white text-2xl"})})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl p-4 border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Ativos"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:ye})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-eye-line text-white text-2xl"})})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl p-4 border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Esgotados"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:fe})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-rose-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-white text-2xl"})})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl p-4 border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Stock Baixo"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:ue})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-alert-line text-white text-2xl"})})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl p-4 border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Em PromoÃ§Ã£o"}),e.jsx("p",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:je})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-discount-percent-line text-white text-2xl"})})]})})]})]}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Pesquisar"}),e.jsx("input",{type:"text",value:z,onChange:s=>G(s.target.value),placeholder:"Nome do produto...",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Categoria"}),e.jsxs("select",{value:_,onChange:s=>i(s.target.value),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Todas as categorias"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Estado"}),e.jsxs("select",{value:m,onChange:s=>f(s.target.value),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Todos os estados"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"}),e.jsx("option",{value:"outofstock",children:"Sem Stock"}),e.jsx("option",{value:"onsale",children:"Em PromoÃ§Ã£o"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"SeleÃ§Ã£o"}),e.jsx("button",{onClick:ee,className:`w-full px-4 py-2 rounded-lg border transition-colors cursor-pointer whitespace-nowrap ${j.length===re.length&&re.length>0?"bg-pink-500 text-white border-pink-500":t?"bg-gray-700 border-gray-600 text-white hover:bg-gray-600":"bg-white border-gray-300 text-gray-800 hover:bg-gray-50"}`,children:j.length===re.length&&re.length>0?"âœ“ Todos Selecionados":"Selecionar Todos"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:re.map(s=>{const N=g.find(Y=>Y.id===s.category_id)?.name||"Sem categoria",W=s.subcategory_id?h.find(Y=>Y.id===s.subcategory_id)?.name:null;return e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden hover:shadow-lg transition-all ${j.includes(s.id)?"ring-4 ring-pink-500":""}`,children:[e.jsxs("div",{className:"relative aspect-square w-full",children:[e.jsx("img",{src:s.images?.[0]||"https://via.placeholder.com/400",alt:s.name_pt,className:"w-full h-full object-cover object-top"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("button",{onClick:()=>X(s.id),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all cursor-pointer ${j.includes(s.id)?"bg-pink-500 text-white":"bg-white/90 text-gray-700 hover:bg-white"}`,children:j.includes(s.id)?e.jsx("i",{className:"ri-checkbox-line text-xl"}):e.jsx("i",{className:"ri-checkbox-blank-line text-xl"})})}),s.is_active===!1&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full",children:"Inativo"})}),s.is_on_sale&&e.jsx("div",{className:"absolute top-12 right-2",children:e.jsxs("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-medium rounded-full",children:["-",s.discount_percentage,"% OFF"]})}),(s.stock||0)===0?e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full",children:"Esgotado"})}):(s.stock||0)<=10&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs("span",{className:"px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded-full",children:["Stock Baixo (",s.stock,")"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:`font-semibold mb-1 truncate ${t?"text-white":"text-gray-800"}`,children:s.name_pt}),e.jsxs("p",{className:`text-xs mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:[N,W?` â€º ${W}`:""]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{children:s.is_on_sale&&s.sale_price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xs line-through text-gray-400",children:["â‚¬",s.price?.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-green-500 ml-2",children:["â‚¬",s.sale_price?.toFixed(2)]})]}):e.jsxs("span",{className:"text-lg font-bold text-pink-500",children:["â‚¬",s.price?.toFixed(2)]})}),e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["Stock: ",s.stock||0]})]}),(s.colors?.length>0||s.sizes?.length>0)&&e.jsxs("div",{className:"mb-3 space-y-1",children:[s.colors?.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Cores:"}),e.jsxs("span",{className:`${t?"text-gray-300":"text-gray-700"} truncate`,children:[s.colors.slice(0,3).join(", "),s.colors.length>3?"...":""]})]}),s.sizes?.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Tamanhos:"}),e.jsxs("span",{className:`${t?"text-gray-300":"text-gray-700"} truncate`,children:[s.sizes.slice(0,4).join(", "),s.sizes.length>4?"...":""]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{onClick:()=>ae(s),className:"px-3 py-2 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>B(s),className:"px-3 py-2 bg-purple-500 text-white rounded-lg text-xs hover:bg-purple-600 transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center",children:e.jsx("i",{className:"ri-file-copy-line"})}),e.jsx("button",{onClick:()=>A(s.id),className:"px-3 py-2 bg-red-500 text-white rounded-lg text-xs hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},s.id)})}),re.length===0&&e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-12 text-center shadow-sm border`,children:[e.jsx("i",{className:`ri-shirt-line text-6xl mb-4 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum produto encontrado"})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-4xl w-full my-8 max-h-[90vh] overflow-y-auto`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:k?"âœï¸ Editar Produto":"âž• Adicionar Produto"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Nome do Produto (PortuguÃªs) *"}),e.jsx("input",{type:"text",value:c.name_pt,onChange:s=>L({...c,name_pt:s.target.value}),placeholder:"Ex: Vestido Elegante",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("details",{className:`${t?"bg-gray-700":"bg-gray-50"} rounded-xl p-4`,children:[e.jsx("summary",{className:`cursor-pointer font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“ TraduÃ§Ãµes (Opcional)"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("input",{type:"text",value:c.name_en,onChange:s=>L({...c,name_en:s.target.value}),placeholder:"Nome em InglÃªs",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400`}),e.jsx("input",{type:"text",value:c.name_fr,onChange:s=>L({...c,name_fr:s.target.value}),placeholder:"Nome em FrancÃªs",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400`}),e.jsx("input",{type:"text",value:c.name_de,onChange:s=>L({...c,name_de:s.target.value}),placeholder:"Nome em AlemÃ£o",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ’° PreÃ§o Normal *"}),e.jsx("input",{type:"number",step:"0.01",value:c.price,onChange:s=>L({...c,price:s.target.value}),placeholder:"0.00",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“¦ Stock"}),e.jsx("input",{type:"number",value:c.stock,onChange:s=>L({...c,stock:s.target.value}),placeholder:"0",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]})]}),e.jsxs("div",{className:`p-6 rounded-xl border-2 ${c.is_on_sale?"border-green-500 bg-green-50 dark:bg-green-900/20":t?"border-gray-600 bg-gray-700":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-lg font-bold ${t?"text-gray-200":"text-gray-800"}`,children:"ðŸ·ï¸ Produto em PromoÃ§Ã£o"}),e.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Ative para definir preÃ§o promocional"})]}),e.jsx("button",{type:"button",onClick:()=>L({...c,is_on_sale:!c.is_on_sale}),className:`relative w-16 h-8 rounded-full transition-all cursor-pointer ${c.is_on_sale?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${c.is_on_sale?"translate-x-8":""}`})})]}),c.is_on_sale&&e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ’µ PreÃ§o Promocional *"}),e.jsx("input",{type:"number",step:"0.01",value:c.sale_price,onChange:s=>{const N=parseFloat(s.target.value),W=parseFloat(c.price),Y=W>0?Math.round((W-N)/W*100):0;L({...c,sale_price:s.target.value,discount_percentage:Y})},placeholder:"0.00",className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-green-400`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“Š Desconto (%)"}),e.jsx("input",{type:"number",value:c.discount_percentage,onChange:s=>{const N=parseInt(s.target.value)||0,Y=parseFloat(c.price)*(1-N/100);L({...c,discount_percentage:N,sale_price:Y.toFixed(2)})},placeholder:"0",className:`w-full px-3 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-green-400`})]})]}),c.price&&c.sale_price&&e.jsxs("div",{className:`p-3 rounded-lg ${t?"bg-green-900/30":"bg-green-100"}`,children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-green-300":"text-green-800"}`,children:"ðŸ“Œ PrÃ©-visualizaÃ§Ã£o:"}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("span",{className:`text-lg line-through ${t?"text-gray-400":"text-gray-500"}`,children:["â‚¬",parseFloat(c.price).toFixed(2)]}),e.jsxs("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["â‚¬",parseFloat(c.sale_price).toFixed(2)]}),e.jsxs("span",{className:"px-3 py-1 bg-green-500 text-white text-sm font-bold rounded-full",children:["-",c.discount_percentage,"% OFF"]})]}),e.jsxs("p",{className:`text-xs mt-2 ${t?"text-gray-400":"text-gray-600"}`,children:["ðŸ’° PoupanÃ§a: â‚¬",(parseFloat(c.price)-parseFloat(c.sale_price)).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“‚ Categoria *"}),e.jsxs("select",{value:c.category_id,onChange:s=>L({...c,category_id:s.target.value,subcategory_id:""}),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Selecionar categoria"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“ Subcategoria (Opcional)"}),e.jsxs("select",{value:c.subcategory_id,onChange:s=>L({...c,subcategory_id:s.target.value}),disabled:!c.category_id,className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer disabled:opacity-50`,children:[e.jsx("option",{value:"",children:"Selecionar subcategoria"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),!c.category_id&&e.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"â„¹ï¸ Selecione uma categoria primeiro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸŽ¨ Cores DisponÃ­veis"}),e.jsx("p",{className:`text-xs mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:"â„¹ï¸ Novas cores sÃ£o adicionadas automaticamente aos filtros da loja"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:H,onChange:s=>Z(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),ne()),placeholder:"Ex: Preto, Azul Marinho, Rosa Claro...",className:`flex-1 px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`}),e.jsxs("button",{onClick:ne,type:"button",className:"px-5 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap font-medium",children:[e.jsx("i",{className:"ri-add-line mr-1"})," Adicionar"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.colors.map((s,N)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30 text-pink-700 dark:text-pink-300 rounded-full text-sm font-medium",children:[s,e.jsx("button",{onClick:()=>ce(s),type:"button",className:"hover:text-pink-900 dark:hover:text-pink-100 cursor-pointer",children:e.jsx("i",{className:"ri-close-line"})})]},N)),c.colors.length===0&&e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhuma cor adicionada"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“ Tamanhos DisponÃ­veis"}),e.jsx("p",{className:`text-xs mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:"â„¹ï¸ Novos tamanhos sÃ£o adicionados automaticamente aos filtros da loja"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:Q,onChange:s=>J(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),ie()),placeholder:"Ex: XS, S, M, L, XL, 36, 38, Ãšnico...",className:`flex-1 px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`}),e.jsxs("button",{onClick:ie,type:"button",className:"px-5 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap font-medium",children:[e.jsx("i",{className:"ri-add-line mr-1"})," Adicionar"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.sizes.map((s,N)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium",children:[s,e.jsx("button",{onClick:()=>xe(s),type:"button",className:"hover:text-blue-900 dark:hover:text-blue-100 cursor-pointer",children:e.jsx("i",{className:"ri-close-line"})})]},N)),c.sizes.length===0&&e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum tamanho adicionado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“ DescriÃ§Ã£o"}),e.jsx("textarea",{value:c.description,onChange:s=>L({...c,description:s.target.value}),rows:4,placeholder:"Descreva as caracterÃ­sticas, materiais, detalhes do produto...",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ–¼ï¸ Imagens do Produto * (mÃ­nimo 1)"}),e.jsx("p",{className:`text-xs mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:"ðŸ“Œ A primeira imagem serÃ¡ a imagem principal"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:d,onChange:s=>r(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),de()),placeholder:"Cole o URL da imagem aqui...",className:`flex-1 px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`}),e.jsxs("button",{onClick:de,type:"button",className:"px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap font-medium",children:[e.jsx("i",{className:"ri-add-line mr-1"})," Adicionar"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:c.images.map((s,N)=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"relative w-full h-32 rounded-lg overflow-hidden border-2 border-gray-200 dark:border-gray-600",children:[e.jsx("img",{src:s,alt:`Imagem ${N+1}`,className:"w-full h-full object-cover"}),N===0&&e.jsx("div",{className:"absolute top-1 left-1 bg-gradient-to-r from-pink-500 to-rose-500 text-white px-2 py-1 rounded text-xs font-bold",children:"Principal"})]}),e.jsx("button",{onClick:()=>ge(s),type:"button",className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer shadow-lg hover:bg-red-600",children:e.jsx("i",{className:"ri-close-line text-lg"})})]},N))}),c.images.length===0&&e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center ${t?"border-gray-600":"border-gray-300"}`,children:[e.jsx("i",{className:`ri-image-line text-5xl mb-2 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhuma imagem adicionada"})]})]}),e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ‘ï¸ Produto Ativo"}),e.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-600"}`,children:c.is_active?"VisÃ­vel na loja":"Oculto dos clientes"})]}),e.jsx("button",{type:"button",onClick:()=>L({...c,is_active:!c.is_active}),className:`relative w-16 h-8 rounded-full transition-all cursor-pointer ${c.is_active?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${c.is_active?"translate-x-8":""}`})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[e.jsx("button",{onClick:U,disabled:o,type:"button",className:"flex-1 px-6 py-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-bold hover:shadow-2xl transition-all cursor-pointer whitespace-nowrap disabled:opacity-50 text-lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A guardar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),k?"Guardar AlteraÃ§Ãµes":"Adicionar Produto"]})}),e.jsx("button",{onClick:()=>{D(!1),O(null),M()},type:"button",disabled:o,className:`px-6 py-4 rounded-xl font-bold transition-all cursor-pointer whitespace-nowrap text-lg ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancelar"})]})]})})]})}const le=be("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd");function _e({darkMode:t=!1}){const[u,P]=l.useState([]),[g,C]=l.useState([]),[h,F]=l.useState(!0),[R,w]=l.useState(!1),[b,q]=l.useState(!1),[$,E]=l.useState(null),[p,D]=l.useState(null),[k,O]=l.useState("categories"),[z,G]=l.useState(""),[_,i]=l.useState({name:"",description:"",image_url:"",display_order:0,is_active:!0}),[m,f]=l.useState({name:"",description:"",category_id:"",image_url:"",display_order:0,is_active:!0});l.useEffect(()=>{o()},[]);const o=async()=>{F(!0);try{const[r,a]=await Promise.all([le.from("categories").select("*").order("display_order"),le.from("subcategories").select("*").order("display_order")]);r.data&&P(r.data),a.data&&C(a.data)}catch(r){console.error("Erro ao carregar dados:",r)}finally{F(!1)}},I=async()=>{if(!_.name){alert("Por favor, preencha o nome da categoria");return}try{const r=_.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),a={..._,slug:r};if($){const{error:n}=await le.from("categories").update(a).eq("id",$.id);if(n)throw n}else{const{error:n}=await le.from("categories").insert([a]);if(n)throw n}w(!1),E(null),L(),await o(),alert($?"Categoria atualizada com sucesso!":"Categoria adicionada com sucesso! Agora aparece no site.")}catch(r){console.error("Erro ao guardar categoria:",r),alert("Erro ao guardar categoria")}},j=async()=>{if(!m.name||!m.category_id){alert("Por favor, preencha o nome e selecione uma categoria");return}try{let r=m.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");if(!p){const{data:n}=await le.from("subcategories").select("slug").eq("category_id",m.category_id).like("slug",`${r}%`);if(n&&n.length>0){const U=n.map(V=>{const x=V.slug.match(new RegExp(`^${r}-(\\d+)$`));return x?parseInt(x[1]):V.slug===r?0:null}).filter(V=>V!==null),A=U.length>0?Math.max(...U)+1:1;r=`${r}-${A}`}}const a={...m,slug:r};if(p){const{error:n}=await le.from("subcategories").update(a).eq("id",p.id);if(n)throw n}else{const{error:n}=await le.from("subcategories").insert([a]);if(n)throw n}q(!1),D(null),H(),await o(),alert(p?"Subcategoria atualizada com sucesso!":"Subcategoria adicionada com sucesso! Agora aparece no site.")}catch(r){console.error("Erro ao guardar subcategoria:",r),r.code==="23505"?alert("JÃ¡ existe uma subcategoria com este nome nesta categoria. Por favor, escolha outro nome."):alert("Erro ao guardar subcategoria: "+(r.message||"Erro desconhecido"))}},S=async r=>{if(confirm("Tem certeza que deseja eliminar esta categoria? Todas as subcategorias e produtos associados tambÃ©m serÃ£o eliminados."))try{const{error:a}=await le.from("products").delete().eq("category_id",r);if(a)throw a;const{error:n}=await le.from("subcategories").delete().eq("category_id",r);if(n)throw n;const{error:U}=await le.from("categories").delete().eq("id",r);if(U)throw U;await o(),alert("Categoria e todos os produtos associados eliminados com sucesso!")}catch(a){console.error("Erro ao eliminar categoria:",a),alert("Erro ao eliminar categoria")}},c=async r=>{if(confirm("Tem certeza que deseja eliminar esta subcategoria? Todos os produtos associados tambÃ©m serÃ£o eliminados."))try{const{error:a}=await le.from("products").delete().eq("subcategory_id",r);if(a)throw a;const{error:n}=await le.from("subcategories").delete().eq("id",r);if(n)throw n;await o(),alert("Subcategoria e todos os produtos associados eliminados com sucesso!")}catch(a){console.error("Erro ao eliminar subcategoria:",a),alert("Erro ao eliminar subcategoria")}},L=()=>{i({name:"",description:"",image_url:"",display_order:0,is_active:!0})},H=()=>{f({name:"",description:"",category_id:"",image_url:"",display_order:0,is_active:!0})},Z=r=>{E(r),i({name:r.name||"",description:r.description||"",image_url:r.image_url||"",display_order:r.display_order||0,is_active:r.is_active!==!1}),w(!0)},Q=r=>{D(r),f({name:r.name||"",description:r.description||"",category_id:r.category_id||"",image_url:r.image_url||"",display_order:r.display_order||0,is_active:r.is_active!==!1}),q(!0)},J=r=>g.filter(a=>a.category_id===r).length;z&&g.filter(r=>r.category_id===z);const d=u.map(r=>({category:r,subcategories:g.filter(a=>a.category_id===r.id)}));return h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"GestÃ£o de Categorias"}),e.jsxs("p",{className:t?"text-gray-400":"text-gray-600",children:[u.length," categorias e ",g.length," subcategorias"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>O(k==="categories"?"subcategories":"categories"),className:`px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${k==="subcategories"?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white shadow-lg":"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg"}`,children:[e.jsx("i",{className:`${k==="categories"?"ri-folder-line":"ri-folder-open-line"} mr-2`}),k==="categories"?"Ver Subcategorias":"Ver Categorias"]})})]}),k==="categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("select",{value:z,onChange:r=>G(r.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Todas as Categorias"}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsxs("button",{onClick:()=>{L(),E(null),w(!0)},className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar Categoria"]})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider ${t?"text-gray-300":"text-gray-600"}`,children:"Categoria"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider ${t?"text-gray-300":"text-gray-600"}`,children:"DescriÃ§Ã£o"}),e.jsx("th",{className:`px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider ${t?"text-gray-300":"text-gray-600"}`,children:"Subcategorias"}),e.jsx("th",{className:`px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider ${t?"text-gray-300":"text-gray-600"}`,children:"Estado"}),e.jsx("th",{className:`px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider ${t?"text-gray-300":"text-gray-600"}`,children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:u.map(r=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-folder-line text-xl text-white"})}),e.jsx("div",{children:e.jsx("h3",{className:`font-semibold ${t?"text-white":"text-gray-800"}`,children:r.name})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:r.description||"â€”"})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${t?"bg-purple-900/30 text-purple-300":"bg-purple-100 text-purple-700"}`,children:[e.jsx("i",{className:"ri-folder-open-line"}),J(r.id)]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${r.is_active!==!1?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:[e.jsx("i",{className:`${r.is_active!==!1?"ri-check-line":"ri-close-line"}`}),r.is_active!==!1?"Ativa":"Inativa"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>Z(r),className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors cursor-pointer",title:"Editar",children:e.jsx("i",{className:"ri-edit-line text-lg"})}),e.jsx("button",{onClick:()=>S(r.id),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors cursor-pointer",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})})]},r.id))})]})}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-folder-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhuma categoria encontrada"})]})]})]}),k==="subcategories"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("select",{value:z,onChange:r=>G(r.target.value),className:`px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-purple-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Todas as Categorias"}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})}),e.jsx("div",{className:"space-y-8",children:d.map(({category:r,subcategories:a})=>e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-folder-line text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-800"}`,children:r.name}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[a.length," subcategorias"]})]})]}),e.jsxs("button",{onClick:()=>{H(),f({...m,category_id:r.id}),D(null),q(!0)},className:"px-4 py-2 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar Subcategoria"]})]}),a.length===0?e.jsx("p",{className:`text-center py-8 ${t?"text-gray-500":"text-gray-400"}`,children:"Nenhuma subcategoria nesta categoria"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(n=>e.jsxs("div",{className:`${t?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} rounded-xl border p-4 hover:shadow-md transition-shadow`,children:[n.image_url&&e.jsx("div",{className:"relative w-full h-32 mb-3 rounded-lg overflow-hidden bg-gradient-to-br from-pink-100 to-blue-100 dark:from-gray-600 dark:to-gray-500",children:e.jsx("img",{src:n.image_url,alt:n.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:`font-semibold text-sm ${t?"text-white":"text-gray-800"}`,children:n.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.is_active!==!1?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:n.is_active!==!1?"Ativa":"Inativa"})]}),n.description&&e.jsx("p",{className:`text-xs mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:n.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Q(n),className:"flex-1 px-3 py-1.5 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Editar"]}),e.jsx("button",{onClick:()=>c(n.id),className:"px-3 py-1.5 bg-red-500 text-white rounded-lg text-xs hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},n.id))})]},r.id))})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-2xl w-full`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:$?"Editar Categoria":"Adicionar Categoria"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Nome da Categoria *"}),e.jsx("input",{type:"text",value:_.name,onChange:r=>i({..._,name:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"DescriÃ§Ã£o"}),e.jsx("textarea",{value:_.description,onChange:r=>i({..._,description:r.target.value}),rows:3,className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.is_active,onChange:r=>i({..._,is_active:r.target.checked}),className:"w-5 h-5 text-pink-500 rounded focus:ring-2 focus:ring-pink-400 cursor-pointer"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"Categoria Ativa"})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[e.jsxs("button",{onClick:I,className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line mr-2"}),$?"Guardar AlteraÃ§Ãµes":"Adicionar Categoria"]}),e.jsx("button",{onClick:()=>{w(!1),E(null),L()},className:`px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancelar"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-2xl w-full`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:p?"Editar Subcategoria":"Adicionar Subcategoria"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Categoria *"}),e.jsxs("select",{value:m.category_id,onChange:r=>f({...m,category_id:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Selecionar categoria"}),u.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Nome da Subcategoria *"}),e.jsx("input",{type:"text",value:m.name,onChange:r=>f({...m,name:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"DescriÃ§Ã£o"}),e.jsx("textarea",{value:m.description,onChange:r=>f({...m,description:r.target.value}),rows:3,className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"URL da Imagem"}),e.jsx("input",{type:"text",value:m.image_url,onChange:r=>f({...m,image_url:r.target.value}),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:r=>f({...m,is_active:r.target.checked}),className:"w-5 h-5 text-pink-500 rounded focus:ring-2 focus:ring-pink-400 cursor-pointer"}),e.jsx("span",{className:t?"text-gray-300":"text-gray-700",children:"Subcategoria Ativa"})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[e.jsxs("button",{onClick:j,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line mr-2"}),p?"Guardar AlteraÃ§Ãµes":"Adicionar Subcategoria"]}),e.jsx("button",{onClick:()=>{q(!1),D(null),H()},className:`px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancelar"})]})]})})]})}function Ce({darkMode:t}){const[u,P]=l.useState([]),[g,C]=l.useState(!0),[h,F]=l.useState(null),[R,w]=l.useState(!1),[b,q]=l.useState(""),[$,E]=l.useState(""),[p,D]=l.useState(""),[k,O]=l.useState(""),[z,G]=l.useState(""),[_,i]=l.useState(!1),[m,f]=l.useState(!1);l.useEffect(()=>{o()},[]);const o=async()=>{C(!0);try{const{data:r,error:a}=await T.from("orders").select(`
          *,
          customers (
            email,
            full_name,
            phone
          ),
          order_items (
            id,
            product_id,
            product_name,
            quantity,
            price,
            product_image
          )
        `).order("created_at",{ascending:!1});if(a)throw a;r&&P(r)}catch(r){console.error("Erro ao carregar encomendas:",r)}finally{C(!1)}},I=async()=>{f(!0);try{let r;const{data:a}=await T.from("customers").select("id").eq("email","teste@marisol.lu").maybeSingle();if(a)r=a.id;else{const{data:v,error:B}=await T.from("customers").insert({name:"Cliente de Teste",email:"teste@marisol.lu",full_name:"Cliente de Teste",phone:"+352 691 123 456",role:"customer"}).select().single();if(B)throw B;r=v.id}const{data:n,error:U}=await T.from("products").select("id, name, price, images").eq("is_active",!0).limit(5);if(U)throw U;const A=n&&n.length>=3?[{id:n[0].id,name:n[0].name,image:n[0].images?.[0]||"https://readdy.ai/api/search-image?query=elegant%20evening%20dress%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test1&orientation=squarish",price:n[0].price||45},{id:n[1].id,name:n[1].name,image:n[1].images?.[0]||"https://readdy.ai/api/search-image?query=luxury%20leather%20handbag%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test2&orientation=squarish",price:n[1].price||65},{id:n[2].id,name:n[2].name,image:n[2].images?.[0]||"https://readdy.ai/api/search-image?query=elegant%20high%20heels%20shoes%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test3&orientation=squarish",price:n[2].price||55}]:[{id:null,name:"Vestido Elegante de Teste",image:"https://readdy.ai/api/search-image?query=elegant%20evening%20dress%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test1&orientation=squarish",price:45},{id:null,name:"Bolsa de Couro de Teste",image:"https://readdy.ai/api/search-image?query=luxury%20leather%20handbag%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test2&orientation=squarish",price:65},{id:null,name:"Sapatos de Salto de Teste",image:"https://readdy.ai/api/search-image?query=elegant%20high%20heels%20shoes%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test3&orientation=squarish",price:55}],V=[{status:"pending",payment_status:"pending",label:"Encomenda Pendente (Aguarda Pagamento)",products:[A[0],A[1]],subtotal:A[0].price+A[1].price,shipping_cost:5},{status:"processing",payment_status:"paid",label:"Encomenda Em Processo (Paga, A Preparar)",products:[A[0],A[2]],subtotal:A[0].price+A[2].price,shipping_cost:5},{status:"shipped",payment_status:"paid",label:"Encomenda Enviada",products:[A[1],A[2]],subtotal:A[1].price+A[2].price,shipping_cost:5,tracking:{carrier:"Post Luxembourg",number:"LU123456789TEST",url:"https://www.post.lu/en/track-trace"}},{status:"completed",payment_status:"paid",label:"Encomenda ConcluÃ­da",products:[A[0],A[1],A[2]],subtotal:A[0].price+A[1].price+A[2].price,shipping_cost:0},{status:"cancelled",payment_status:"refunded",label:"Encomenda Cancelada",products:[A[0]],subtotal:A[0].price,shipping_cost:5}],x=[];for(const v of V){const B=v.subtotal+v.shipping_cost,X=B*.17,ee=`ORD-${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`,{data:M,error:ae}=await T.from("orders").insert({order_number:ee,customer_id:r,subtotal:v.subtotal,total:B,tax_amount:X,tax_rate:.17,shipping_cost:v.shipping_cost,status:v.status,payment_status:v.payment_status,payment_method:"card",shipping_method:v.shipping_cost===0?"free":"standard",shipping_address:{name:"Cliente de Teste",street:"Rua de Teste, 123",city:"Luxembourg",postal_code:"L-1234",country:"LU",phone:"+352 691 123 456"},notes:`ENCOMENDA DE TESTE - ${v.label}${v.tracking?.carrier?` - Transportadora: ${v.tracking.carrier}`:""}`,tracking_number:v.tracking?.number||null,is_test:!0}).select().single();if(ae)throw ae;const ne=v.products.map(ie=>({order_id:M.id,product_id:ie.id,product_name:ie.name,product_image:ie.image,quantity:1,price:ie.price})),{error:ce}=await T.from("order_items").insert(ne);if(ce)throw ce;x.push(v.label)}alert(`âœ… ${x.length} encomendas de teste criadas com sucesso!

${x.join(`
`)}`),i(!1),await o()}catch(r){console.error("Erro ao criar encomendas de teste:",r),alert(`âŒ Erro ao criar encomendas de teste: ${r instanceof Error?r.message:"Erro desconhecido"}`)}finally{f(!1)}},j=async()=>{if(confirm("âš ï¸ Tem certeza que deseja eliminar TODAS as encomendas de teste?"))try{const{data:r}=await T.from("orders").select("id").eq("is_test",!0);if(!r||r.length===0){alert("â„¹ï¸ Nenhuma encomenda de teste encontrada.");return}const a=r.map(A=>A.id),{error:n}=await T.from("order_items").delete().in("order_id",a);if(n)throw n;const{error:U}=await T.from("orders").delete().in("id",a);if(U)throw U;alert(`âœ… ${r.length} encomendas de teste eliminadas com sucesso!`),await o()}catch(r){console.error("Erro ao eliminar encomendas de teste:",r),alert("âŒ Erro ao eliminar encomendas de teste")}},S=async(r,a)=>{try{const{error:n}=await T.from("orders").update({status:a,updated_at:new Date().toISOString()}).eq("id",r);if(n)throw n;await o(),alert("âœ… Estado atualizado com sucesso!")}catch(n){console.error("Erro ao atualizar estado:",n),alert("âŒ Erro ao atualizar estado da encomenda")}},c=async()=>{if(h)try{const{error:r}=await T.from("orders").update({tracking_number:p,notes:z,updated_at:new Date().toISOString()}).eq("id",h.id);if(r)throw r;F({...h,tracking_number:p,notes:z}),await o(),alert("âœ… InformaÃ§Ãµes atualizadas com sucesso!")}catch(r){console.error("Erro ao atualizar rastreamento:",r),alert("âŒ Erro ao atualizar informaÃ§Ãµes")}},L=r=>{F(r),D(r.tracking_number||""),O(r.tracking_url||""),G(r.notes||""),w(!0)},H=u.filter(r=>{const a=!b||r.status===b,n=!$||r.customers?.email?.toLowerCase().includes($.toLowerCase())||r.customers?.full_name?.toLowerCase().includes($.toLowerCase())||r.id?.toLowerCase().includes($.toLowerCase());return a&&n}),Z=r=>{switch(r){case"completed":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300";case"processing":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";case"shipped":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300";case"cancelled":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300";case"refunded":return"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"}},Q=r=>{switch(r){case"completed":return"âœ“ ConcluÃ­da";case"processing":return"â³ Em Processo";case"shipped":return"ðŸ“¦ Enviada";case"cancelled":return"âœ— Cancelada";case"refunded":return"â†© Reembolsada";default:return"â¸ Pendente"}},J=r=>{switch(r){case"paid":return"âœ“ Pago";case"pending":return"â³ Pendente";case"refunded":return"â†© Reembolsado";case"failed":return"âœ— Falhado";default:return"â¸ Pendente"}},d={total:u.length,pending:u.filter(r=>r.status==="pending").length,processing:u.filter(r=>r.status==="processing").length,shipped:u.filter(r=>r.status==="shipped").length,completed:u.filter(r=>r.status==="completed").length,cancelled:u.filter(r=>r.status==="cancelled").length,testOrders:u.filter(r=>r.is_test).length};return g?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"ðŸ“¦ GestÃ£o de Encomendas"}),e.jsxs("p",{className:t?"text-gray-400":"text-gray-600",children:[u.length," encomendas no total",d.testOrders>0&&e.jsxs("span",{className:"ml-2 text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:[d.testOrders," de teste"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-1"}),"Criar Encomendas de Teste"]}),d.testOrders>0&&e.jsxs("button",{onClick:j,className:"px-4 py-2 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Eliminar Encomendas de Teste"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[{label:"Pendentes",status:"pending",count:d.pending,color:"yellow",icon:"ri-time-line"},{label:"Em Processo",status:"processing",count:d.processing,color:"blue",icon:"ri-loader-line"},{label:"Enviadas",status:"shipped",count:d.shipped,color:"purple",icon:"ri-truck-line"},{label:"ConcluÃ­das",status:"completed",count:d.completed,color:"green",icon:"ri-check-line"},{label:"Canceladas",status:"cancelled",count:d.cancelled,color:"red",icon:"ri-close-line"}].map(r=>e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-xl p-4 shadow-sm border`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("i",{className:`${r.icon} text-2xl text-${r.color}-500`}),e.jsx("span",{className:`text-2xl font-bold text-${r.color}-500`,children:r.count})]}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:r.label})]},r.status))}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ” Pesquisar"}),e.jsx("input",{type:"text",value:$,onChange:r=>E(r.target.value),placeholder:"Email, nome ou ID da encomenda...",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“Š Estado"}),e.jsxs("select",{value:b,onChange:r=>q(r.target.value),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"",children:"Todos os estados"}),e.jsx("option",{value:"pending",children:"Pendente"}),e.jsx("option",{value:"processing",children:"Em Processo"}),e.jsx("option",{value:"shipped",children:"Enviada"}),e.jsx("option",{value:"completed",children:"ConcluÃ­da"}),e.jsx("option",{value:"cancelled",children:"Cancelada"}),e.jsx("option",{value:"refunded",children:"Reembolsada"})]})]})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden`,children:H.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("i",{className:`ri-shopping-bag-line text-6xl mb-4 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhuma encomenda encontrada"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-gray-700":"bg-gray-50"} border-b ${t?"border-gray-600":"border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"ID"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Cliente"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Produtos"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Total"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Estado"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Pagamento"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Data"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:H.map(r=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-white":"text-gray-800"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["#",r.id.substring(0,8).toUpperCase()]}),r.is_test&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium",children:"TESTE"})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.customers?.full_name||"N/A"}),e.jsx("p",{className:"text-xs",children:r.customers?.email||"N/A"})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-shopping-cart-line text-pink-500"}),e.jsxs("span",{children:[r.order_items?.length||0," produtos"]})]})}),e.jsxs("td",{className:`px-6 py-4 text-sm font-semibold ${t?"text-white":"text-gray-800"}`,children:["â‚¬",r.total?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${Z(r.status)}`,children:Q(r.status)})}),e.jsx("td",{className:`px-6 py-4 text-xs ${t?"text-gray-400":"text-gray-600"}`,children:J(r.payment_status)}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:new Date(r.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>L(r),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg text-sm hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"Ver Detalhes"]})})]},r.id))})]})})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-2xl w-full`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-800"}`,children:"ðŸ§ª Criar Encomendas de Teste"}),e.jsxs("div",{className:`p-4 rounded-lg mb-6 ${t?"bg-blue-900/20 border border-blue-700/30":"bg-blue-50 border border-blue-200"}`,children:[e.jsxs("p",{className:`text-sm ${t?"text-blue-300":"text-blue-800"} mb-2`,children:[e.jsx("i",{className:"ri-information-line mr-2"}),e.jsx("strong",{children:"Objetivo:"})," Validar que todos os estados funcionam corretamente"]}),e.jsx("p",{className:`text-xs ${t?"text-blue-300/70":"text-blue-700"}`,children:"SerÃ£o criadas 5 encomendas de teste com diferentes estados para validaÃ§Ã£o do sistema."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:"1. Encomenda Pendente"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:"â¸ Aguarda Pagamento"})]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"2 produtos â€¢ â‚¬110.00 + â‚¬5.00 envio"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:"2. Encomenda Em Processo"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:"â³ Paga, A Preparar"})]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"2 produtos â€¢ â‚¬100.00 + â‚¬5.00 envio"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:"3. Encomenda Enviada"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:"ðŸ“¦ Com Rastreamento"})]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"2 produtos â€¢ â‚¬120.00 + â‚¬5.00 envio â€¢ Post Luxembourg"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:"4. Encomenda ConcluÃ­da"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"âœ“ Finalizada"})]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"3 produtos â€¢ â‚¬165.00 + envio grÃ¡tis"})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:"5. Encomenda Cancelada"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"âœ— Reembolsada"})]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"1 produto â€¢ â‚¬45.00 + â‚¬5.00 envio"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancelar"}),e.jsx("button",{onClick:I,disabled:m,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer disabled:opacity-50",children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A Criar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-checkbox-circle-line mr-2"}),"Criar 5 Encomendas de Teste"]})})]})]})}),R&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-5xl w-full my-8 max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:["Encomenda #",h.id.substring(0,8).toUpperCase()]}),h.is_test&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:"ðŸ§ª ENCOMENDA DE TESTE"})]}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[h.order_items?.length||0," produtos â€¢ Criada em ",new Date(h.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsx("button",{onClick:()=>w(!1),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-user-line mr-2 text-pink-500"}),"ðŸ‘¤ InformaÃ§Ãµes do Cliente"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Nome Completo"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.customers?.full_name||h.shipping_address?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Email"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.customers?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Telefone"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.customers?.phone||h.shipping_address?.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Tipo de Cliente"}),e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:h.customers?"Cliente Registado":"Compra como Convidado"})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-map-pin-line mr-2 text-pink-500"}),"ðŸ  EndereÃ§o de Envio"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"DestinatÃ¡rio"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.shipping_address?.name||h.customers?.full_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Rua e NÃºmero"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-700"}`,children:h.shipping_address?.street||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"CÃ³digo Postal e Cidade"}),e.jsxs("p",{className:`${t?"text-gray-300":"text-gray-700"}`,children:[h.shipping_address?.postal_code," ",h.shipping_address?.city]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"PaÃ­s"}),e.jsx("p",{className:`${t?"text-gray-300":"text-gray-700"}`,children:h.shipping_address?.country||"LU"})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl mb-6 ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line mr-2 text-pink-500"}),"ðŸ“¦ Produtos da Encomenda (",h.order_items?.length||0,")"]}),h.order_items&&h.order_items.length>0?e.jsx("div",{className:"space-y-3",children:h.order_items.map(r=>e.jsxs("div",{className:`p-4 rounded-lg flex items-center gap-4 ${t?"bg-gray-600":"bg-white border border-gray-200"}`,children:[r.product_image&&e.jsx("img",{src:r.product_image,alt:r.product_name,className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium mb-1 ${t?"text-white":"text-gray-800"}`,children:r.product_name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:["Quantidade: ",e.jsx("strong",{children:r.quantity})]}),e.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:["PreÃ§o unitÃ¡rio: ",e.jsxs("strong",{children:["â‚¬",r.price?.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-pink-500",children:["â‚¬",(r.quantity*r.price).toFixed(2)]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"Subtotal"})]})]},r.id))}):e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Nenhum produto encontrado"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-truck-line mr-2 text-pink-500"}),"ðŸšš Estado & Envio"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Estado Atual"}),e.jsx("span",{className:`inline-flex px-4 py-2 rounded-full text-sm font-medium ${Z(h.status)}`,children:Q(h.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"Alterar Estado"}),e.jsxs("select",{value:h.status,onChange:r=>{S(h.id,r.target.value),F({...h,status:r.target.value})},className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} cursor-pointer focus:ring-2 focus:ring-pink-400`,children:[e.jsx("option",{value:"pending",children:"â¸ Pendente"}),e.jsx("option",{value:"processing",children:"â³ Em Processo"}),e.jsx("option",{value:"shipped",children:"ðŸ“¦ Enviada"}),e.jsx("option",{value:"completed",children:"âœ“ ConcluÃ­da"}),e.jsx("option",{value:"cancelled",children:"âœ— Cancelada"}),e.jsx("option",{value:"refunded",children:"â†© Reembolsada"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"MÃ©todo de Envio"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.shipping_method==="free"?"ðŸŽ Envio GrÃ¡tis":h.shipping_method==="express"?"âš¡ Envio Expresso":"ðŸ“¦ Envio Standard"})]}),h.updated_at&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Ãšltima AtualizaÃ§Ã£o"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:new Date(h.updated_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-money-euro-circle-line mr-2 text-pink-500"}),"ðŸ’° Resumo Financeiro"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"MÃ©todo de Pagamento"}),e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.payment_method==="card"?"ðŸ’³ CartÃ£o":h.payment_method==="paypal"?"PayPal":"Outro"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Estado do Pagamento"}),e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:J(h.payment_status)})]}),e.jsxs("div",{className:`pt-3 border-t ${t?"border-gray-600":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:["â‚¬",(h.subtotal||0).toFixed(2)]})]}),h.tax_amount>0&&e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"IVA (17%)"}),e.jsxs("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:["â‚¬",h.tax_amount?.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:t?"text-gray-400":"text-gray-600",children:"Envio"}),e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:h.shipping_cost===0?"GrÃ¡tis":`â‚¬${h.shipping_cost?.toFixed(2)}`})]})]}),e.jsxs("div",{className:`flex justify-between pt-3 border-t ${t?"border-gray-600":"border-gray-200"}`,children:[e.jsx("span",{className:`font-semibold text-lg ${t?"text-white":"text-gray-800"}`,children:"Total Pago"}),e.jsxs("span",{className:"font-bold text-2xl text-green-500",children:["â‚¬",h.total?.toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:`p-6 rounded-xl mb-6 ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-map-pin-time-line mr-2 text-pink-500"}),"ðŸ“ InformaÃ§Ãµes de Rastreamento"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:`block text-xs font-medium mb-2 ${t?"text-gray-400":"text-gray-600"}`,children:"NÃºmero de Rastreamento"}),e.jsx("input",{type:"text",value:p,onChange:r=>D(r.target.value),placeholder:"Ex: LU123456789",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400`})]})}),e.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:`text-sm font-medium mb-2 ${t?"text-blue-300":"text-blue-800"}`,children:[e.jsx("i",{className:"ri-information-line mr-2"}),"Links de Rastreamento Ãšteis:"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("a",{href:"https://www.post.lu/en/track-trace",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"Post Luxembourg"]}),e.jsxs("a",{href:"https://www.dhl.com/lu-en/home/tracking.html",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-yellow-500 text-white rounded-lg text-xs hover:bg-yellow-600 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"DHL"]}),e.jsxs("a",{href:"https://www.ups.com/track",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-amber-600 text-white rounded-lg text-xs hover:bg-amber-700 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"UPS"]}),e.jsxs("a",{href:"https://www.fedex.com/en-lu/tracking.html",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-purple-500 text-white rounded-lg text-xs hover:bg-purple-600 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"FedEx"]})]})]}),h.tracking_number&&e.jsxs("div",{className:"mb-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:`text-sm font-medium mb-2 ${t?"text-green-300":"text-green-800"}`,children:[e.jsx("i",{className:"ri-check-line mr-2"}),"InformaÃ§Ãµes de Rastreamento Atuais:"]}),e.jsx("div",{className:"space-y-1 text-sm",children:e.jsxs("p",{className:t?"text-gray-300":"text-gray-700",children:[e.jsx("strong",{children:"NÃºmero:"})," ",h.tracking_number]})})]}),e.jsxs("button",{onClick:c,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Guardar InformaÃ§Ãµes de Rastreamento"]})]}),e.jsxs("div",{className:`p-6 rounded-xl mb-6 ${t?"bg-yellow-900/20 border border-yellow-700/30":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center ${t?"text-yellow-300":"text-yellow-800"}`,children:[e.jsx("i",{className:"ri-sticky-note-line mr-2 text-yellow-500"}),"ðŸ“ Notas Internas da Encomenda"]}),e.jsx("p",{className:`text-xs mb-3 ${t?"text-yellow-300/70":"text-yellow-700"}`,children:"Campo privado para notas administrativas sobre esta encomenda."}),e.jsx("textarea",{value:z,onChange:r=>G(r.target.value),rows:3,placeholder:"Ex: Cliente pediu entrega rÃ¡pida, Houve atraso, Problema resolvido...",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-yellow-400`}),h.notes&&e.jsxs("div",{className:"mt-3 p-3 rounded-lg bg-white/50 dark:bg-gray-700/50",children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"Nota Atual:"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:h.notes})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>w(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Fechar"]})})]})})]})}const se=be("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd");function Se({darkMode:t}){const[u,P]=l.useState([]),[g,C]=l.useState(!0),[h,F]=l.useState(""),[R,w]=l.useState("all"),[b,q]=l.useState(null),[$,E]=l.useState(!1),[p,D]=l.useState(""),[k,O]=l.useState(!1),[z,G]=l.useState(new Set),[_,i]=l.useState(new Set),[m,f]=l.useState(!1),[o,I]=l.useState(!1);l.useEffect(()=>{j()},[]);const j=async()=>{C(!0);try{const{data:a,error:n}=await se.from("customers").select(`
          id,
          email,
          full_name,
          phone,
          role,
          created_at,
          notes
        `).order("created_at",{ascending:!1});if(n)throw n;if(a){const U=await Promise.all(a.map(async A=>{const{data:V}=await se.from("orders").select("id, total_amount, created_at").eq("customer_id",A.id),{data:x}=await se.from("newsletter_subscribers").select("id").eq("email",A.email).maybeSingle(),v=V?.reduce((M,ae)=>M+(ae.total_amount||0),0)||0,B=V?.length||0,X=V?.[0]?.created_at;let ee="new";return B===0?ee="new":B>=1&&B<3?ee="recurring":(B>=3||v>=300)&&(ee="vip"),{...A,orderCount:B,totalSpent:v,lastPurchase:X,customerType:ee,isNewsletterSubscribed:!!x}}));P(U)}}catch(a){console.error("Erro ao carregar clientes:",a),alert("Erro ao carregar clientes. Por favor, verifique as permissÃµes no Supabase.")}finally{C(!1)}},S=async a=>{try{const{data:n}=await se.from("orders").select(`
          *,
          order_items (
            id,
            product_id,
            product_name,
            quantity,
            price,
            product_image
          )
        `).eq("customer_id",a.id).order("created_at",{ascending:!1}),{data:U}=await se.from("favorites").select(`
          id,
          product_id,
          created_at,
          products (
            id,
            name_pt,
            price,
            images
          )
        `).eq("user_id",a.id),{data:A}=await se.from("addresses").select("*").eq("user_id",a.id),{data:V}=await se.from("newsletter_subscribers").select("*").eq("email",a.email).maybeSingle();q({...a,orders:n||[],favorites:U||[],addresses:A||[],newsletterInfo:V}),D(a.notes||""),E(!0)}catch(n){console.error("Erro ao carregar detalhes:",n),alert("Erro ao carregar detalhes do cliente")}},c=async()=>{if(b){O(!0);try{const{error:a}=await se.from("customers").update({notes:p}).eq("id",b.id);if(a)throw a;alert("âœ… Notas guardadas com sucesso!"),j()}catch(a){console.error("Erro ao guardar notas:",a),alert("âŒ Erro ao guardar notas")}finally{O(!1)}}},L=a=>{const n=new Set(z);n.has(a)?n.delete(a):n.add(a),G(n)},H=()=>{if(_.size===d.length&&d.length>0)i(new Set);else{const a=new Set(d.map(n=>n.id));i(a)}},Z=a=>{const n=new Set(_);n.has(a)?n.delete(a):n.add(a),i(n)},Q=async()=>{I(!0);try{const a=Array.from(_);for(const n of a){const U=u.find(V=>V.id===n);if(!U)continue;await se.from("addresses").delete().eq("user_id",n),await se.from("favorites").delete().eq("user_id",n),await se.from("cart_items").delete().eq("user_id",n);const{data:A}=await se.from("orders").select("id").eq("customer_id",n);if(A&&A.length>0){const V=A.map(x=>x.id);await se.from("order_items").delete().in("order_id",V),await se.from("orders").delete().eq("customer_id",n)}await se.from("newsletter_subscribers").delete().eq("email",U.email),await se.from("customers").delete().eq("id",n)}alert(`âœ… ${a.length} cliente(s) eliminado(s) com sucesso!`),f(!1),i(new Set),j()}catch(a){console.error("Erro ao eliminar clientes:",a),alert("âŒ Erro ao eliminar clientes. Verifique as permissÃµes no Supabase.")}finally{I(!1)}},J=a=>{const n={new:{text:"Novo Cliente",color:"bg-blue-100 text-blue-700"},recurring:{text:"Cliente Recorrente",color:"bg-green-100 text-green-700"},vip:{text:"Cliente VIP",color:"bg-gradient-to-r from-yellow-400 to-amber-500 text-white"}},U=n[a]||n.new;return e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${U.color}`,children:U.text})},d=u.filter(a=>{const n=!h||a.full_name?.toLowerCase().includes(h.toLowerCase())||a.email?.toLowerCase().includes(h.toLowerCase()),U=R==="all"||a.customerType===R;return n&&U}),r={total:u.length,new:u.filter(a=>a.customerType==="new").length,recurring:u.filter(a=>a.customerType==="recurring").length,vip:u.filter(a=>a.customerType==="vip").length,newsletter:u.filter(a=>a.isNewsletterSubscribed).length};return g?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"ðŸ‘¥ GestÃ£o de Clientes"}),e.jsxs("p",{className:t?"text-gray-400":"text-gray-600",children:[u.length," clientes registados"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:`${t?"bg-gradient-to-br from-blue-900/40 to-blue-800/40 border-blue-700/30":"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200"} rounded-2xl p-6 border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-user-line text-2xl text-white"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:r.total}),e.jsx("p",{className:`text-sm ${t?"text-blue-300":"text-blue-700"}`,children:"Total de Clientes"})]}),e.jsxs("div",{className:`${t?"bg-gradient-to-br from-cyan-900/40 to-cyan-800/40 border-cyan-700/30":"bg-gradient-to-br from-cyan-50 to-cyan-100 border-cyan-200"} rounded-2xl p-6 border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-12 h-12 bg-cyan-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-user-add-line text-2xl text-white"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:r.new}),e.jsx("p",{className:`text-sm ${t?"text-cyan-300":"text-cyan-700"}`,children:"Novos Clientes"})]}),e.jsxs("div",{className:`${t?"bg-gradient-to-br from-green-900/40 to-green-800/40 border-green-700/30":"bg-gradient-to-br from-green-50 to-green-100 border-green-200"} rounded-2xl p-6 border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-repeat-line text-2xl text-white"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:r.recurring}),e.jsx("p",{className:`text-sm ${t?"text-green-300":"text-green-700"}`,children:"Recorrentes"})]}),e.jsxs("div",{className:`${t?"bg-gradient-to-br from-yellow-900/40 to-amber-800/40 border-yellow-700/30":"bg-gradient-to-br from-yellow-50 to-amber-100 border-yellow-200"} rounded-2xl p-6 border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-vip-crown-line text-2xl text-white"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:r.vip}),e.jsx("p",{className:`text-sm ${t?"text-yellow-300":"text-yellow-700"}`,children:"Clientes VIP"})]}),e.jsxs("div",{className:`${t?"bg-gradient-to-br from-purple-900/40 to-purple-800/40 border-purple-700/30":"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200"} rounded-2xl p-6 border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-mail-line text-2xl text-white"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:r.newsletter}),e.jsx("p",{className:`text-sm ${t?"text-purple-300":"text-purple-700"}`,children:"Newsletter"})]})]}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border mb-6`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ” Pesquisar Cliente"}),e.jsx("input",{type:"text",value:h,onChange:a=>F(a.target.value),placeholder:"Nome ou email...",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"ðŸ“Š Filtrar por Tipo"}),e.jsxs("select",{value:R,onChange:a=>w(a.target.value),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`,children:[e.jsx("option",{value:"all",children:"Todos os Clientes"}),e.jsx("option",{value:"new",children:"Novos Clientes"}),e.jsx("option",{value:"recurring",children:"Clientes Recorrentes"}),e.jsx("option",{value:"vip",children:"Clientes VIP"})]})]})]})}),_.size>0&&e.jsx("div",{className:`${t?"bg-pink-900/30 border-pink-700/50":"bg-pink-50 border-pink-200"} rounded-2xl p-4 mb-6 border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-multiple-line text-xl text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:`text-sm font-bold ${t?"text-white":"text-gray-800"}`,children:[_.size," cliente(s) selecionado(s)"]}),e.jsx("p",{className:`text-xs ${t?"text-pink-300":"text-pink-700"}`,children:"Escolha uma aÃ§Ã£o para aplicar aos clientes selecionados"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>i(new Set),className:`px-4 py-2 rounded-lg border-2 ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-100"} transition-colors cursor-pointer whitespace-nowrap font-medium`,children:[e.jsx("i",{className:"ri-close-line mr-1"}),"Cancelar"]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-lg font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Eliminar Selecionados"]})]})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden`,children:d.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("i",{className:`ri-user-line text-6xl mb-4 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum cliente encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-gray-700":"bg-gray-50"} border-b ${t?"border-gray-600":"border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left ${t?"text-gray-300":"text-gray-600"}`,children:e.jsx("input",{type:"checkbox",checked:_.size===d.length&&d.length>0,onChange:H,className:"w-5 h-5 text-pink-500 border-gray-300 rounded focus:ring-pink-400 cursor-pointer"})}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Cliente"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Email"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Encomendas"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Total Gasto"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Tipo"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Ãšltima Compra"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:d.map(a=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:_.has(a.id),onChange:()=>Z(a.id),className:"w-5 h-5 text-pink-500 border-gray-300 rounded focus:ring-pink-400 cursor-pointer"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-bold",children:a.full_name?.charAt(0).toUpperCase()||a.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-800"}`,children:a.full_name||"N/A"}),a.isNewsletterSubscribed&&e.jsxs("span",{className:"text-xs text-purple-500",children:[e.jsx("i",{className:"ri-mail-check-line mr-1"}),"Newsletter"]})]})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:a.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold ${t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:a.orderCount})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"text-lg font-bold text-green-500",children:["â‚¬",a.totalSpent.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:J(a.customerType)}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:a.lastPurchase?new Date(a.lastPurchase).toLocaleDateString("pt-PT"):"Nunca"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>S(a),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-1"}),"Ver Detalhes"]})})]},a.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-md w-full`,children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-rose-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-error-warning-line text-4xl text-white"})}),e.jsx("h2",{className:`text-2xl font-bold text-center mb-4 ${t?"text-white":"text-gray-800"}`,children:"âš ï¸ Confirmar EliminaÃ§Ã£o"}),e.jsxs("p",{className:`text-center mb-6 ${t?"text-gray-300":"text-gray-600"}`,children:["Tem a certeza que deseja eliminar ",e.jsxs("strong",{className:"text-red-500",children:[_.size," cliente(s)"]}),"?"]}),e.jsxs("div",{className:`p-4 rounded-lg mb-6 ${t?"bg-red-900/30 border border-red-700/50":"bg-red-50 border border-red-200"}`,children:[e.jsxs("p",{className:`text-sm ${t?"text-red-300":"text-red-700"}`,children:[e.jsx("strong",{children:"âš ï¸ AtenÃ§Ã£o:"})," Esta aÃ§Ã£o Ã© irreversÃ­vel e irÃ¡ eliminar:"]}),e.jsxs("ul",{className:`text-sm mt-2 space-y-1 ml-4 ${t?"text-red-300":"text-red-700"}`,children:[e.jsx("li",{children:"â€¢ Dados pessoais dos clientes"}),e.jsx("li",{children:"â€¢ HistÃ³rico de encomendas"}),e.jsx("li",{children:"â€¢ EndereÃ§os guardados"}),e.jsx("li",{children:"â€¢ Produtos favoritos"}),e.jsx("li",{children:"â€¢ InscriÃ§Ãµes na newsletter"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>f(!1),disabled:o,className:`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"} disabled:opacity-50`,children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Cancelar"]}),e.jsx("button",{onClick:Q,disabled:o,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A Eliminar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Eliminar"]})})]})]})}),$&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 max-w-5xl w-full my-8`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white text-2xl font-bold",children:b.full_name?.charAt(0).toUpperCase()||b.email.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:b.full_name||"N/A"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:b.email})]})]}),e.jsx("button",{onClick:()=>E(!1),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-user-line text-xl text-pink-500"}),"InformaÃ§Ãµes Pessoais"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Nome Completo"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.full_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Email"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Telefone"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Data de Registo"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:new Date(b.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Estado da Conta"}),e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:"âœ“ Ativa"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Tipo de Cliente"}),J(b.customerType)]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl text-center ${t?"bg-pink-900/30 border border-pink-700/30":"bg-pink-50 border border-pink-200"}`,children:[e.jsx("p",{className:"text-3xl font-bold text-pink-500 mb-1",children:b.orders?.length||0}),e.jsx("p",{className:`text-sm ${t?"text-pink-300":"text-pink-700"}`,children:"Encomendas"})]}),e.jsxs("div",{className:`p-4 rounded-xl text-center ${t?"bg-green-900/30 border border-green-700/30":"bg-green-50 border border-green-200"}`,children:[e.jsxs("p",{className:"text-3xl font-bold text-green-500 mb-1",children:["â‚¬",b.orders?.reduce((a,n)=>a+(n.total_amount||0),0).toFixed(2)||"0.00"]}),e.jsx("p",{className:`text-sm ${t?"text-green-300":"text-green-700"}`,children:"Total Gasto"})]}),e.jsxs("div",{className:`p-4 rounded-xl text-center ${t?"bg-purple-900/30 border border-purple-700/30":"bg-purple-50 border border-purple-200"}`,children:[e.jsx("p",{className:"text-3xl font-bold text-purple-500 mb-1",children:b.favorites?.length||0}),e.jsx("p",{className:`text-sm ${t?"text-purple-300":"text-purple-700"}`,children:"Favoritos"})]}),e.jsxs("div",{className:`p-4 rounded-xl text-center ${t?"bg-blue-900/30 border border-blue-700/30":"bg-blue-50 border border-blue-200"}`,children:[e.jsxs("p",{className:"text-3xl font-bold text-blue-500 mb-1",children:["â‚¬",b.orders?.length>0?(b.orders.reduce((a,n)=>a+(n.total_amount||0),0)/b.orders.length).toFixed(2):"0.00"]}),e.jsx("p",{className:`text-sm ${t?"text-blue-300":"text-blue-700"}`,children:"Ticket MÃ©dio"})]})]}),b.orders&&b.orders.length>0&&e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line text-xl text-pink-500"}),"HistÃ³rico de Encomendas (",b.orders.length,")"]}),e.jsx("div",{className:"space-y-3",children:b.orders.map(a=>e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-600 border border-gray-500":"bg-white border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>L(a.id),children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${t?"bg-gray-700":"bg-gray-100"} flex items-center justify-center`,children:e.jsx("i",{className:"ri-file-list-3-line text-2xl text-pink-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("p",{className:`text-sm font-bold ${t?"text-white":"text-gray-800"}`,children:["Encomenda #",a.id.substring(0,8).toUpperCase()]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${a.status==="completed"?"bg-green-100 text-green-700":a.status==="shipped"?"bg-blue-100 text-blue-700":a.status==="processing"?"bg-yellow-100 text-yellow-700":a.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:a.status==="completed"?"âœ“ Entregue":a.status==="shipped"?"ðŸ“¦ Enviado":a.status==="processing"?"â³ Processamento":a.status==="cancelled"?"âœ— Cancelado":"â¸ Pendente"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:[e.jsx("i",{className:"ri-calendar-line mr-1"}),new Date(a.created_at).toLocaleDateString("pt-PT")]}),e.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:[e.jsx("i",{className:"ri-shopping-cart-line mr-1"}),a.order_items?.length||0," produtos"]}),a.payment_method&&e.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:[e.jsx("i",{className:"ri-bank-card-line mr-1"}),a.payment_method==="card"?"CartÃ£o":a.payment_method]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-xl font-bold text-green-500",children:["â‚¬",a.total_amount?.toFixed(2)]}),e.jsx("i",{className:`ri-arrow-${z.has(a.id)?"up":"down"}-s-line text-xl ${t?"text-gray-400":"text-gray-600"}`})]})]}),z.has(a.id)&&a.order_items&&a.order_items.length>0&&e.jsxs("div",{className:`mt-4 pt-4 border-t ${t?"border-gray-500":"border-gray-200"}`,children:[e.jsx("p",{className:`text-sm font-semibold mb-3 ${t?"text-white":"text-gray-800"}`,children:"Produtos Encomendados:"}),e.jsx("div",{className:"space-y-2",children:a.order_items.map(n=>e.jsxs("div",{className:"flex items-center gap-3",children:[n.product_image&&e.jsx("img",{src:n.product_image,alt:n.product_name,className:"w-12 h-12 rounded object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-800"}`,children:n.product_name}),e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:["Quantidade: ",n.quantity," Ã— â‚¬",n.price?.toFixed(2)]})]}),e.jsxs("p",{className:`text-sm font-bold ${t?"text-white":"text-gray-800"}`,children:["â‚¬",(n.quantity*n.price).toFixed(2)]})]},n.id))}),a.shipping_address&&e.jsxs("div",{className:`mt-3 pt-3 border-t ${t?"border-gray-500":"border-gray-200"}`,children:[e.jsx("p",{className:`text-xs font-semibold mb-1 ${t?"text-gray-400":"text-gray-600"}`,children:"ðŸ“ Enviado para:"}),e.jsx("p",{className:`text-xs ${t?"text-gray-300":"text-gray-700"}`,children:a.shipping_address.name}),e.jsxs("p",{className:`text-xs ${t?"text-gray-300":"text-gray-700"}`,children:[a.shipping_address.street,", ",a.shipping_address.city]}),e.jsxs("p",{className:`text-xs ${t?"text-gray-300":"text-gray-700"}`,children:[a.shipping_address.postal_code,", ",a.shipping_address.country]})]})]})]},a.id))})]}),b.addresses&&b.addresses.length>0&&e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-map-pin-line text-xl text-pink-500"}),"EndereÃ§os Guardados (",b.addresses.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.addresses.map(a=>e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-600 border border-gray-500":"bg-white border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:`text-sm font-semibold ${t?"text-white":"text-gray-800"}`,children:a.full_name}),a.is_default&&e.jsx("span",{className:"text-xs bg-pink-500 text-white px-2 py-1 rounded-full font-medium",children:"Principal"})]}),e.jsxs("div",{className:`text-xs space-y-1 ${t?"text-gray-300":"text-gray-600"}`,children:[e.jsx("p",{children:a.street}),e.jsxs("p",{children:[a.postal_code," ",a.city]}),e.jsx("p",{children:a.country}),a.phone&&e.jsxs("p",{className:"mt-2",children:[e.jsx("i",{className:"ri-phone-line mr-1"}),a.phone]})]})]},a.id))})]}),b.favorites&&b.favorites.length>0&&e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-heart-line text-xl text-pink-500"}),"Produtos Favoritos (",b.favorites.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:b.favorites.map(a=>e.jsxs("div",{className:`p-3 rounded-lg ${t?"bg-gray-600 border border-gray-500":"bg-white border border-gray-200"}`,children:[a.products?.images?.[0]&&e.jsx("img",{src:a.products.images[0],alt:a.products.name_pt,className:"w-full h-32 object-cover rounded-lg mb-2"}),e.jsx("p",{className:`text-xs font-medium ${t?"text-white":"text-gray-800"} line-clamp-2`,children:a.products?.name_pt||"Produto"}),e.jsxs("p",{className:"text-xs text-pink-500 font-bold mt-1",children:["â‚¬",a.products?.price?.toFixed(2)]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"} mt-1`,children:new Date(a.created_at).toLocaleDateString("pt-PT")})]},a.id))})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-mail-line text-xl text-pink-500"}),"ComunicaÃ§Ã£o & Marketing"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-800"}`,children:"Newsletter"}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:"SubscriÃ§Ã£o de email marketing"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${b.newsletterInfo?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:b.newsletterInfo?"âœ“ Inscrito":"âœ— NÃ£o Inscrito"})]}),b.newsletterInfo&&e.jsx("div",{className:`p-3 rounded-lg ${t?"bg-gray-600":"bg-white"}`,children:e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-600"}`,children:["Data de InscriÃ§Ã£o: ",new Date(b.newsletterInfo.created_at).toLocaleDateString("pt-PT")]})})]})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-yellow-900/20 border border-yellow-700/30":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsxs("h3",{className:`font-semibold mb-4 flex items-center gap-2 ${t?"text-yellow-300":"text-yellow-800"}`,children:[e.jsx("i",{className:"ri-sticky-note-line text-xl text-yellow-500"}),"ðŸ“ Notas Internas (Privadas)"]}),e.jsx("p",{className:`text-xs mb-3 ${t?"text-yellow-300/70":"text-yellow-700"}`,children:"Estas notas sÃ£o privadas e apenas visÃ­veis para administradores. Use para registar preferÃªncias, problemas ou observaÃ§Ãµes sobre o cliente."}),e.jsx("textarea",{value:p,onChange:a=>D(a.target.value),placeholder:"Ex: Cliente VIP, Teve problema numa encomenda, PreferÃªncias especÃ­ficas...",rows:4,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-800 placeholder-gray-500"} focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}),e.jsx("button",{onClick:c,disabled:k,className:"mt-3 px-6 py-2 bg-gradient-to-r from-yellow-500 to-amber-500 text-white rounded-lg font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50",children:k?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A Guardar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Guardar Notas"]})})]})]}),e.jsx("div",{className:"mt-8 flex gap-3",children:e.jsxs("button",{onClick:()=>E(!1),className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Fechar"]})})]})})]})}function Ee({darkMode:t}){const[u,P]=l.useState(!1),[g,C]=l.useState("hero"),[h,F]=l.useState([]),[R,w]=l.useState([]),[b,q]=l.useState(!1),[$,E]=l.useState([]),[p,D]=l.useState(""),[k,O]=l.useState("MARISOL"),[z,G]=l.useState("ElegÃ¢ncia Atemporal, Estilo Ãšnico"),[_,i]=l.useState("Descubra a coleÃ§Ã£o exclusiva que celebra a sua feminilidade e sofisticaÃ§Ã£o. Cada peÃ§a conta uma histÃ³ria de elegÃ¢ncia e confianÃ§a."),[m,f]=l.useState("Explorar ColeÃ§Ã£o"),[o,I]=l.useState("/products"),[j,S]=l.useState("https://readdy.ai/api/search-image?query=luxury%20fashion%20boutique%20interior%20elegant%20clothing%20display%20modern%20minimalist%20design%20soft%20pink%20rose%20gold%20tones%20sophisticated%20feminine%20aesthetic%20high%20end%20retail%20space%20professional%20photography&width=1920&height=1080&seq=hero-marisol-luxury-v2&orientation=landscape"),[c,L]=l.useState(!0),[H,Z]=l.useState([]),[Q,J]=l.useState("Produtos em Destaque"),[d,r]=l.useState("Descubra as nossas peÃ§as mais populares e elegantes"),[a,n]=l.useState("manual"),[U,A]=l.useState("Sobre a Marisol"),[V,x]=l.useState("A Marisol Ã© mais do que uma loja de moda - Ã© um destino para mulheres que valorizam estilo, qualidade e autenticidade. Cada peÃ§a da nossa coleÃ§Ã£o Ã© cuidadosamente selecionada para celebrar a sua individualidade e confianÃ§a."),[v,B]=l.useState("Saiba Mais Sobre NÃ³s"),[X,ee]=l.useState("https://readdy.ai/api/search-image?query=elegant%20fashion%20boutique%20interior%20with%20modern%20minimalist%20design%20soft%20pink%20and%20white%20tones%20luxury%20clothing%20store%20atmosphere%20professional%20interior%20photography&width=800&height=600&seq=about-marisol&orientation=landscape"),[M,ae]=l.useState("Fique por Dentro das Novidades"),[ne,ce]=l.useState("Subscreva a nossa newsletter e receba em primeira mÃ£o as Ãºltimas tendÃªncias, ofertas exclusivas e dicas de estilo."),[ie,xe]=l.useState("Subscrever Newsletter"),[de,ge]=l.useState("");l.useEffect(()=>{re()},[]);const re=async()=>{try{const{data:s,error:N}=await T.from("products").select("*").eq("is_active",!0).order("created_at",{ascending:!1});N?console.error("Erro ao carregar produtos:",N):s&&(console.log("âœ… Produtos carregados:",s.length),F(s));const{data:W,error:Y}=await T.from("inspiration_looks").select("*").eq("is_active",!0).order("created_at",{ascending:!1});Y?console.error("Erro ao carregar looks:",Y):W&&(console.log("âœ… Looks carregados:",W.length),w(W));const{data:he}=await T.from("site_settings").select("*").eq("key","homepage_settings").maybeSingle();if(he?.value){const K=he.value;K.hero&&(O(K.hero.title||k),G(K.hero.subtitle||z),i(K.hero.description||_),f(K.hero.buttonText||m),I(K.hero.buttonLink||o),S(K.hero.backgroundImage||j),L(K.hero.showArrowDown!==void 0?K.hero.showArrowDown:c)),K.featured&&(Z(K.featured.productIds||[]),J(K.featured.title||Q),r(K.featured.subtitle||d),n(K.featured.mode||a)),K.about&&(A(K.about.title||U),x(K.about.description||V),B(K.about.buttonText||v),ee(K.about.image||X)),K.newsletter&&(ae(K.newsletter.title||M),ce(K.newsletter.description||ne),xe(K.newsletter.buttonText||ie),ge(K.newsletter.incentive||de))}}catch(s){console.error("Erro ao carregar dados:",s)}},y=async()=>{P(!0);try{const s={hero:{title:k,subtitle:z,description:_,buttonText:m,buttonLink:o,backgroundImage:j,showArrowDown:c},featured:{productIds:H,title:Q,subtitle:d,mode:a},about:{title:U,description:V,buttonText:v,image:X},newsletter:{title:M,description:ne,buttonText:ie,incentive:de}},{error:N}=await T.from("site_settings").upsert({key:"homepage_settings",value:s,updated_at:new Date().toISOString()},{onConflict:"key",ignoreDuplicates:!1});if(N)throw N;alert("âœ… ConfiguraÃ§Ãµes salvas e sincronizadas com o site!"),await re()}catch(s){console.error("Erro ao salvar:",s),alert("âŒ Erro ao salvar configuraÃ§Ãµes: "+s.message)}finally{P(!1)}},te=s=>{H.includes(s)?Z(H.filter(N=>N!==s)):Z([...H,s])},ye=s=>{if($.includes(s))E($.filter(N=>N!==s));else{if($.length>=4){alert("âŒ Pode selecionar no mÃ¡ximo 4 produtos por look");return}E([...$,s])}},fe=async()=>{if(!p.trim()){alert("âŒ Por favor, insira um tÃ­tulo para o look");return}if($.length===0){alert("âŒ Por favor, selecione pelo menos 1 produto");return}if($.length>4){alert("âŒ Pode selecionar no mÃ¡ximo 4 produtos por look");return}try{const{error:s}=await T.from("inspiration_looks").insert([{title:p,product_ids:$,is_active:!0}]);if(s)throw console.error("Erro ao criar look:",s),s;alert("âœ… Look criado com sucesso!"),q(!1),D(""),E([]),await re()}catch(s){console.error("Erro ao criar look:",s),alert("âŒ Erro ao criar look: "+s.message)}},je=async s=>{if(confirm("Tem certeza que deseja eliminar este look?"))try{const{error:N}=await T.from("inspiration_looks").delete().eq("id",s);if(N)throw N;alert("âœ… Look eliminado com sucesso!"),await re()}catch(N){console.error("Erro ao eliminar look:",N),alert("âŒ Erro ao eliminar look")}},ue=()=>h.filter(s=>H.includes(s.id));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"Editor da PÃ¡gina Inicial"}),e.jsx("button",{onClick:y,disabled:u,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50 whitespace-nowrap",children:u?"A Guardar...":"ðŸ’¾ Guardar AlteraÃ§Ãµes"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:["hero","featured","looks","about","newsletter"].map(s=>e.jsxs("button",{onClick:()=>C(s),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap cursor-pointer transition-colors ${g===s?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s==="hero"&&"ðŸŽ¨ Hero Section",s==="featured"&&"â­ Produtos em Destaque",s==="looks"&&"ðŸ‘— Looks Inspiradores",s==="about"&&"ðŸ“– Sobre NÃ³s",s==="newsletter"&&"ðŸ“§ Newsletter"]},s))}),g==="hero"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg space-y-4`,children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"ðŸŽ¨ Hero Section (Primeira SecÃ§Ã£o do Site)"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"ðŸ–¼ï¸ Imagem de Fundo (URL)"}),e.jsx("input",{type:"text",value:j,onChange:s=>S(s.target.value),placeholder:"URL da imagem de fundo",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`}),e.jsx("p",{className:`text-xs mt-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Cole o URL da imagem ou use o Stable Diffusion da Readdy"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"ðŸ“ TÃ­tulo Principal (Headline)"}),e.jsx("input",{type:"text",value:k,onChange:s=>O(s.target.value),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"ðŸ’« SubtÃ­tulo / Frase de Impacto"}),e.jsx("input",{type:"text",value:z,onChange:s=>G(s.target.value),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"ðŸ“„ DescriÃ§Ã£o"}),e.jsx("textarea",{value:_,onChange:s=>i(s.target.value),rows:3,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"ðŸ”˜ Texto do BotÃ£o"}),e.jsx("input",{type:"text",value:m,onChange:s=>f(s.target.value),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"ðŸ”— Link do BotÃ£o"}),e.jsx("input",{type:"text",value:o,onChange:s=>I(s.target.value),placeholder:"/products",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"showArrowDown",checked:c,onChange:s=>L(s.target.checked),className:"w-5 h-5 rounded border-gray-300 text-pink-600 focus:ring-pink-500 cursor-pointer"}),e.jsx("label",{htmlFor:"showArrowDown",className:`text-sm font-medium ${t?"text-gray-300":"text-gray-700"} cursor-pointer`,children:"â¬‡ï¸ Mostrar seta para baixo"})]})]}),g==="featured"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg space-y-6`,children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:"â­ Produtos em Destaque"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"TÃ­tulo da SecÃ§Ã£o"}),e.jsx("input",{type:"text",value:Q,onChange:s=>J(s.target.value),placeholder:"Ex: Mais Vendidos, Escolhas da Marisol",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"SubtÃ­tulo (Opcional)"}),e.jsx("input",{type:"text",value:d,onChange:s=>r(s.target.value),placeholder:"DescriÃ§Ã£o curta da secÃ§Ã£o",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Modo de SeleÃ§Ã£o"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>n("manual"),className:`flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer transition-all ${a==="manual"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"âœ‹ Manual (Escolhidos por ti)"}),e.jsx("button",{onClick:()=>n("auto"),className:`flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer transition-all ${a==="auto"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸ¤– AutomÃ¡tico (Mais vendidos)"})]})]})]}),a==="manual"&&ue().length>0&&e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-pink-50"} border-2 border-pink-200 dark:border-pink-800`,children:[e.jsxs("h4",{className:`text-sm font-bold mb-3 ${t?"text-white":"text-gray-900"}`,children:["âœ… Produtos JÃ¡ Selecionados (",ue().length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:ue().map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.images?.[0]||s.image_url,alt:s.name,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsx("button",{onClick:()=>te(s.id),className:"px-3 py-1 bg-red-500 text-white rounded-lg text-xs font-bold cursor-pointer",children:"Remover"})}),e.jsx("p",{className:`text-xs mt-1 font-medium line-clamp-1 ${t?"text-white":"text-gray-900"}`,children:s.name_pt||s.name})]},s.id))})]}),a==="manual"&&e.jsxs(e.Fragment,{children:[e.jsxs("h4",{className:`text-sm font-bold ${t?"text-white":"text-gray-900"}`,children:["Selecionar Produtos (",H.length," selecionados)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(s=>e.jsxs("div",{onClick:()=>te(s.id),className:`relative rounded-lg overflow-hidden cursor-pointer transition-all ${H.includes(s.id)?"ring-4 ring-pink-500 shadow-xl":"hover:shadow-lg"}`,children:[e.jsx("img",{src:s.images?.[0]||s.image_url,alt:s.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:`p-3 ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-sm font-semibold ${t?"text-white":"text-gray-900"} line-clamp-1`,children:s.name_pt||s.name}),e.jsxs("p",{className:"text-pink-500 font-bold",children:["â‚¬",s.price.toFixed(2)]})]}),H.includes(s.id)&&e.jsx("div",{className:"absolute top-2 right-2 w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-line text-white text-lg"})})]},s.id))})]})]}),g==="looks"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:["ðŸ‘— Looks Inspiradores (",R.length," looks criados)"]}),e.jsxs("button",{onClick:()=>q(!0),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Criar Novo Look"]})]}),R.length===0?e.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-500"}`,children:[e.jsx("i",{className:"ri-shirt-line text-6xl mb-4"}),e.jsx("p",{className:"text-lg",children:"Nenhum look criado ainda"}),e.jsx("p",{className:"text-sm mt-2",children:'Clique em "Criar Novo Look" para comeÃ§ar'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(s=>e.jsx("div",{className:`rounded-lg overflow-hidden ${t?"bg-gray-700":"bg-gray-50"} shadow-lg`,children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:`text-lg font-semibold mb-3 ${t?"text-white":"text-gray-900"}`,children:s.title}),e.jsxs("p",{className:`text-sm mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:[s.product_ids?.length||0," produtos selecionados"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:s.product_ids?.slice(0,4).map(N=>{const W=h.find(Y=>Y.id===N);return W?e.jsx("img",{src:W.images?.[0]||W.image_url,alt:W.name,className:"w-full h-24 object-cover rounded-lg"},N):null})}),e.jsxs("button",{onClick:()=>je(s.id),className:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Eliminar Look"]})]})},s.id))})]}),g==="about"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg space-y-4`,children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"ðŸ“– SecÃ§Ã£o Sobre NÃ³s (VersÃ£o Curta na Home)"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"TÃ­tulo"}),e.jsx("input",{type:"text",value:U,onChange:s=>A(s.target.value),placeholder:"Ex: Mais do que moda",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"DescriÃ§Ã£o Curta"}),e.jsx("textarea",{value:V,onChange:s=>x(s.target.value),rows:5,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Texto do BotÃ£o"}),e.jsx("input",{type:"text",value:v,onChange:s=>B(s.target.value),placeholder:"Ex: ConheÃ§a a Marisol",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Imagem Ilustrativa (URL)"}),e.jsx("input",{type:"text",value:X,onChange:s=>ee(s.target.value),placeholder:"URL da imagem",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]})]}),g==="newsletter"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg space-y-4`,children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"ðŸ’Œ SecÃ§Ã£o Newsletter"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"TÃ­tulo da SecÃ§Ã£o"}),e.jsx("input",{type:"text",value:M,onChange:s=>ae(s.target.value),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Texto Descritivo"}),e.jsx("textarea",{value:ne,onChange:s=>ce(s.target.value),rows:3,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Texto do BotÃ£o"}),e.jsx("input",{type:"text",value:ie,onChange:s=>xe(s.target.value),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Incentivo (Opcional)"}),e.jsx("input",{type:"text",value:de,onChange:s=>ge(s.target.value),placeholder:"Ex: 10% na primeira compra",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-6xl w-full my-8 max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:"âœ¨ Criar Novo Look Inspirador"}),e.jsxs("p",{className:`text-sm mt-2 ${t?"text-gray-400":"text-gray-600"}`,children:["Selecione atÃ© 4 produtos para criar um look (",$.length,"/4 selecionados)"]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"TÃ­tulo do Look *"}),e.jsx("input",{type:"text",value:p,onChange:s=>D(s.target.value),placeholder:"Ex: Look Elegante para o EscritÃ³rio",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-3`,children:"Selecionar Produtos (clique para selecionar/desmarcar)"}),h.length===0?e.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-500"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line text-6xl mb-4"}),e.jsx("p",{className:"text-lg",children:"Nenhum produto disponÃ­vel"}),e.jsx("p",{className:"text-sm mt-2",children:'Adicione produtos primeiro na aba "Produtos"'})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-96 overflow-y-auto p-2",children:h.map(s=>e.jsxs("div",{onClick:()=>ye(s.id),className:`relative rounded-lg overflow-hidden cursor-pointer transition-all ${$.includes(s.id)?"ring-4 ring-green-500 shadow-xl":"hover:shadow-lg"}`,children:[e.jsx("img",{src:s.images?.[0]||s.image_url,alt:s.name,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:`p-2 ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-semibold ${t?"text-white":"text-gray-900"} line-clamp-1`,children:s.name_pt||s.name}),e.jsxs("p",{className:"text-pink-500 font-bold text-sm",children:["â‚¬",s.price.toFixed(2)]})]}),$.includes(s.id)&&e.jsx("div",{className:"absolute top-2 right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-line text-white text-lg"})})]},s.id))})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-4",children:[e.jsx("button",{onClick:()=>{q(!1),D(""),E([])},className:`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancelar"}),e.jsxs("button",{onClick:fe,disabled:$.length===0||!p.trim(),className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Criar Look (",$.length,"/4)"]})]})]})})]})}function Te({darkMode:t}){const[u,P]=l.useState("customers"),[g,C]=l.useState([]),[h,F]=l.useState([]),[R,w]=l.useState([]),[b,q]=l.useState(!0),[$,E]=l.useState(""),[p,D]=l.useState("all"),[k,O]=l.useState(new Set),[z,G]=l.useState(!1),[_,i]=l.useState(!1),[m,f]=l.useState("email"),[o,I]=l.useState(null),[j,S]=l.useState(null);l.useEffect(()=>{c()},[]);const c=async()=>{q(!0),await Promise.all([L(),H(),Z()]),q(!1)},L=async()=>{const{data:x}=await T.from("customers").select("*").order("created_at",{ascending:!1});x&&C(x)},H=async()=>{const{data:x}=await T.from("site_settings").select("value").eq("key","marketing_templates").single();if(x?.value)F(x.value);else{const v=[{id:"1",name:"PromoÃ§Ã£o Exclusiva VIP",channel:"email",subject:"ðŸŽ 40% OFF Exclusivo para Ti!",message:`OlÃ¡ {{name}}!

Como cliente VIP, tens acesso exclusivo a 40% de desconto em toda a loja!

Usa o cÃ³digo: VIP40

VÃ¡lido atÃ© ao fim do mÃªs.

Obrigada,
Equipa Marisol`,created_at:new Date().toISOString()},{id:"2",name:"Novidades na Loja",channel:"email",subject:"âœ¨ Novidades Acabaram de Chegar!",message:`OlÃ¡ {{name}}!

Temos novidades incrÃ­veis na nossa loja!

Vem descobrir as novas coleÃ§Ãµes e aproveita 20% de desconto na primeira compra.

CÃ³digo: NOVO20

Boas compras!
Equipa Marisol`,created_at:new Date().toISOString()},{id:"3",name:"Agradecimento",channel:"email",subject:"ðŸ’– Obrigada pela tua Compra!",message:`OlÃ¡ {{name}}!

Queremos agradecer a tua confianÃ§a e preferÃªncia!

Como agradecimento, tens 15% de desconto na prÃ³xima compra.

CÃ³digo: OBRIGADA15

AtÃ© breve!
Equipa Marisol`,created_at:new Date().toISOString()},{id:"4",name:"PromoÃ§Ã£o WhatsApp",channel:"whatsapp",message:`ðŸŽ‰ OlÃ¡ {{name}}!

PromoÃ§Ã£o EXCLUSIVA para ti!

âœ¨ 30% OFF em produtos selecionados
ðŸšš Envio GRÃTIS acima de â‚¬100

Vem ver: https://marisol.lu

Equipa Marisol ðŸ’™`,created_at:new Date().toISOString()},{id:"5",name:"Novidade WhatsApp",channel:"whatsapp",message:`âœ¨ OlÃ¡ {{name}}!

Novas coleÃ§Ãµes acabaram de chegar! ðŸ›ï¸

Vem descobrir e aproveita 20% OFF:
https://marisol.lu

Equipa Marisol ðŸ’™`,created_at:new Date().toISOString()}];F(v),await T.from("site_settings").upsert({key:"marketing_templates",value:v})}},Z=async()=>{const{data:x}=await T.from("site_settings").select("value").eq("key","marketing_history").single();x?.value&&w(x.value)},Q=()=>{let x=g;if(p==="vip"?x=x.filter(v=>v.is_newsletter_subscribed):p==="with_orders"?x=x.filter(v=>v.order_count>0):p==="without_orders"&&(x=x.filter(v=>v.order_count===0)),$.trim()){const v=$.toLowerCase();x=x.filter(B=>B.name.toLowerCase().includes(v)||B.email.toLowerCase().includes(v)||B.phone?.toLowerCase().includes(v))}return x},J={total:g.length,vip:g.filter(x=>x.is_newsletter_subscribed).length,withOrders:g.filter(x=>x.order_count>0).length,withoutOrders:g.filter(x=>x.order_count===0).length},d=x=>{const v=new Set(k);v.has(x)?v.delete(x):v.add(x),O(v)},r=()=>{const x=Q();k.size===x.length?O(new Set):O(new Set(x.map(v=>v.id)))},a=x=>{f(x),G(!0)},n=async()=>{if(!o||k.size===0)return;const x=g.filter(X=>k.has(X.id));if(m==="email"){const X=x.map(ae=>ae.email).join(","),ee=o.subject||"",M=o.message.replace(/{{name}}/g,"");window.location.href=`mailto:${X}?subject=${encodeURIComponent(ee)}&body=${encodeURIComponent(M)}`}else x.forEach(X=>{const ee=o.message.replace(/{{name}}/g,X.name),M=X.phone?.replace(/\D/g,"");M&&window.open(`https://wa.me/${M}?text=${encodeURIComponent(ee)}`,"_blank")});const B=[{id:Date.now().toString(),customer_ids:Array.from(k),customer_names:x.map(X=>X.name),channel:m,template_name:o.name,sent_at:new Date().toISOString()},...R];w(B),await T.from("site_settings").upsert({key:"marketing_history",value:B}),G(!1),O(new Set),I(null)},U=async()=>{if(!j)return;let x;if(h.find(v=>v.id===j.id))x=h.map(v=>v.id===j.id?j:v);else{const v={...j,id:Date.now().toString(),created_at:new Date().toISOString()};x=[...h,v]}F(x),await T.from("site_settings").upsert({key:"marketing_templates",value:x}),i(!1),S(null)},A=async x=>{if(!confirm("Tens a certeza que queres eliminar este template?"))return;const v=h.filter(B=>B.id!==x);F(v),await T.from("site_settings").upsert({key:"marketing_templates",value:v})};if(b)return e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})});const V=Q();return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"Marketing Profissional"}),e.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Gerir clientes, templates e campanhas de marketing"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Total"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-800"}`,children:J.total})]}),e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center",children:e.jsx("i",{className:"ri-group-line text-2xl text-white"})})]})}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Clientes VIP"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-800"}`,children:J.vip})]}),e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:e.jsx("i",{className:"ri-vip-crown-line text-2xl text-white"})})]}),e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"Newsletter = VIP ðŸ‘‘"})]}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Com Compras"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-800"}`,children:J.withOrders})]}),e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx("i",{className:"ri-shopping-bag-3-line text-2xl text-white"})})]})}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-1`,children:"Sem Compras"}),e.jsx("p",{className:`text-3xl font-bold ${t?"text-white":"text-gray-800"}`,children:J.withoutOrders})]}),e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:e.jsx("i",{className:"ri-user-add-line text-2xl text-white"})})]})})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm mb-6`,children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>P("customers"),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${u==="customers"?"border-b-2 border-pink-500 text-pink-600":t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-group-line mr-2"}),"Clientes (",V.length,")"]}),e.jsxs("button",{onClick:()=>P("templates"),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${u==="templates"?"border-b-2 border-pink-500 text-pink-600":t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-file-text-line mr-2"}),"Templates (",h.length,")"]}),e.jsxs("button",{onClick:()=>P("history"),className:`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${u==="history"?"border-b-2 border-pink-500 text-pink-600":t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-history-line mr-2"}),"HistÃ³rico (",R.length,")"]})]}),e.jsxs("div",{className:"p-6",children:[u==="customers"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Pesquisar por nome, email ou telefone...",value:$,onChange:x=>E(x.target.value),className:`w-full pl-12 pr-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500`})]})}),e.jsxs("select",{value:p,onChange:x=>D(x.target.value),className:`px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500`,children:[e.jsx("option",{value:"all",children:"Todos os Clientes"}),e.jsx("option",{value:"vip",children:"ðŸ‘‘ Clientes VIP (Newsletter)"}),e.jsx("option",{value:"with_orders",children:"Com Compras"}),e.jsx("option",{value:"without_orders",children:"Sem Compras"})]})]}),k.size>0&&e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>a("email"),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all whitespace-nowrap",children:[e.jsx("i",{className:"ri-mail-line text-lg"}),"Enviar Email (",k.size,")"]}),e.jsxs("button",{onClick:()=>a("whatsapp"),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all whitespace-nowrap",children:[e.jsx("i",{className:"ri-whatsapp-line text-lg"}),"Enviar WhatsApp (",k.size,")"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:k.size===V.length&&V.length>0,onChange:r,className:"w-5 h-5 rounded border-gray-300 text-pink-500 focus:ring-pink-500 cursor-pointer"})}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-700"}`,children:"Cliente"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-700"}`,children:"Contacto"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-700"}`,children:"Tipo"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-700"}`,children:"Compras"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-700"}`,children:"Total Gasto"})]})}),e.jsx("tbody",{children:V.map(x=>e.jsxs("tr",{className:`border-t ${t?"border-gray-700 hover:bg-gray-700":"border-gray-100 hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:k.has(x.id),onChange:()=>d(x.id),className:"w-5 h-5 rounded border-gray-300 text-pink-500 focus:ring-pink-500 cursor-pointer"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:x.name.charAt(0).toUpperCase()}),e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:x.name})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"ri-mail-line text-gray-400"}),x.email]}),x.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-phone-line text-gray-400"}),x.phone]})]})}),e.jsx("td",{className:"px-4 py-4",children:x.is_newsletter_subscribed?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-yellow-400 to-amber-500 text-white whitespace-nowrap",children:[e.jsx("i",{className:"ri-vip-crown-fill"}),"VIP"]}):x.order_count>0?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-500 to-emerald-600 text-white whitespace-nowrap",children:[e.jsx("i",{className:"ri-repeat-line"}),"Recorrente"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-500 to-cyan-600 text-white whitespace-nowrap",children:[e.jsx("i",{className:"ri-user-add-line"}),"Novo"]})}),e.jsx("td",{className:`px-4 py-4 ${t?"text-gray-300":"text-gray-700"}`,children:x.order_count}),e.jsxs("td",{className:`px-4 py-4 font-semibold ${t?"text-white":"text-gray-800"}`,children:["â‚¬",(x.total_spent||0).toFixed(2)]})]},x.id))})]}),V.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-user-search-line text-5xl text-gray-400 mb-3"}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-600"}`,children:"Nenhum cliente encontrado"})]})]})]}),u==="templates"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Criar e gerir templates de mensagens reutilizÃ¡veis"}),e.jsxs("button",{onClick:()=>{S({id:"",name:"",channel:"email",subject:"",message:"",created_at:""}),i(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line text-lg"}),"Novo Template"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(x=>e.jsxs("div",{className:`${t?"bg-gray-700":"bg-gray-50"} rounded-lg p-6 border-2 border-transparent hover:border-pink-500 transition-all`,children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-white":"text-gray-800"}`,children:x.name}),x.channel==="email"?e.jsxs("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs rounded-full",children:[e.jsx("i",{className:"ri-mail-line mr-1"}),"Email"]}):e.jsxs("span",{className:"px-2 py-1 bg-green-500 text-white text-xs rounded-full",children:[e.jsx("i",{className:"ri-whatsapp-line mr-1"}),"WhatsApp"]})]}),x.subject&&e.jsx("p",{className:`text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:x.subject}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} line-clamp-3`,children:x.message})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{S(x),i(!0)},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Editar"]}),e.jsx("button",{onClick:()=>A(x.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm whitespace-nowrap",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},x.id))}),h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-file-text-line text-5xl text-gray-400 mb-3"}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-600"} mb-4`,children:"Ainda nÃ£o tens templates"}),e.jsx("button",{onClick:()=>{S({id:"",name:"",channel:"email",subject:"",message:"",created_at:""}),i(!0)},className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all whitespace-nowrap",children:"Criar Primeiro Template"})]})]}),u==="history"&&e.jsxs("div",{children:[e.jsx("p",{className:`mb-6 ${t?"text-gray-400":"text-gray-600"}`,children:"HistÃ³rico de todas as mensagens enviadas"}),e.jsx("div",{className:"space-y-4",children:R.map(x=>e.jsxs("div",{className:`${t?"bg-gray-700":"bg-gray-50"} rounded-lg p-6`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[x.channel==="email"?e.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-mail-line text-xl text-white"})}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-whatsapp-line text-xl text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${t?"text-white":"text-gray-800"}`,children:x.template_name}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:[x.channel==="email"?"Email":"WhatsApp"," Â· ",x.customer_names.length," destinatÃ¡rios"]})]})]}),e.jsx("span",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:new Date(x.sent_at).toLocaleString("pt-PT")})]}),e.jsxs("div",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsx("strong",{children:"DestinatÃ¡rios:"})," ",x.customer_names.join(", ")]})]},x.id))}),R.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-history-line text-5xl text-gray-400 mb-3"}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-600"}`,children:"Ainda nÃ£o enviaste mensagens"})]})]})]})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:m==="email"?"ðŸ“§ Enviar Email":"ðŸ’¬ Enviar WhatsApp"}),e.jsx("button",{onClick:()=>{G(!1),I(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-2`,children:["Enviar para ",e.jsx("strong",{children:k.size})," cliente(s)"]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Escolher Template"}),e.jsx("div",{className:"space-y-2",children:h.filter(x=>x.channel===m).map(x=>e.jsxs("button",{onClick:()=>I(x),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${o?.id===x.id?"border-pink-500 bg-pink-50 dark:bg-pink-900/20":t?"border-gray-700 bg-gray-700 hover:border-gray-600":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-semibold mb-1",children:x.name}),x.subject&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:x.subject}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-500 line-clamp-2",children:x.message})]},x.id))})]}),o&&e.jsxs("div",{className:`p-4 rounded-lg mb-6 ${t?"bg-gray-700":"bg-blue-50"}`,children:[e.jsxs("p",{className:`text-sm font-medium mb-2 ${t?"text-gray-300":"text-blue-800"}`,children:[e.jsx("i",{className:"ri-information-line mr-1"}),"PrÃ©-visualizaÃ§Ã£o"]}),o.subject&&e.jsx("p",{className:`text-sm font-semibold mb-2 ${t?"text-white":"text-gray-800"}`,children:o.subject}),e.jsx("p",{className:`text-sm whitespace-pre-line ${t?"text-gray-300":"text-gray-700"}`,children:o.message.replace(/{{name}}/g,"[Nome do Cliente]")})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{G(!1),I(null)},className:`flex-1 px-6 py-3 rounded-lg border ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} transition-colors whitespace-nowrap`,children:"Cancelar"}),e.jsx("button",{onClick:n,disabled:!o,className:`flex-1 px-6 py-3 rounded-lg text-white transition-colors whitespace-nowrap ${o?m==="email"?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700":"bg-gray-400 cursor-not-allowed"}`,children:m==="email"?"ðŸ“§ Enviar Email":"ðŸ’¬ Enviar WhatsApp"})]})]})]})}),_&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:j.id?"Editar Template":"Novo Template"}),e.jsx("button",{onClick:()=>{i(!1),S(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Nome do Template *"}),e.jsx("input",{type:"text",value:j.name,onChange:x=>S({...j,name:x.target.value}),placeholder:"Ex: PromoÃ§Ã£o de VerÃ£o",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Canal *"}),e.jsxs("select",{value:j.channel,onChange:x=>S({...j,channel:x.target.value}),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500`,children:[e.jsx("option",{value:"email",children:"ðŸ“§ Email"}),e.jsx("option",{value:"whatsapp",children:"ðŸ’¬ WhatsApp"})]})]}),j.channel==="email"&&e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Assunto *"}),e.jsx("input",{type:"text",value:j.subject||"",onChange:x=>S({...j,subject:x.target.value}),placeholder:"Ex: ðŸŽ Oferta Exclusiva para Ti!",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Mensagem *"}),e.jsx("textarea",{value:j.message,onChange:x=>S({...j,message:x.target.value}),placeholder:"Escreve a tua mensagem aqui... Usa {{name}} para inserir o nome do cliente automaticamente.",rows:8,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-200 text-gray-800"} focus:outline-none focus:ring-2 focus:ring-pink-500`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["ðŸ’¡ Usa ",e.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:"{{name}}"})," para personalizar com o nome do cliente"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{i(!1),S(null)},className:`flex-1 px-6 py-3 rounded-lg border ${t?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} transition-colors whitespace-nowrap`,children:"Cancelar"}),e.jsxs("button",{onClick:U,disabled:!j.name||!j.message||j.channel==="email"&&!j.subject,className:`flex-1 px-6 py-3 rounded-lg text-white transition-colors whitespace-nowrap ${j.name&&j.message&&(j.channel==="whatsapp"||j.subject)?"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600":"bg-gray-400 cursor-not-allowed"}`,children:[e.jsx("i",{className:"ri-save-line mr-2"}),"Guardar Template"]})]})]})]})})]})}const pe=be("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd");function ke({darkMode:t}){const[u,P]=l.useState([]),[g,C]=l.useState(!0),[h,F]=l.useState(""),[R,w]=l.useState("all"),[b,q]=l.useState(null),[$,E]=l.useState(!1);l.useEffect(()=>{p();const i=pe.channel("newsletter_changes").on("postgres_changes",{event:"*",schema:"public",table:"newsletter_subscribers"},()=>{p()}).subscribe();return()=>{i.unsubscribe()}},[]);const p=async()=>{C(!0);try{const{data:i,error:m}=await pe.from("newsletter_subscribers").select("*").order("created_at",{ascending:!1});if(m)throw m;i&&P(i)}catch(i){console.error("Erro ao carregar subscritores:",i)}finally{C(!1)}},D=()=>{const i=["Nome,Email,Telefone,PaÃ­s,Idioma,Data de InscriÃ§Ã£o,Origem,Estado"];G.forEach(I=>{i.push(`${I.name||""},${I.email},${I.phone||""},${I.country||""},${I.language||""},${new Date(I.created_at).toLocaleDateString("pt-PT")},${I.source||"Website"},${I.status==="active"?"Ativo":"Cancelado"}`)});const m=new Blob([i.join(`
`)],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(m),o=document.createElement("a");o.href=f,o.download=`newsletter-subscribers-${new Date().toISOString().split("T")[0]}.csv`,o.click(),window.URL.revokeObjectURL(f)},k=async i=>{if(confirm("Tem certeza que deseja cancelar esta inscriÃ§Ã£o?"))try{const{error:m}=await pe.from("newsletter_subscribers").update({status:"cancelled"}).eq("id",i);if(m)throw m;await pe.from("notifications").insert({type:"newsletter",title:"Cancelamento de Newsletter",message:"Subscritor cancelou a inscriÃ§Ã£o",is_read:!1,created_at:new Date().toISOString()}),alert("âœ… InscriÃ§Ã£o cancelada com sucesso!"),p()}catch(m){console.error("Erro ao cancelar inscriÃ§Ã£o:",m),alert("âŒ Erro ao cancelar inscriÃ§Ã£o")}},O=async i=>{try{const{error:m}=await pe.from("newsletter_subscribers").update({status:"active"}).eq("id",i);if(m)throw m;alert("âœ… InscriÃ§Ã£o reativada com sucesso!"),p()}catch(m){console.error("Erro ao reativar inscriÃ§Ã£o:",m),alert("âŒ Erro ao reativar inscriÃ§Ã£o")}},z=i=>{q(i),E(!0)},G=u.filter(i=>{const m=!h||i.email?.toLowerCase().includes(h.toLowerCase())||i.name?.toLowerCase().includes(h.toLowerCase())||i.country?.toLowerCase().includes(h.toLowerCase());let f=!0;if(R==="active")f=i.status==="active";else if(R==="cancelled")f=i.status==="cancelled";else if(R==="new"){const o=new Date;o.setDate(o.getDate()-7),f=new Date(i.created_at)>=o}else R==="with_purchases"&&(f=!1);return m&&f}),_={total:u.length,active:u.filter(i=>i.status==="active").length,cancelled:u.filter(i=>i.status==="cancelled").length,today:u.filter(i=>{const m=new Date(i.created_at),f=new Date;return m.toDateString()===f.toDateString()}).length,week:u.filter(i=>{const m=new Date(i.created_at),f=new Date;return f.setDate(f.getDate()-7),m>=f}).length,withPurchases:0};return g?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin"})}):e.jsxs("div",{children:[e.jsx("div",{className:`mb-6 ${t?"bg-blue-900/30 border-blue-700":"bg-blue-50 border-blue-200"} rounded-2xl p-4 border`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:`ri-information-line text-xl ${t?"text-blue-300":"text-blue-600"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold mb-1 ${t?"text-blue-300":"text-blue-800"}`,children:"âœ… Sistema Sincronizado Automaticamente"}),e.jsx("p",{className:`text-sm ${t?"text-blue-200":"text-blue-700"}`,children:"Todas as inscriÃ§Ãµes feitas no site aparecem aqui instantaneamente. Os dados sÃ£o guardados permanentemente no Supabase e nunca desaparecem."})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"GestÃ£o de Newsletter"}),e.jsxs("p",{className:t?"text-gray-400":"text-gray-600",children:[u.length," subscritores registados"]})]}),e.jsxs("button",{onClick:D,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Exportar Lista (CSV)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-mail-line text-2xl text-blue-600 dark:text-blue-400"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:_.total}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Total"})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600 dark:text-green-400"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:_.active}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Ativos"})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-2xl text-red-600 dark:text-red-400"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:_.cancelled}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Cancelados"})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-calendar-check-line text-2xl text-yellow-600 dark:text-yellow-400"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:_.today}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Hoje"})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-line-chart-line text-2xl text-purple-600 dark:text-purple-400"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:_.week}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Ãšltimos 7 Dias"})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-pink-100 dark:bg-pink-900/30 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-shopping-bag-line text-2xl text-pink-600 dark:text-pink-400"})})}),e.jsx("p",{className:`text-3xl font-bold mb-1 ${t?"text-white":"text-gray-800"}`,children:_.withPurchases}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Com Compras"})]})]}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-6 shadow-sm border mb-6`,children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Pesquisar"}),e.jsx("input",{type:"text",value:h,onChange:i=>F(i.target.value),placeholder:"Nome, email ou paÃ­s...",className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent text-sm`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Filtrar por"}),e.jsxs("select",{value:R,onChange:i=>w(i.target.value),className:`w-full px-4 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"} focus:ring-2 focus:ring-pink-400 focus:border-transparent text-sm cursor-pointer`,children:[e.jsx("option",{value:"all",children:"Todos os Subscritores"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"cancelled",children:"Cancelados"}),e.jsx("option",{value:"new",children:"Novos (Ãºltimos 7 dias)"}),e.jsx("option",{value:"with_purchases",children:"Com Compras"})]})]})]})}),e.jsx("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden`,children:G.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("i",{className:`ri-mail-line text-6xl mb-4 ${t?"text-gray-600":"text-gray-300"}`}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-500"}`,children:"Nenhum subscritor encontrado"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-gray-700":"bg-gray-50"} border-b ${t?"border-gray-600":"border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Subscritor"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Contacto"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"PaÃ­s / Idioma"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Data de InscriÃ§Ã£o"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Origem"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"Estado"}),e.jsx("th",{className:`px-6 py-4 text-left text-xs font-semibold uppercase ${t?"text-gray-300":"text-gray-600"}`,children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:G.map(i=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full flex items-center justify-center text-white font-bold",children:i.name?i.name[0].toUpperCase():i.email[0].toUpperCase()}),e.jsx("div",{children:e.jsx("p",{className:`text-sm font-medium ${t?"text-white":"text-gray-800"}`,children:i.name||"Sem nome"})})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:i.email}),i.phone&&e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:i.phone})]}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[i.country&&e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("i",{className:"ri-map-pin-line text-xs"}),i.country]}),i.language&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs",children:[e.jsx("i",{className:"ri-global-line"}),i.language.toUpperCase()]})]})}),e.jsx("td",{className:`px-6 py-4 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:new Date(i.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium ${t?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-700"}`,children:[e.jsx("i",{className:"ri-window-line"}),i.source||"Website"]})}),e.jsx("td",{className:"px-6 py-4",children:i.status==="active"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"ri-checkbox-circle-line"}),"Ativo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs font-medium",children:[e.jsx("i",{className:"ri-close-circle-line"}),"Cancelado"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>z(i),className:"w-8 h-8 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors cursor-pointer",title:"Ver Detalhes",children:e.jsx("i",{className:"ri-eye-line"})}),i.status==="active"?e.jsx("button",{onClick:()=>k(i.id),className:"w-8 h-8 flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors cursor-pointer",title:"Cancelar InscriÃ§Ã£o",children:e.jsx("i",{className:"ri-close-line"})}):e.jsx("button",{onClick:()=>O(i.id),className:"w-8 h-8 flex items-center justify-center bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors cursor-pointer",title:"Reativar InscriÃ§Ã£o",children:e.jsx("i",{className:"ri-refresh-line"})})]})})]},i.id))})]})})}),$&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-pink-500 to-rose-500 p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Detalhes do Subscritor"}),e.jsx("button",{onClick:()=>E(!1),className:"w-10 h-10 flex items-center justify-center bg-white/20 hover:bg-white/30 rounded-full transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl text-white"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-user-line text-pink-500"}),"InformaÃ§Ãµes Pessoais"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Nome"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.name||"NÃ£o fornecido"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Email"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.email})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Telefone"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.phone||"NÃ£o fornecido"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"PaÃ­s"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.country||"NÃ£o fornecido"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Idioma Preferido"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.language?.toUpperCase()||"NÃ£o fornecido"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Data de InscriÃ§Ã£o"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:new Date(b.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-mail-line text-pink-500"}),"InformaÃ§Ãµes de InscriÃ§Ã£o"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Origem"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.source||"Website"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("p",{className:`text-xs font-medium mb-1 ${t?"text-gray-400":"text-gray-500"}`,children:"Estado"}),e.jsx("p",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:b.status==="active"?e.jsxs("span",{className:"inline-flex items-center gap-1 text-green-600 dark:text-green-400",children:[e.jsx("i",{className:"ri-checkbox-circle-line"}),"Ativo"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-red-600 dark:text-red-400",children:[e.jsx("i",{className:"ri-close-circle-line"}),"Cancelado"]})})]})]})]}),b.customer_id&&e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-semibold mb-4 flex items-center gap-2 ${t?"text-white":"text-gray-800"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line text-pink-500"}),"Cliente Registado"]}),e.jsx("div",{className:`p-4 rounded-xl ${t?"bg-blue-900/20 border-blue-700":"bg-blue-50 border-blue-200"} border`,children:e.jsxs("p",{className:`text-sm ${t?"text-blue-300":"text-blue-700"}`,children:[e.jsx("i",{className:"ri-information-line mr-2"}),"Este subscritor tem uma conta de cliente registada na loja."]})})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[b.status==="active"?e.jsxs("button",{onClick:()=>{k(b.id),E(!1)},className:"flex-1 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Cancelar InscriÃ§Ã£o"]}):e.jsxs("button",{onClick:()=>{O(b.id),E(!1)},className:"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition-colors cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Reativar InscriÃ§Ã£o"]}),e.jsx("button",{onClick:()=>E(!1),className:`flex-1 px-6 py-3 ${t?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"} rounded-xl font-medium transition-colors cursor-pointer whitespace-nowrap`,children:"Fechar"})]})]})]})}),e.jsxs("div",{className:`mt-6 ${t?"bg-blue-900/30 border-blue-700":"bg-blue-50 border-blue-200"} rounded-2xl p-6 border`,children:[e.jsxs("h3",{className:`font-semibold mb-3 flex items-center gap-2 ${t?"text-blue-300":"text-blue-800"}`,children:[e.jsx("i",{className:"ri-lightbulb-line"}),"Ideias para Campanhas de Email"]}),e.jsxs("ul",{className:`space-y-2 text-sm ${t?"text-blue-200":"text-blue-700"}`,children:[e.jsx("li",{children:"â€¢ Enviar novidades sobre novos produtos e coleÃ§Ãµes"}),e.jsx("li",{children:"â€¢ Criar campanhas sazonais (Primavera, VerÃ£o, Outono, Inverno)"}),e.jsx("li",{children:"â€¢ Oferecer descontos exclusivos para subscritores"}),e.jsx("li",{children:"â€¢ Partilhar dicas de moda e tendÃªncias"}),e.jsx("li",{children:"â€¢ Anunciar promoÃ§Ãµes especiais e vendas flash"}),e.jsx("li",{children:"â€¢ Enviar mensagens personalizadas para clientes com compras"})]})]})]})}function Pe(){const[t,u]=l.useState([]),[P,g]=l.useState(!0),[C,h]=l.useState("all"),[F,R]=l.useState("all"),[w,b]=l.useState(null);l.useEffect(()=>{q();const i=T.channel("notifications-changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications"},()=>{q()}).on("postgres_changes",{event:"*",schema:"public",table:"contact_messages"},()=>{q()}).on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>{q()}).on("postgres_changes",{event:"*",schema:"public",table:"customers"},()=>{q()}).on("postgres_changes",{event:"*",schema:"public",table:"newsletter_subscribers"},()=>{q()}).subscribe();return()=>{T.removeChannel(i)}},[]);const q=async()=>{try{g(!0);const{data:i,error:m}=await T.from("notifications").select("*").order("created_at",{ascending:!1});if(m)throw m;const{data:f,error:o}=await T.from("contact_messages").select("*").order("created_at",{ascending:!1});if(o)throw o;const I=(f||[]).map(S=>({id:`contact-${S.id}`,type:"contact",title:`Nova Mensagem: ${S.subject}`,message:S.message,read:S.status==="read",created_at:S.created_at,customer_email:S.email,customer_name:S.name,contact_subject:S.subject,metadata:S})),j=[...i||[],...I].sort((S,c)=>new Date(c.created_at).getTime()-new Date(S.created_at).getTime());u(j)}catch(i){console.error("Erro ao carregar notificaÃ§Ãµes:",i)}finally{g(!1)}},$=async i=>{try{if(i.startsWith("contact-")){const m=i.replace("contact-",""),{error:f}=await T.from("contact_messages").update({status:"read"}).eq("id",m);if(f)throw f}else{const{error:m}=await T.from("notifications").update({read:!0}).eq("id",i);if(m)throw m}u(m=>m.map(f=>f.id===i?{...f,read:!0}:f)),await q()}catch(m){console.error("Erro ao marcar como lida:",m),alert("âŒ Erro ao marcar notificaÃ§Ã£o como lida")}},E=async()=>{try{const{error:i}=await T.from("notifications").update({read:!0}).eq("read",!1);if(i)throw i;const{error:m}=await T.from("contact_messages").update({status:"read"}).neq("status","read");if(m)throw m;u(f=>f.map(o=>({...o,read:!0}))),alert("âœ… Todas as notificaÃ§Ãµes foram marcadas como lidas!"),await q()}catch(i){console.error("Erro ao marcar todas como lidas:",i),alert("âŒ Erro ao marcar notificaÃ§Ãµes como lidas")}},p=async i=>{if(confirm("Tem certeza que deseja eliminar esta notificaÃ§Ã£o?"))try{if(i.startsWith("contact-")){const m=i.replace("contact-",""),{error:f}=await T.from("contact_messages").delete().eq("id",m);if(f)throw f}else{const{error:m}=await T.from("notifications").delete().eq("id",i);if(m)throw m}alert("âœ… NotificaÃ§Ã£o eliminada com sucesso!"),await q()}catch(m){console.error("Erro ao eliminar notificaÃ§Ã£o:",m),alert("âŒ Erro ao eliminar notificaÃ§Ã£o")}},D=async()=>{if(confirm("Tem certeza que deseja eliminar TODAS as notificaÃ§Ãµes lidas?"))try{const{error:i}=await T.from("notifications").delete().eq("read",!0);if(i)throw i;const{error:m}=await T.from("contact_messages").delete().eq("status","read");if(m)throw m;alert("âœ… Todas as notificaÃ§Ãµes lidas foram eliminadas!"),await q()}catch(i){console.error("Erro ao eliminar notificaÃ§Ãµes:",i),alert("âŒ Erro ao eliminar notificaÃ§Ãµes")}},k=i=>{switch(i){case"order":case"order_new":case"order_status":case"order_cancelled":return"ri-shopping-bag-line";case"email":return"ri-mail-line";case"contact":return"ri-message-3-line";case"customer":return"ri-user-add-line";case"newsletter":return"ri-mail-send-line";case"stock_alert":return"ri-alert-line";case"error":return"ri-error-warning-line";case"system":return"ri-settings-line";default:return"ri-notification-line"}},O=i=>{switch(i){case"order":case"order_new":return"text-blue-600 bg-blue-50 dark:text-blue-400 dark:bg-blue-900/30";case"order_status":return"text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/30";case"order_cancelled":return"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30";case"email":return"text-teal-600 bg-teal-50 dark:text-teal-400 dark:bg-teal-900/30";case"contact":return"text-pink-600 bg-pink-50 dark:text-pink-400 dark:bg-pink-900/30";case"customer":return"text-indigo-600 bg-indigo-50 dark:text-indigo-400 dark:bg-indigo-900/30";case"newsletter":return"text-purple-600 bg-purple-50 dark:text-purple-400 dark:bg-purple-900/30";case"stock_alert":return"text-orange-600 bg-orange-50 dark:text-orange-400 dark:bg-orange-900/30";case"error":return"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30";case"system":return"text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-900/30";default:return"text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-900/30"}},z=i=>{switch(i){case"order":return"Encomenda";case"order_new":return"Nova Encomenda";case"order_status":return"Estado da Encomenda";case"order_cancelled":return"Encomenda Cancelada";case"email":return"Email";case"contact":return"Mensagem de Contato";case"customer":return"Cliente";case"newsletter":return"Newsletter";case"stock_alert":return"Alerta de Stock";case"error":return"Erro";case"system":return"Sistema";default:return i}},G=t.filter(i=>{if(C!=="all"){if(C==="order"){if(!["order","order_new","order_status","order_cancelled"].includes(i.type))return!1}else if(i.type!==C)return!1}return!(F==="unread"&&i.read||F==="read"&&!i.read)}),_={total:t.length,unread:t.filter(i=>!i.read).length,contacts:t.filter(i=>i.type==="contact").length,orders:t.filter(i=>["order","order_new","order_status","order_cancelled"].includes(i.type)).length,customers:t.filter(i=>i.type==="customer").length,newsletter:t.filter(i=>i.type==="newsletter").length,errors:t.filter(i=>i.type==="error").length};return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"ri-information-line text-2xl text-blue-600 dark:text-blue-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"Sistema de NotificaÃ§Ãµes em Tempo Real"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Todas as notificaÃ§Ãµes sÃ£o guardadas permanentemente na base de dados. Novas notificaÃ§Ãµes aparecem automaticamente quando: clientes enviam mensagens, fazem compras, criam contas, subscrevem newsletter ou ocorrem erros no sistema."})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-2xl p-4 border border-blue-200 dark:border-blue-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-notification-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:_.total}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Total"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 rounded-2xl p-4 border border-orange-200 dark:border-orange-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-mail-unread-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:_.unread}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:"NÃ£o Lidas"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/30 dark:to-pink-800/30 rounded-2xl p-4 border border-pink-200 dark:border-pink-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-pink-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-message-3-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-pink-900 dark:text-pink-100",children:_.contacts}),e.jsx("p",{className:"text-xs text-pink-600 dark:text-pink-400 font-medium",children:"Mensagens"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 rounded-2xl p-4 border border-green-200 dark:border-green-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-shopping-bag-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:_.orders}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"Encomendas"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 rounded-2xl p-4 border border-indigo-200 dark:border-indigo-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-user-add-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:_.customers}),e.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:"Clientes"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-2xl p-4 border border-purple-200 dark:border-purple-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-mail-send-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:_.newsletter}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Newsletter"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30 rounded-2xl p-4 border border-red-200 dark:border-red-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"ri-error-warning-line text-xl text-white"})})}),e.jsx("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:_.errors}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"Erros"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo"}),e.jsxs("select",{value:C,onChange:i=>h(i.target.value),className:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent cursor-pointer bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"Todas"}),e.jsx("option",{value:"contact",children:"Mensagens de Contato"}),e.jsx("option",{value:"order",children:"Encomendas"}),e.jsx("option",{value:"customer",children:"Clientes"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"stock_alert",children:"Alertas de Stock"}),e.jsx("option",{value:"error",children:"Erros"}),e.jsx("option",{value:"system",children:"Sistema"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),e.jsxs("select",{value:F,onChange:i=>R(i.target.value),className:"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent cursor-pointer bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"all",children:"Todas"}),e.jsx("option",{value:"unread",children:"NÃ£o Lidas"}),e.jsx("option",{value:"read",children:"Lidas"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch",children:[e.jsxs("button",{onClick:E,disabled:_.unread===0,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer flex items-center justify-center gap-2 h-full",children:[e.jsx("i",{className:"ri-check-double-line text-lg"}),e.jsx("span",{className:"hidden sm:inline",children:"Marcar Todas como Lidas"}),e.jsx("span",{className:"sm:hidden",children:"Marcar Lidas"})]}),e.jsxs("button",{onClick:D,disabled:_.total===_.unread,className:"px-4 py-2 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer flex items-center justify-center gap-2 h-full",children:[e.jsx("i",{className:"ri-delete-bin-line text-lg"}),e.jsx("span",{className:"hidden sm:inline",children:"Eliminar Lidas"}),e.jsx("span",{className:"sm:hidden",children:"Eliminar"})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:G.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-notification-off-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Nenhuma notificaÃ§Ã£o encontrada"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:G.map(i=>e.jsx("div",{className:`p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${i.read?"":"bg-pink-50/30 dark:bg-pink-900/10 border-l-4 border-pink-500"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${O(i.type)}`,children:e.jsx("i",{className:`${k(i.type)} text-2xl`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i.title}),!i.read&&e.jsx("span",{className:"px-2 py-0.5 bg-pink-500 text-white text-xs font-medium rounded-full whitespace-nowrap",children:"Nova"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:i.message}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:`px-2 py-1 rounded-lg font-medium ${O(i.type)}`,children:z(i.type)}),e.jsxs("span",{children:[e.jsx("i",{className:"ri-time-line mr-1"}),new Date(i.created_at).toLocaleString("pt-PT")]}),i.customer_name&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-user-line mr-1"}),i.customer_name]}),i.customer_email&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-mail-line mr-1"}),i.customer_email]}),i.order_id&&e.jsxs("span",{children:[e.jsx("i",{className:"ri-file-list-line mr-1"}),"#",i.order_id.substring(0,8)]}),i.order_total&&e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[e.jsx("i",{className:"ri-money-euro-circle-line mr-1"}),"â‚¬",i.order_total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>b(i),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors cursor-pointer whitespace-nowrap",title:"Ver detalhes",children:e.jsx("i",{className:"ri-eye-line text-xl"})}),!i.read&&e.jsx("button",{onClick:()=>$(i.id),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors cursor-pointer whitespace-nowrap",title:"Marcar como lida",children:e.jsx("i",{className:"ri-check-line text-xl"})}),e.jsx("button",{onClick:()=>p(i.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors cursor-pointer whitespace-nowrap",title:"Eliminar",children:e.jsx("i",{className:"ri-delete-bin-line text-xl"})})]})]})})]})},i.id))})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-pink-500 to-rose-500 text-white p-6 rounded-t-3xl z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:`${k(w.type)} text-2xl`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Detalhes da NotificaÃ§Ã£o"}),e.jsx("p",{className:"text-sm opacity-90",children:z(w.type)})]})]}),e.jsx("button",{onClick:()=>b(null),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:w.title}),w.read?e.jsx("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-full whitespace-nowrap",children:"Lida"}):e.jsx("span",{className:"px-3 py-1 bg-pink-500 text-white text-sm font-medium rounded-full whitespace-nowrap",children:"NÃ£o Lida"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:w.message})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Data e Hora"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:new Date(w.created_at).toLocaleString("pt-PT",{dateStyle:"full",timeStyle:"short"})})]}),w.customer_name&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Cliente"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:w.customer_name})]}),w.customer_email&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white break-all",children:w.customer_email})]}),w.contact_subject&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Assunto"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:w.contact_subject})]}),w.order_id&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"ID da Encomenda"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white font-mono",children:w.order_id})]}),w.order_total&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl p-4 border border-green-200 dark:border-green-700",children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mb-1",children:"Valor Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:["â‚¬",w.order_total.toFixed(2)]})]}),w.order_status&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Estado"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:w.order_status})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[!w.read&&e.jsxs("button",{onClick:()=>{$(w.id),b(null)},className:"flex-1 px-6 py-3 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors cursor-pointer flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-check-line text-xl"}),"Marcar como Lida"]}),e.jsxs("button",{onClick:()=>{p(w.id),b(null)},className:"flex-1 px-6 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors cursor-pointer flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-delete-bin-line text-xl"}),"Eliminar"]}),e.jsx("button",{onClick:()=>b(null),className:"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors cursor-pointer",children:"Fechar"})]})]})]})})]})}const me=be("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd"),Ae=({darkMode:t})=>{const[u,P]=l.useState("general"),[g,C]=l.useState(!1),[h,F]=l.useState(!1),[R,w]=l.useState(!1),[b,q]=l.useState(!1),[$,E]=l.useState({country:"",country_code:"",rate:0}),[p,D]=l.useState(!0),[k,O]=l.useState("included"),[z,G]=l.useState(!1),[_,i]=l.useState("Os preÃ§os incluem IVA conforme a legislaÃ§Ã£o da UniÃ£o Europeia."),[m,f]=l.useState({vat_enabled:!0,vat_included:!0,oss_enabled:!1,legal_text:"Os preÃ§os incluem IVA conforme a legislaÃ§Ã£o da UniÃ£o Europeia."}),[o,I]=l.useState([{id:"1",country:"Luxemburgo",country_code:"LU",rate:17,enabled:!0},{id:"2",country:"Portugal",country_code:"PT",rate:23,enabled:!0},{id:"3",country:"Espanha",country_code:"ES",rate:21,enabled:!0},{id:"4",country:"FranÃ§a",country_code:"FR",rate:20,enabled:!0},{id:"5",country:"Alemanha",country_code:"DE",rate:19,enabled:!0},{id:"6",country:"ItÃ¡lia",country_code:"IT",rate:22,enabled:!0},{id:"7",country:"PaÃ­ses Baixos",country_code:"NL",rate:21,enabled:!0},{id:"8",country:"BÃ©lgica",country_code:"BE",rate:21,enabled:!0},{id:"9",country:"Ãustria",country_code:"AT",rate:20,enabled:!0},{id:"10",country:"GrÃ©cia",country_code:"GR",rate:24,enabled:!0},{id:"11",country:"Irlanda",country_code:"IE",rate:23,enabled:!0},{id:"12",country:"Dinamarca",country_code:"DK",rate:25,enabled:!0},{id:"13",country:"SuÃ©cia",country_code:"SE",rate:25,enabled:!0},{id:"14",country:"FinlÃ¢ndia",country_code:"FI",rate:24,enabled:!0},{id:"15",country:"PolÃ³nia",country_code:"PL",rate:23,enabled:!0},{id:"16",country:"RepÃºblica Checa",country_code:"CZ",rate:21,enabled:!0},{id:"17",country:"Hungria",country_code:"HU",rate:27,enabled:!0},{id:"18",country:"RomÃ©nia",country_code:"RO",rate:19,enabled:!0},{id:"19",country:"BulgÃ¡ria",country_code:"BG",rate:20,enabled:!0},{id:"20",country:"CroÃ¡cia",country_code:"HR",rate:25,enabled:!0},{id:"21",country:"EslovÃ¡quia",country_code:"SK",rate:20,enabled:!0},{id:"22",country:"EslovÃ©nia",country_code:"SI",rate:22,enabled:!0},{id:"23",country:"EstÃ³nia",country_code:"EE",rate:20,enabled:!0},{id:"24",country:"LetÃ³nia",country_code:"LV",rate:21,enabled:!0},{id:"25",country:"LituÃ¢nia",country_code:"LT",rate:21,enabled:!0},{id:"26",country:"Malta",country_code:"MT",rate:18,enabled:!0},{id:"27",country:"Chipre",country_code:"CY",rate:19,enabled:!0}]),[j,S]=l.useState([{id:"1",name:"Luxemburgo",countries:["LU"],cost:3.99,free_shipping_threshold:50,enabled:!0},{id:"2",name:"UniÃ£o Europeia",countries:["PT","ES","FR","DE","IT","NL","BE","AT","GR","IE","DK","SE","FI","PL","CZ","HU","RO","BG","HR","SK","SI","EE","LV","LT","MT","CY"],cost:7.99,free_shipping_threshold:100,enabled:!0}]),[c,L]=l.useState([{code:"PT",name:"Portugal",cost:7.99,free_threshold:50,enabled:!0},{code:"ES",name:"Espanha",cost:9.99,free_threshold:75,enabled:!0},{code:"FR",name:"FranÃ§a",cost:12.99,free_threshold:100,enabled:!0},{code:"DE",name:"Alemanha",cost:12.99,free_threshold:100,enabled:!0},{code:"IT",name:"ItÃ¡lia",cost:14.99,free_threshold:100,enabled:!0},{code:"NL",name:"PaÃ­ses Baixos",cost:10.99,free_threshold:75,enabled:!0},{code:"BE",name:"BÃ©lgica",cost:10.99,free_threshold:75,enabled:!0},{code:"LU",name:"Luxemburgo",cost:5.99,free_threshold:30,enabled:!0},{code:"AT",name:"Ãustria",cost:13.99,free_threshold:100,enabled:!0},{code:"GR",name:"GrÃ©cia",cost:16.99,free_threshold:120,enabled:!0},{code:"IE",name:"Irlanda",cost:14.99,free_threshold:100,enabled:!0},{code:"DK",name:"Dinamarca",cost:12.99,free_threshold:100,enabled:!0},{code:"SE",name:"SuÃ©cia",cost:14.99,free_threshold:100,enabled:!0},{code:"FI",name:"FinlÃ¢ndia",cost:16.99,free_threshold:120,enabled:!0},{code:"PL",name:"PolÃ³nia",cost:11.99,free_threshold:80,enabled:!0},{code:"CZ",name:"RepÃºblica Checa",cost:11.99,free_threshold:80,enabled:!0},{code:"HU",name:"Hungria",cost:12.99,free_threshold:90,enabled:!0},{code:"RO",name:"RomÃ©nia",cost:13.99,free_threshold:100,enabled:!0},{code:"BG",name:"BulgÃ¡ria",cost:14.99,free_threshold:100,enabled:!0},{code:"HR",name:"CroÃ¡cia",cost:13.99,free_threshold:100,enabled:!0},{code:"SK",name:"EslovÃ¡quia",cost:12.99,free_threshold:90,enabled:!0},{code:"SI",name:"EslovÃ©nia",cost:12.99,free_threshold:90,enabled:!0},{code:"EE",name:"EstÃ³nia",cost:15.99,free_threshold:110,enabled:!0},{code:"LV",name:"LetÃ³nia",cost:15.99,free_threshold:110,enabled:!0},{code:"LT",name:"LituÃ¢nia",cost:15.99,free_threshold:110,enabled:!0},{code:"MT",name:"Malta",cost:18.99,free_threshold:130,enabled:!0},{code:"CY",name:"Chipre",cost:19.99,free_threshold:150,enabled:!0}]),H=async()=>{if(me){F(!0);try{const{error:d}=await me.from("site_settings").upsert({key:"country_shipping_rates",value:c,updated_at:new Date().toISOString()},{onConflict:"key",ignoreDuplicates:!1});if(d)throw d;w(!0),setTimeout(()=>w(!1),3e3)}catch(d){console.error("Error saving country shipping rates:",d),alert("Erro ao guardar configuraÃ§Ãµes de envio por paÃ­s")}finally{F(!1)}}};l.useEffect(()=>{(async()=>{if(me)try{const{data:r,error:a}=await me.from("site_settings").select("value").eq("key","country_shipping_rates").single();!a&&r&&L(r.value)}catch(r){console.error("Error loading country shipping rates:",r)}})()},[me]),l.useEffect(()=>{Z()},[]);const Z=async()=>{try{C(!0),console.log("ðŸ”„ A carregar configuraÃ§Ãµes do Supabase...");const{data:d,error:r}=await me.from("site_settings").select("*").eq("key","tax_shipping_settings").maybeSingle();if(r)throw console.error("âŒ Erro ao carregar:",r),r;if(d&&d.key==="tax_shipping_settings"&&d.value){const a=d.value;a.taxEnabled!==void 0&&(D(a.taxEnabled),f(n=>({...n,vat_enabled:a.taxEnabled}))),a.taxCalculation&&(O(a.taxCalculation),f(n=>({...n,vat_included:a.taxCalculation==="included"}))),a.ossEnabled!==void 0&&(G(a.ossEnabled),f(n=>({...n,oss_enabled:a.ossEnabled}))),a.legalText&&(i(a.legalText),f(n=>({...n,legal_text:a.legalText}))),a.taxRates&&I(a.taxRates),a.shippingZones&&S(a.shippingZones),console.log("âœ… ConfiguraÃ§Ãµes carregadas do Supabase:",a)}else console.log("âš ï¸ Nenhuma configuraÃ§Ã£o encontrada. A usar configuraÃ§Ãµes padrÃ£o...")}catch(d){console.error("âŒ Erro ao carregar configuraÃ§Ãµes:",d),alert("âŒ Erro ao carregar configuraÃ§Ãµes. Por favor, recarregue a pÃ¡gina.")}finally{C(!1)}},Q=async()=>{try{F(!0),console.log("ðŸ’¾ A guardar configuraÃ§Ãµes no Supabase...");const d={taxEnabled:m.vat_enabled,taxCalculation:m.vat_included?"included":"checkout",ossEnabled:m.oss_enabled,legalText:m.legal_text,taxRates:o,shippingZones:j};console.log("ðŸ“¦ ConfiguraÃ§Ãµes a guardar:",d);const{error:r}=await me.from("site_settings").upsert({key:"tax_shipping_settings",value:d,updated_at:new Date().toISOString()},{onConflict:"key",ignoreDuplicates:!1});if(r)throw console.error("âŒ Erro ao guardar:",r),r;console.log("âœ… ConfiguraÃ§Ãµes guardadas com sucesso!"),alert(`âœ… ConfiguraÃ§Ãµes salvas e sincronizadas com o site!

ðŸ”„ As mudanÃ§as estÃ£o agora ativas no checkout.`),await Z()}catch(d){console.error("âŒ Erro ao salvar:",d),alert("âŒ Erro ao salvar as configuraÃ§Ãµes. Por favor, tente novamente.")}finally{F(!1)}},J=()=>{if(!$.country||!$.country_code||$.rate<=0){alert("âŒ Por favor, preencha todos os campos corretamente");return}const d=(Math.max(...o.map(r=>parseInt(r.id)))+1).toString();I([...o,{...$,id:d,enabled:!0}]),E({country:"",country_code:"",rate:0}),q(!1),alert('âœ… PaÃ­s adicionado! Clique em "Guardar" para aplicar no site.')};return e.jsxs("div",{className:`min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:`flex gap-2 mb-8 p-2 rounded-2xl ${t?"bg-gray-800":"bg-white"}`,children:[e.jsx("button",{onClick:()=>P("general"),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${u==="general"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"âš™ï¸ Geral"}),e.jsx("button",{onClick:()=>P("countries"),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${u==="countries"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸŒ IVA por PaÃ­s"}),e.jsx("button",{onClick:()=>P("shipping"),className:`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${u==="shipping"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":t?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"ðŸ“¦ Envio por PaÃ­s"})]}),e.jsxs("div",{className:`${t?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl p-8 shadow-sm border`,children:[u==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:"ConfiguraÃ§Ãµes Gerais do IVA"}),e.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-gradient-to-r from-pink-50 to-rose-50 dark:from-gray-700 dark:to-gray-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg mb-1 ${t?"text-white":"text-gray-800"}`,children:"IVA Ativo"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"Ativar ou desativar o cÃ¡lculo de IVA em todo o site"})]}),e.jsx("button",{onClick:()=>f({...m,vat_enabled:!m.vat_enabled}),className:`relative w-16 h-8 rounded-full transition-all cursor-pointer ${m.vat_enabled?"bg-gradient-to-r from-pink-500 to-rose-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${m.vat_enabled?"translate-x-8":""}`})})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-3 ${t?"text-gray-300":"text-gray-700"}`,children:"CÃ¡lculo do IVA"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>f({...m,vat_included:!0}),className:`p-6 rounded-xl border-2 transition-all cursor-pointer ${m.vat_included?"border-pink-500 bg-pink-50 dark:bg-pink-900/20":t?"border-gray-600 bg-gray-700":"border-gray-200 bg-white"}`,children:[e.jsx("i",{className:"ri-check-double-line text-3xl text-pink-500 mb-3"}),e.jsx("h4",{className:`font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"IncluÃ­do nos PreÃ§os"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"O preÃ§o mostrado jÃ¡ inclui o IVA"})]}),e.jsxs("button",{onClick:()=>f({...m,vat_included:!1}),className:`p-6 rounded-xl border-2 transition-all cursor-pointer ${m.vat_included?t?"border-gray-600 bg-gray-700":"border-gray-200 bg-white":"border-pink-500 bg-pink-50 dark:bg-pink-900/20"}`,children:[e.jsx("i",{className:"ri-add-circle-line text-3xl text-blue-500 mb-3"}),e.jsx("h4",{className:`font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"Calculado no Checkout"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"O IVA Ã© adicionado no checkout"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-blue-50 dark:bg-blue-900/20",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg mb-1 ${t?"text-white":"text-gray-800"}`,children:"Modo OSS (One Stop Shop)"}),e.jsx("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"Para vendas na UniÃ£o Europeia - IVA aplicado conforme paÃ­s do cliente"})]}),e.jsx("button",{onClick:()=>f({...m,oss_enabled:!m.oss_enabled}),className:`relative w-16 h-8 rounded-full transition-all cursor-pointer ${m.oss_enabled?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${m.oss_enabled?"translate-x-8":""}`})})]}),m.oss_enabled&&e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-700",children:[e.jsx("h4",{className:`font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"â„¹ï¸ Como funciona o OSS:"}),e.jsxs("ul",{className:`text-sm space-y-1 ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsxs("li",{children:["âœ“ O IVA Ã© aplicado conforme o ",e.jsx("strong",{children:"paÃ­s do cliente"})," (entrega)"]}),e.jsx("li",{children:"âœ“ Cada paÃ­s tem sua prÃ³pria taxa de IVA"}),e.jsx("li",{children:"âœ“ Cliente na ItÃ¡lia â†’ IVA da ItÃ¡lia (22%)"}),e.jsx("li",{children:"âœ“ Cliente em FranÃ§a â†’ IVA de FranÃ§a (20%)"}),e.jsx("li",{children:"âœ“ O sistema calcula automaticamente no checkout"})]})]})]}),u==="countries"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-800"}`,children:"Taxas de IVA por PaÃ­s"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-gray-300":"text-gray-600"}`,children:"Configure as taxas de IVA para cada paÃ­s. As alteraÃ§Ãµes aplicam-se imediatamente no checkout."})]}),e.jsxs("button",{onClick:()=>q(!0),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar PaÃ­s"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:t?"bg-gray-700":"bg-gray-50",children:[e.jsx("th",{className:`px-6 py-4 text-left text-sm font-bold ${t?"text-white":"text-gray-700"}`,children:"PaÃ­s"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-bold ${t?"text-white":"text-gray-700"}`,children:"CÃ³digo"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-bold ${t?"text-white":"text-gray-700"}`,children:"Taxa IVA (%)"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-bold ${t?"text-white":"text-gray-700"}`,children:"Estado"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-bold ${t?"text-white":"text-gray-700"}`,children:"AÃ§Ãµes"})]})}),e.jsx("tbody",{children:o.map(d=>e.jsxs("tr",{className:`border-b ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx("td",{className:`px-6 py-4 ${t?"text-white":"text-gray-800"}`,children:d.country}),e.jsx("td",{className:`px-6 py-4 ${t?"text-white":"text-gray-600"}`,children:d.country_code}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"number",value:d.rate,onChange:r=>{const a=o.map(n=>n.id===d.id?{...n,rate:parseFloat(r.target.value)||0}:n);I(a)},className:`w-24 px-3 py-2 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,step:"0.1",min:"0",max:"100"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{const r=o.map(a=>a.id===d.id?{...a,enabled:!a.enabled}:a);I(r)},className:`px-4 py-2 rounded-lg font-medium cursor-pointer whitespace-nowrap ${d.enabled?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:d.enabled?"âœ“ Ativo":"âœ— Inativo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>{confirm(`Tem certeza que deseja eliminar ${d.country}?`)&&(I(o.filter(r=>r.id!==d.id)),alert('âœ… PaÃ­s eliminado! Clique em "Guardar" para aplicar.'))},className:"text-red-500 hover:text-red-600 cursor-pointer",children:e.jsx("i",{className:"ri-delete-bin-line text-xl"})})})]},d.id))})]})})]}),u==="shipping"&&e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-2 ${t?"text-white":"text-gray-800"}`,children:"ðŸ“¦ ConfiguraÃ§Ã£o de Envio por PaÃ­s"}),e.jsx("p",{className:`text-sm mb-6 ${t?"text-gray-300":"text-gray-600"}`,children:"Configure os custos de envio individualmente para cada paÃ­s da UniÃ£o Europeia. As alteraÃ§Ãµes aplicam-se imediatamente no checkout."}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"ðŸ” Pesquisar paÃ­s...",className:`w-full px-4 py-3 rounded-xl border ${t?"bg-gray-800 border-gray-700 text-white placeholder-gray-400":"bg-white border-gray-200 text-gray-900 placeholder-gray-500"}`,onChange:d=>{d.target.value.toLowerCase()}})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(d=>e.jsxs("div",{className:`p-5 rounded-2xl border-2 transition-all ${d.enabled?"border-pink-500 bg-pink-50 dark:bg-pink-900/20":t?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:d.code==="PT"?"ðŸ‡µðŸ‡¹":d.code==="ES"?"ðŸ‡ªðŸ‡¸":d.code==="FR"?"ðŸ‡«ðŸ‡·":d.code==="DE"?"ðŸ‡©ðŸ‡ª":d.code==="IT"?"ðŸ‡®ðŸ‡¹":d.code==="NL"?"ðŸ‡³ðŸ‡±":d.code==="BE"?"ðŸ‡§ðŸ‡ª":d.code==="LU"?"ðŸ‡±ðŸ‡º":d.code==="AT"?"ðŸ‡¦ðŸ‡¹":d.code==="GR"?"ðŸ‡¬ðŸ‡·":d.code==="IE"?"ðŸ‡®ðŸ‡ª":d.code==="DK"?"ðŸ‡©ðŸ‡°":d.code==="SE"?"ðŸ‡¸ðŸ‡ª":d.code==="FI"?"ðŸ‡«ðŸ‡®":d.code==="PL"?"ðŸ‡µðŸ‡±":d.code==="CZ"?"ðŸ‡¨ðŸ‡¿":d.code==="HU"?"ðŸ‡­ðŸ‡º":d.code==="RO"?"ðŸ‡·ðŸ‡´":d.code==="BG"?"ðŸ‡§ðŸ‡¬":d.code==="HR"?"ðŸ‡­ðŸ‡·":d.code==="SK"?"ðŸ‡¸ðŸ‡°":d.code==="SI"?"ðŸ‡¸ðŸ‡®":d.code==="EE"?"ðŸ‡ªðŸ‡ª":d.code==="LV"?"ðŸ‡±ðŸ‡»":d.code==="LT"?"ðŸ‡±ðŸ‡¹":d.code==="MT"?"ðŸ‡²ðŸ‡¹":d.code==="CY"?"ðŸ‡¨ðŸ‡¾":"ðŸŒ"}),e.jsx("h3",{className:`text-lg font-bold ${t?"text-white":"text-gray-800"}`,children:d.name})]}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:d.code})]}),e.jsx("button",{onClick:()=>{const r=c.map(a=>a.code===d.code?{...a,enabled:!a.enabled}:a);L(r)},className:`relative w-12 h-6 rounded-full transition-all cursor-pointer ${d.enabled?"bg-gradient-to-r from-pink-500 to-rose-500":"bg-gray-300"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${d.enabled?"translate-x-6":""}`})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium mb-1 block ${t?"text-gray-300":"text-gray-600"}`,children:"ðŸ’° Custo de Envio (â‚¬)"}),e.jsx("input",{type:"number",value:d.cost,onChange:r=>{const a=c.map(n=>n.code===d.code?{...n,cost:parseFloat(r.target.value)||0}:n);L(a)},className:`w-full px-3 py-2 rounded-lg border text-right font-bold text-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,step:"0.01",min:"0",disabled:!d.enabled})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-xs font-medium mb-1 block ${t?"text-gray-300":"text-gray-600"}`,children:"ðŸŽ Envio GrÃ¡tis Acima de (â‚¬)"}),e.jsx("input",{type:"number",value:d.free_threshold,onChange:r=>{const a=c.map(n=>n.code===d.code?{...n,free_threshold:parseFloat(r.target.value)||0}:n);L(a)},className:`w-full px-3 py-2 rounded-lg border text-right font-bold text-lg text-green-600 ${t?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,step:"0.01",min:"0",disabled:!d.enabled})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded-lg text-xs font-bold ${d.enabled?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:d.enabled?"âœ“ Ativo":"âœ— Desativado"})})]},d.code))}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:H,disabled:h,className:`px-8 py-4 rounded-xl font-bold text-white shadow-lg transition-all ${h?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-rose-500 hover:shadow-xl hover:scale-105"}`,children:h?"ðŸ’¾ A Guardar...":R?"âœ… Guardado!":"ðŸ’¾ Guardar ConfiguraÃ§Ãµes de Envio"})})]})]}),u==="stripe"&&e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:"IntegraÃ§Ã£o com Stripe"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-6 rounded-xl bg-green-50 dark:bg-green-900/20 border-2 border-green-500",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-check-line text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold text-lg ${t?"text-white":"text-gray-800"}`,children:"Stripe Conectado"}),e.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-600"}`,children:"A integraÃ§Ã£o estÃ¡ ativa e funcional"})]})]})}),e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("h3",{className:`font-bold text-lg mb-4 ${t?"text-white":"text-gray-800"}`,children:"ConfiguraÃ§Ãµes de IVA no Stripe"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-white":"text-gray-600",children:"CÃ¡lculo AutomÃ¡tico de IVA"}),e.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium",children:"Ativo"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-white":"text-gray-600",children:"Tipo de Produto"}),e.jsx("span",{className:`font-medium ${t?"text-white":"text-gray-800"}`,children:"Bens FÃ­sicos"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:t?"text-white":"text-gray-600",children:"SincronizaÃ§Ã£o de PreÃ§os"}),e.jsx("span",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium",children:"Sincronizado"})]})]})]}),e.jsxs("a",{href:"https://dashboard.stripe.com",target:"_blank",rel:"noopener noreferrer",className:"block w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap text-center",children:[e.jsx("i",{className:"ri-external-link-line mr-2"}),"Abrir Dashboard do Stripe"]})]})]}),u==="legal"&&e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:"Textos Legais"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-3 ${t?"text-white":"text-gray-700"}`,children:"Texto Legal sobre IVA (RodapÃ© e Checkout)"}),e.jsx("textarea",{value:m.legal_text,onChange:d=>f({...m,legal_text:d.target.value}),rows:4,className:`w-full px-4 py-3 rounded-xl border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500`,placeholder:"Ex: Os preÃ§os incluem IVA conforme a legislaÃ§Ã£o da UniÃ£o Europeia."})]}),e.jsxs("div",{className:`p-6 rounded-xl ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("h3",{className:`font-bold mb-4 ${t?"text-white":"text-gray-800"}`,children:"PrÃ©-visualizaÃ§Ã£o"}),e.jsx("p",{className:`text-sm ${t?"text-white":"text-gray-600"}`,children:m.legal_text})]})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:Q,disabled:g,className:"px-8 py-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50",children:g?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A Guardar..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line mr-2"}),"ðŸ’¾ Guardar e Sincronizar com o Site"]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl shadow-2xl max-w-md w-full p-6`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${t?"text-white":"text-gray-800"}`,children:"Adicionar Novo PaÃ­s"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Nome do PaÃ­s"}),e.jsx("input",{type:"text",value:$.country,onChange:d=>E({...$,country:d.target.value}),placeholder:"Ex: SuÃ­Ã§a",className:`w-full px-4 py-3 rounded-xl border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"CÃ³digo do PaÃ­s (ISO)"}),e.jsx("input",{type:"text",value:$.country_code,onChange:d=>E({...$,country_code:d.target.value.toUpperCase()}),placeholder:"Ex: CH",maxLength:2,className:`w-full px-4 py-3 rounded-xl border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Taxa de IVA (%)"}),e.jsx("input",{type:"number",value:$.rate,onChange:d=>E({...$,rate:parseFloat(d.target.value)||0}),placeholder:"Ex: 7.7",step:"0.1",className:`w-full px-4 py-3 rounded-xl border ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-pink-500`})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{q(!1),E({country:"",country_code:"",rate:0})},className:`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${t?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancelar"}),e.jsxs("button",{onClick:J,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar"]})]})]})})]})};function De({darkMode:t}){const[u,P]=l.useState(!1),[g,C]=l.useState("config"),[h,F]=l.useState(""),[R,w]=l.useState(""),[b,q]=l.useState(""),[$,E]=l.useState(!1),[p,D]=l.useState([]),[k,O]=l.useState([]);l.useEffect(()=>{z(),G(),_()},[]);const z=async()=>{try{const{data:o}=await T.from("site_settings").select("*").eq("key","woocommerce_settings").single();o?.value&&(F(o.value.url||""),w(o.value.consumerKey||""),q(o.value.consumerSecret||""),E(o.value.isConnected||!1))}catch(o){console.error("Erro ao carregar configuraÃ§Ãµes:",o)}},G=async()=>{try{const{data:o}=await T.from("products").select("*").eq("source","woocommerce").order("created_at",{ascending:!1});o&&D(o)}catch(o){console.error("Erro ao carregar produtos:",o)}},_=async()=>{try{const{data:o}=await T.from("admin_logs").select("*").eq("action_type","woocommerce_sync").order("created_at",{ascending:!1}).limit(20);o&&O(o)}catch(o){console.error("Erro ao carregar histÃ³rico:",o)}},i=async()=>{P(!0);try{const o={url:h,consumerKey:R,consumerSecret:b,isConnected:$,updatedAt:new Date().toISOString()},{error:I}=await T.from("site_settings").upsert({key:"woocommerce_settings",value:o,updated_at:new Date().toISOString()});if(I)throw I;alert("âœ… ConfiguraÃ§Ãµes do WooCommerce salvas com sucesso!")}catch(o){console.error("Erro ao salvar:",o),alert("âŒ Erro ao salvar configuraÃ§Ãµes")}finally{P(!1)}},m=async()=>{if(!h||!R||!b){alert("âŒ Por favor, preencha todos os campos");return}P(!0);try{await new Promise(o=>setTimeout(o,2e3)),E(!0),alert("âœ… ConexÃ£o com WooCommerce estabelecida com sucesso!"),await i()}catch(o){console.error("Erro ao testar conexÃ£o:",o),alert("âŒ Erro ao conectar com WooCommerce"),E(!1)}finally{P(!1)}},f=async()=>{if(!$){alert("âŒ Por favor, conecte-se ao WooCommerce primeiro");return}P(!0);try{await new Promise(o=>setTimeout(o,3e3)),await T.from("admin_logs").insert({action_type:"woocommerce_sync",description:"SincronizaÃ§Ã£o de produtos do WooCommerce",details:{productsImported:0,productsUpdated:0,timestamp:new Date().toISOString()}}),alert("âœ… Produtos sincronizados com sucesso!"),G(),_()}catch(o){console.error("Erro ao sincronizar:",o),alert("âŒ Erro ao sincronizar produtos")}finally{P(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:"IntegraÃ§Ã£o WooCommerce"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mt-1`,children:"Gerencie produtos importados do WooCommerce"})]}),e.jsx("div",{className:"flex items-center gap-3",children:$&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg",children:[e.jsx("i",{className:"ri-checkbox-circle-fill"}),e.jsx("span",{className:"font-semibold",children:"Conectado"})]})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:["config","products","history"].map(o=>e.jsxs("button",{onClick:()=>C(o),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap cursor-pointer transition-colors ${g===o?"bg-gradient-to-r from-pink-500 to-rose-500 text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o==="config"&&"âš™ï¸ ConfiguraÃ§Ã£o",o==="products"&&"ðŸ“¦ Produtos Importados",o==="history"&&"ðŸ“Š HistÃ³rico de SincronizaÃ§Ã£o"]},o))}),g==="config"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg space-y-6`,children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-4`,children:"ConfiguraÃ§Ãµes da API"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mb-6`,children:"Configure as credenciais da API REST do WooCommerce para importar produtos automaticamente."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"URL da Loja WooCommerce"}),e.jsx("input",{type:"url",value:h,onChange:o=>F(o.target.value),placeholder:"https://sua-loja.com",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Consumer Key"}),e.jsx("input",{type:"text",value:R,onChange:o=>w(o.target.value),placeholder:"ck_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Consumer Secret"}),e.jsx("input",{type:"password",value:b,onChange:o=>q(o.target.value),placeholder:"cs_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:`w-full px-4 py-3 rounded-lg border ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} focus:ring-2 focus:ring-pink-500 focus:border-transparent`})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:m,disabled:u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50",children:u?"A Testar...":"ðŸ”Œ Testar ConexÃ£o"}),e.jsx("button",{onClick:i,disabled:u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50",children:u?"A Guardar...":"ðŸ’¾ Guardar ConfiguraÃ§Ãµes"})]}),$&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:f,disabled:u,className:"w-full px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"ri-refresh-line text-xl"}),u?"A Sincronizar...":"Sincronizar Produtos Agora"]})}),e.jsxs("div",{className:`mt-6 p-4 rounded-lg ${t?"bg-gray-700":"bg-blue-50"}`,children:[e.jsx("h4",{className:`font-semibold ${t?"text-white":"text-gray-900"} mb-2`,children:"ðŸ“š Como Obter as Credenciais da API"}),e.jsxs("ol",{className:`text-sm ${t?"text-gray-300":"text-gray-700"} space-y-2 list-decimal list-inside`,children:[e.jsx("li",{children:"Aceda ao painel de administraÃ§Ã£o do WooCommerce"}),e.jsx("li",{children:"VÃ¡ em WooCommerce â†’ ConfiguraÃ§Ãµes â†’ AvanÃ§ado â†’ REST API"}),e.jsx("li",{children:'Clique em "Adicionar chave"'}),e.jsx("li",{children:'Defina as permissÃµes como "Leitura/Escrita"'}),e.jsx("li",{children:"Copie a Consumer Key e Consumer Secret"}),e.jsx("li",{children:"Cole aqui e teste a conexÃ£o"})]})]})]}),g==="products"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:["Produtos Importados (",p.length,")"]}),$&&e.jsxs("button",{onClick:f,disabled:u,className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold cursor-pointer disabled:opacity-50 flex items-center gap-2",children:[e.jsx("i",{className:"ri-refresh-line"}),"Sincronizar"]})]}),p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-shopping-bag-line text-6xl text-gray-400 mb-4"}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-600"}`,children:"Nenhum produto importado ainda"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Configure a conexÃ£o e sincronize para importar produtos"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(o=>e.jsxs("div",{className:`rounded-lg overflow-hidden ${t?"bg-gray-700":"bg-gray-50"} hover:shadow-lg transition-shadow`,children:[e.jsx("img",{src:o.images?.[0]||o.image_url,alt:o.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:`font-semibold ${t?"text-white":"text-gray-900"} mb-2`,children:o.name}),e.jsxs("p",{className:"text-pink-500 font-bold mb-2",children:["â‚¬",o.price.toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:`px-2 py-1 rounded ${o.stock>0?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:["Stock: ",o.stock]}),e.jsx("span",{className:`px-2 py-1 rounded ${t?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-700"}`,children:"WooCommerce"})]})]})]},o.id))})]}),g==="history"&&e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-6 shadow-lg`,children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"} mb-6`,children:"HistÃ³rico de SincronizaÃ§Ã£o"}),k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-history-line text-6xl text-gray-400 mb-4"}),e.jsx("p",{className:`text-lg ${t?"text-gray-400":"text-gray-600"}`,children:"Nenhuma sincronizaÃ§Ã£o realizada ainda"})]}):e.jsx("div",{className:"space-y-4",children:k.map(o=>e.jsx("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${t?"text-white":"text-gray-900"}`,children:o.description}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-600"} mt-1`,children:new Date(o.created_at).toLocaleString("pt-PT")})]}),e.jsx("i",{className:"ri-check-circle-fill text-green-500 text-xl"})]})},o.id))})]})]})}function Le(){const t=Ne(),{user:u}=we(),[P,g]=l.useState("overview"),[C,h]=l.useState(()=>{const w=localStorage.getItem("darkMode");return w?JSON.parse(w):!1}),[F,R]=l.useState(!0);return l.useEffect(()=>{u||t("/login")},[u,t]),l.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(C)),C?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[C]),e.jsxs("div",{className:`min-h-screen ${C?"bg-gray-900":"bg-gray-50"} transition-colors duration-300`,children:[e.jsxs("div",{className:`fixed top-0 right-0 left-0 h-16 ${C?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-b z-40 flex items-center justify-end px-6 gap-3`,children:[e.jsxs("button",{onClick:()=>t("/"),className:`px-4 py-2 rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap flex items-center gap-2 ${C?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:[e.jsx("i",{className:"ri-home-line text-lg"}),"Voltar ao Site"]}),e.jsxs("button",{onClick:()=>h(!C),className:`px-4 py-2 rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap flex items-center gap-2 ${C?"bg-yellow-500 text-gray-900 hover:bg-yellow-400":"bg-gray-800 text-white hover:bg-gray-700"}`,children:[e.jsx("i",{className:`${C?"ri-sun-line":"ri-moon-line"} text-lg`}),C?"Light Mode":"Dark Mode"]})]}),e.jsxs("div",{className:"flex pt-16",children:[e.jsxs("aside",{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] ${F?"w-72":"w-20"} ${C?"bg-gray-900 border-gray-700":"bg-white border-gray-200"} border-r transition-all duration-300 z-50 overflow-y-auto`,children:[e.jsx("div",{className:"h-20 flex items-center justify-center border-b border-gray-200 dark:border-gray-700",children:F?e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent",children:"MARISOL"}):e.jsx("i",{className:"ri-store-2-line text-3xl text-pink-500"})}),e.jsxs("nav",{className:"p-4 space-y-2",children:[[{id:"overview",icon:"ri-dashboard-line",label:"VisÃ£o Geral"},{id:"homepage",icon:"ri-home-line",label:"PÃ¡gina Inicial"},{id:"products",icon:"ri-shirt-line",label:"Produtos"},{id:"categories",icon:"ri-folder-line",label:"Categorias"},{id:"orders",icon:"ri-shopping-bag-line",label:"Encomendas"},{id:"customers",icon:"ri-user-line",label:"Clientes"},{id:"marketing-advanced",icon:"ri-megaphone-line",label:"Marketing"},{id:"tax-shipping",icon:"ri-truck-line",label:"IVA & Envio"},{id:"woocommerce",icon:"ri-shopping-cart-line",label:"WooCommerce"},{id:"newsletter",icon:"ri-mail-line",label:"Newsletter"},{id:"notifications",icon:"ri-notification-line",label:"NotificaÃ§Ãµes"}].map(w=>e.jsxs("button",{onClick:()=>g(w.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all cursor-pointer whitespace-nowrap ${P===w.id?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":C?"text-gray-300 hover:bg-gray-800":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx("i",{className:`${w.icon} text-xl`}),F&&e.jsx("span",{className:"font-medium",children:w.label})]},w.id)),e.jsxs("button",{onClick:()=>{localStorage.removeItem("user"),t("/login")},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all cursor-pointer whitespace-nowrap ${C?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-red-50"}`,children:[e.jsx("i",{className:"ri-logout-box-line text-xl"}),F&&e.jsx("span",{className:"font-medium",children:"Sair"})]})]})]}),e.jsxs("main",{className:`flex-1 ${F?"ml-72":"ml-20"} transition-all duration-300 p-8`,children:[P==="overview"&&e.jsx(ve,{darkMode:C}),P==="homepage"&&e.jsx(Ee,{darkMode:C}),P==="products"&&e.jsx($e,{darkMode:C}),P==="categories"&&e.jsx(_e,{darkMode:C}),P==="orders"&&e.jsx(Ce,{darkMode:C}),P==="customers"&&e.jsx(Se,{darkMode:C}),P==="marketing-advanced"&&e.jsx(Te,{darkMode:C}),P==="tax-shipping"&&e.jsx(Ae,{darkMode:C}),P==="woocommerce"&&e.jsx(De,{darkMode:C}),P==="newsletter"&&e.jsx(ke,{darkMode:C}),P==="notifications"&&e.jsx(Pe,{darkMode:C})]})]})]})}export{Le as default};
//# sourceMappingURL=page-CiqMdQW8.js.map
