{"version":3,"file":"page-CiqMdQW8.js","sources":["../../src/pages/admin/components/OverviewDashboard.tsx","../../src/pages/admin/components/ProductsManagement.tsx","../../src/pages/admin/components/CategoriesManagement.tsx","../../src/pages/admin/components/OrdersManagement.tsx","../../src/pages/admin/components/CustomersManagement.tsx","../../src/pages/admin/components/HomePageManagement.tsx","../../src/pages/admin/components/MarketingAdvanced.tsx","../../src/pages/admin/components/NewsletterManagement.tsx","../../src/pages/admin/components/NotificationsManagement.tsx","../../src/pages/admin/components/TaxShippingManagement.tsx","../../src/pages/admin/components/WooCommerceManagement.tsx","../../src/pages/admin/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface DashboardStats {\n  // Vendas\n  salesToday: number;\n  salesWeek: number;\n  salesMonth: number;\n  salesTodayChange: number;\n  salesWeekChange: number;\n  salesMonthChange: number;\n  \n  // Receita\n  revenueTotal: number;\n  revenueChange: number;\n  \n  // Encomendas\n  ordersTotal: number;\n  ordersChange: number;\n  \n  // Ticket m√©dio\n  averageTicket: number;\n  averageTicketChange: number;\n  \n  // Lucro\n  profit: number;\n  profitChange: number;\n  \n  // IVA\n  ivaCollected: number;\n  ivaChange: number;\n  \n  // Envios\n  pendingShipments: number;\n  \n  // Estado das encomendas\n  pendingOrders: number;\n  processingOrders: number;\n  shippedOrders: number;\n  deliveredOrders: number;\n  cancelledOrders: number;\n  \n  // Clientes\n  totalCustomers: number;\n  newCustomersToday: number;\n  newCustomersWeek: number;\n  newCustomersMonth: number;\n  returningCustomers: number;\n  \n  // Produtos\n  totalProducts: number;\n  outOfStockProducts: number;\n  lowStockProducts: number;\n  promotionProducts: number;\n  \n  // Tr√°fego\n  totalVisits: number;\n  uniqueVisitors: number;\n  mostViewedProduct: string;\n  \n  // Newsletter\n  newsletterSubscribers: number;\n  newSubscribersWeek: number;\n  \n  // IVA/Envio\n  ivaActive: boolean;\n  freeShippingActive: boolean;\n  freeShippingOrders: number;\n  \n  // Notifica√ß√µes\n  unreadMessages: number;\n  newNewsletterSubs: number;\n  stockAlerts: number;\n  \n  // Sistema\n  stripeStatus: boolean;\n  supabaseStatus: boolean;\n  lastLogin: string;\n}\n\ninterface RecentCustomer {\n  id: string;\n  full_name: string;\n  email: string;\n  created_at: string;\n}\n\ninterface BestSellingProduct {\n  id: string;\n  name: string;\n  sales: number;\n  image_url: string;\n}\n\ninterface StockAlert {\n  id: string;\n  name: string;\n  stock: number;\n}\n\nexport default function OverviewDashboard({ darkMode }: { darkMode: boolean }) {\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState<DashboardStats>({\n    salesToday: 0,\n    salesWeek: 0,\n    salesMonth: 0,\n    salesTodayChange: 0,\n    salesWeekChange: 0,\n    salesMonthChange: 0,\n    revenueTotal: 0,\n    revenueChange: 0,\n    ordersTotal: 0,\n    ordersChange: 0,\n    averageTicket: 0,\n    averageTicketChange: 0,\n    profit: 0,\n    profitChange: 0,\n    ivaCollected: 0,\n    ivaChange: 0,\n    pendingShipments: 0,\n    pendingOrders: 0,\n    processingOrders: 0,\n    shippedOrders: 0,\n    deliveredOrders: 0,\n    cancelledOrders: 0,\n    totalCustomers: 0,\n    newCustomersToday: 0,\n    newCustomersWeek: 0,\n    newCustomersMonth: 0,\n    returningCustomers: 0,\n    totalProducts: 0,\n    outOfStockProducts: 0,\n    lowStockProducts: 0,\n    promotionProducts: 0,\n    totalVisits: 0,\n    uniqueVisitors: 0,\n    mostViewedProduct: '',\n    newsletterSubscribers: 0,\n    newSubscribersWeek: 0,\n    ivaActive: false,\n    freeShippingActive: false,\n    freeShippingOrders: 0,\n    unreadMessages: 0,\n    newNewsletterSubs: 0,\n    stockAlerts: 0,\n    stripeStatus: true,\n    supabaseStatus: true,\n    lastLogin: new Date().toISOString()\n  });\n\n  const [recentCustomers, setRecentCustomers] = useState<RecentCustomer[]>([]);\n  const [bestSellingProducts, setBestSellingProducts] = useState<BestSellingProduct[]>([]);\n  const [stockAlerts, setStockAlerts] = useState<StockAlert[]>([]);\n\n  useEffect(() => {\n    loadDashboardData();\n  }, []);\n\n  const loadDashboardData = async () => {\n    try {\n      setLoading(true);\n\n      // Carregar encomendas\n      const { data: orders } = await supabase\n        .from('orders')\n        .select('*');\n\n      const now = new Date();\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n      const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n      const lastWeekAgo = new Date(now.getTime() - 14 * 24 * 60 * 60 * 1000);\n      const lastMonthAgo = new Date(now.getTime() - 60 * 24 * 60 * 60 * 1000);\n\n      // Vendas\n      const salesToday = orders?.filter(o => new Date(o.created_at) >= today).reduce((sum, o) => sum + parseFloat(o.total_amount || 0), 0) || 0;\n      const salesWeek = orders?.filter(o => new Date(o.created_at) >= weekAgo).reduce((sum, o) => sum + parseFloat(o.total_amount || 0), 0) || 0;\n      const salesMonth = orders?.filter(o => new Date(o.created_at) >= monthAgo).reduce((sum, o) => sum + parseFloat(o.total_amount || 0), 0) || 0;\n      \n      const salesLastWeek = orders?.filter(o => new Date(o.created_at) >= lastWeekAgo && new Date(o.created_at) < weekAgo).reduce((sum, o) => sum + parseFloat(o.total_amount || 0), 0) || 1;\n      const salesLastMonth = orders?.filter(o => new Date(o.created_at) >= lastMonthAgo && new Date(o.created_at) < monthAgo).reduce((sum, o) => sum + parseFloat(o.total_amount || 0), 0) || 1;\n\n      // Receita total\n      const revenueTotal = orders?.reduce((sum, o) => sum + parseFloat(o.total_amount || 0), 0) || 0;\n\n      // Encomendas\n      const ordersTotal = orders?.length || 0;\n      const ordersLastMonth = orders?.filter(o => new Date(o.created_at) >= lastMonthAgo && new Date(o.created_at) < monthAgo).length || 1;\n\n      // Ticket m√©dio\n      const averageTicket = ordersTotal > 0 ? revenueTotal / ordersTotal : 0;\n\n      // Estado das encomendas\n      const pendingOrders = orders?.filter(o => o.status === 'pending').length || 0;\n      const processingOrders = orders?.filter(o => o.status === 'processing').length || 0;\n      const shippedOrders = orders?.filter(o => o.status === 'shipped').length || 0;\n      const deliveredOrders = orders?.filter(o => o.status === 'delivered').length || 0;\n      const cancelledOrders = orders?.filter(o => o.status === 'cancelled').length || 0;\n\n      // Carregar clientes\n      const { data: customers } = await supabase\n        .from('customers')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      const totalCustomers = customers?.length || 0;\n      const newCustomersToday = customers?.filter(c => new Date(c.created_at) >= today).length || 0;\n      const newCustomersWeek = customers?.filter(c => new Date(c.created_at) >= weekAgo).length || 0;\n      const newCustomersMonth = customers?.filter(c => new Date(c.created_at) >= monthAgo).length || 0;\n\n      // Clientes recentes\n      setRecentCustomers(customers?.slice(0, 5) || []);\n\n      // Carregar produtos\n      const { data: products } = await supabase\n        .from('products')\n        .select('*');\n\n      const totalProducts = products?.filter(p => p.is_active).length || 0;\n      const outOfStockProducts = products?.filter(p => p.stock === 0).length || 0;\n      const lowStockProducts = products?.filter(p => p.stock > 0 && p.stock <= 10).length || 0;\n      const promotionProducts = products?.filter(p => p.is_promotion).length || 0;\n\n      // Alertas de stock\n      const alerts = products?.filter(p => p.stock <= 10).map(p => ({\n        id: p.id,\n        name: p.name,\n        stock: p.stock\n      })) || [];\n      setStockAlerts(alerts.slice(0, 5));\n\n      // Produtos mais vendidos (simula√ß√£o)\n      setBestSellingProducts(\n        products?.slice(0, 5).map(p => ({\n          id: p.id,\n          name: p.name,\n          sales: Math.floor(Math.random() * 50) + 10,\n          image_url: p.image_url\n        })) || []\n      );\n\n      // Carregar newsletter\n      const { data: newsletter } = await supabase\n        .from('newsletter_subscribers')\n        .select('*');\n\n      const newsletterSubscribers = newsletter?.length || 0;\n      const newSubscribersWeek = newsletter?.filter(n => new Date(n.created_at) >= weekAgo).length || 0;\n\n      // Carregar notifica√ß√µes\n      const { data: notifications } = await supabase\n        .from('notifications')\n        .select('*')\n        .eq('is_read', false);\n\n      const unreadMessages = notifications?.filter(n => n.type === 'message').length || 0;\n\n      // Carregar configura√ß√µes\n      const { data: settings } = await supabase\n        .from('site_settings')\n        .select('*')\n        .single();\n\n      const ivaActive = settings?.vat_enabled || false;\n      const freeShippingActive = settings?.free_shipping_enabled || false;\n\n      // Calcular IVA arrecadado (17% do total)\n      const ivaCollected = revenueTotal * 0.17;\n\n      setStats({\n        salesToday,\n        salesWeek,\n        salesMonth,\n        salesTodayChange: ((salesToday / (salesLastWeek / 7)) - 1) * 100,\n        salesWeekChange: ((salesWeek / salesLastWeek) - 1) * 100,\n        salesMonthChange: ((salesMonth / salesLastMonth) - 1) * 100,\n        revenueTotal,\n        revenueChange: ((salesMonth / salesLastMonth) - 1) * 100,\n        ordersTotal,\n        ordersChange: ((ordersTotal / ordersLastMonth) - 1) * 100,\n        averageTicket,\n        averageTicketChange: 5.2,\n        profit: revenueTotal * 0.3, // 30% de margem\n        profitChange: 8.1,\n        ivaCollected,\n        ivaChange: ((salesMonth / salesLastMonth) - 1) * 100,\n        pendingShipments: pendingOrders + processingOrders,\n        pendingOrders,\n        processingOrders,\n        shippedOrders,\n        deliveredOrders,\n        cancelledOrders,\n        totalCustomers,\n        newCustomersToday,\n        newCustomersWeek,\n        newCustomersMonth,\n        returningCustomers: Math.floor(totalCustomers * 0.4),\n        totalProducts,\n        outOfStockProducts,\n        lowStockProducts,\n        promotionProducts,\n        totalVisits: Math.floor(ordersTotal * 15),\n        uniqueVisitors: Math.floor(ordersTotal * 12),\n        mostViewedProduct: products?.[0]?.name || 'N/A',\n        newsletterSubscribers,\n        newSubscribersWeek,\n        ivaActive,\n        freeShippingActive,\n        freeShippingOrders: orders?.filter(o => parseFloat(o.total_amount) >= 50).length || 0,\n        unreadMessages,\n        newNewsletterSubs: newSubscribersWeek,\n        stockAlerts: lowStockProducts + outOfStockProducts,\n        stripeStatus: true,\n        supabaseStatus: true,\n        lastLogin: new Date().toISOString()\n      });\n\n    } catch (error) {\n      console.error('Erro ao carregar dashboard:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  const StatCard = ({ icon, title, value, change, color }: any) => (\n    <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className={`w-12 h-12 rounded-lg ${color} flex items-center justify-center`}>\n          <i className={`${icon} text-white text-2xl`}></i>\n        </div>\n        {change !== undefined && (\n          <div className={`flex items-center gap-1 text-sm font-semibold ${change >= 0 ? 'text-green-500' : 'text-red-500'}`}>\n            <i className={`${change >= 0 ? 'ri-arrow-up-line' : 'ri-arrow-down-line'}`}></i>\n            {Math.abs(change).toFixed(1)}%\n          </div>\n        )}\n      </div>\n      <h3 className={`text-sm font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n        {title}\n      </h3>\n      <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n        {value}\n      </p>\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n          Vis√£o Geral\n        </h1>\n        <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n          Dashboard completo da Marisol\n        </p>\n      </div>\n\n      {/* 1Ô∏è‚É£ KPIs PRINCIPAIS */}\n      <div>\n        <h2 className={`text-xl font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n          üìä Indicadores Principais\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          <StatCard\n            icon=\"ri-line-chart-line\"\n            title=\"Vendas Hoje\"\n            value={`‚Ç¨${stats.salesToday.toFixed(2)}`}\n            change={stats.salesTodayChange}\n            color=\"bg-gradient-to-br from-blue-500 to-blue-600\"\n          />\n          <StatCard\n            icon=\"ri-calendar-line\"\n            title=\"Vendas Esta Semana\"\n            value={`‚Ç¨${stats.salesWeek.toFixed(2)}`}\n            change={stats.salesWeekChange}\n            color=\"bg-gradient-to-br from-purple-500 to-purple-600\"\n          />\n          <StatCard\n            icon=\"ri-calendar-2-line\"\n            title=\"Vendas Este M√™s\"\n            value={`‚Ç¨${stats.salesMonth.toFixed(2)}`}\n            change={stats.salesMonthChange}\n            color=\"bg-gradient-to-br from-pink-500 to-pink-600\"\n          />\n          <StatCard\n            icon=\"ri-money-euro-circle-line\"\n            title=\"Receita Total\"\n            value={`‚Ç¨${stats.revenueTotal.toFixed(2)}`}\n            change={stats.revenueChange}\n            color=\"bg-gradient-to-br from-green-500 to-green-600\"\n          />\n        </div>\n      </div>\n\n      {/* Segunda linha de KPIs */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <StatCard\n          icon=\"ri-shopping-bag-line\"\n          title=\"Total de Encomendas\"\n          value={stats.ordersTotal}\n          change={stats.ordersChange}\n          color=\"bg-gradient-to-br from-orange-500 to-orange-600\"\n        />\n        <StatCard\n          icon=\"ri-price-tag-3-line\"\n          title=\"Ticket M√©dio\"\n          value={`‚Ç¨${stats.averageTicket.toFixed(2)}`}\n          change={stats.averageTicketChange}\n          color=\"bg-gradient-to-br from-teal-500 to-teal-600\"\n        />\n        <StatCard\n          icon=\"ri-line-chart-fill\"\n          title=\"Lucro Estimado\"\n          value={`‚Ç¨${stats.profit.toFixed(2)}`}\n          change={stats.profitChange}\n          color=\"bg-gradient-to-br from-emerald-500 to-emerald-600\"\n        />\n        <StatCard\n          icon=\"ri-file-text-line\"\n          title=\"IVA Arrecadado\"\n          value={`‚Ç¨${stats.ivaCollected.toFixed(2)}`}\n          change={stats.ivaChange}\n          color=\"bg-gradient-to-br from-indigo-500 to-indigo-600\"\n        />\n      </div>\n\n      {/* 2Ô∏è‚É£ ESTADO DAS ENCOMENDAS */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n        <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n          üì¶ Estado das Encomendas\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n          <div className=\"text-center p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800\">\n            <div className=\"text-3xl font-bold text-yellow-600 dark:text-yellow-400 mb-2\">\n              {stats.pendingOrders}\n            </div>\n            <div className=\"text-sm text-yellow-700 dark:text-yellow-300 font-medium\">\n              Pendentes\n            </div>\n            <button \n              onClick={() => window.location.href = '/admin?tab=encomendas&filter=pending'}\n              className=\"mt-3 text-xs text-yellow-600 dark:text-yellow-400 hover:underline\"\n            >\n              Ver detalhes ‚Üí\n            </button>\n          </div>\n\n          <div className=\"text-center p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800\">\n            <div className=\"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2\">\n              {stats.processingOrders}\n            </div>\n            <div className=\"text-sm text-blue-700 dark:text-blue-300 font-medium\">\n              Em Processamento\n            </div>\n            <button \n              onClick={() => window.location.href = '/admin?tab=encomendas&filter=processing'}\n              className=\"mt-3 text-xs text-blue-600 dark:text-blue-400 hover:underline\"\n            >\n              Ver detalhes ‚Üí\n            </button>\n          </div>\n\n          <div className=\"text-center p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800\">\n            <div className=\"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-2\">\n              {stats.shippedOrders}\n            </div>\n            <div className=\"text-sm text-purple-700 dark:text-purple-300 font-medium\">\n              Enviadas\n            </div>\n            <button \n              onClick={() => window.location.href = '/admin?tab=encomendas&filter=shipped'}\n              className=\"mt-3 text-xs text-purple-600 dark:text-purple-400 hover:underline\"\n            >\n              Ver detalhes ‚Üí\n            </button>\n          </div>\n\n          <div className=\"text-center p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800\">\n            <div className=\"text-3xl font-bold text-green-600 dark:text-green-400 mb-2\">\n              {stats.deliveredOrders}\n            </div>\n            <div className=\"text-sm text-green-700 dark:text-green-300 font-medium\">\n              Entregues\n            </div>\n            <button \n              onClick={() => window.location.href = '/admin?tab=encomendas&filter=delivered'}\n              className=\"mt-3 text-xs text-green-600 dark:text-green-400 hover:underline\"\n            >\n              Ver detalhes ‚Üí\n            </button>\n          </div>\n\n          <div className=\"text-center p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800\">\n            <div className=\"text-3xl font-bold text-red-600 dark:text-red-400 mb-2\">\n              {stats.cancelledOrders}\n            </div>\n            <div className=\"text-sm text-red-700 dark:text-red-300 font-medium\">\n              Canceladas\n            </div>\n            <button \n              onClick={() => window.location.href = '/admin?tab=encomendas&filter=cancelled'}\n              className=\"mt-3 text-xs text-red-600 dark:text-red-400 hover:underline\"\n            >\n              Ver detalhes ‚Üí\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* 3Ô∏è‚É£ CLIENTES + 4Ô∏è‚É£ PRODUTOS */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Clientes */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üë• Clientes\n          </h2>\n          <div className=\"space-y-4 mb-6\">\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-pink-50 dark:bg-pink-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-pink-300' : 'text-pink-700'}`}>\n                Total de Clientes\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-pink-400' : 'text-pink-600'}`}>\n                {stats.totalCustomers}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-blue-300' : 'text-blue-700'}`}>\n                Novos Hoje\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-blue-400' : 'text-blue-600'}`}>\n                {stats.newCustomersToday}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-purple-300' : 'text-purple-700'}`}>\n                Novos Esta Semana\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-purple-400' : 'text-purple-600'}`}>\n                {stats.newCustomersWeek}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-green-50 dark:bg-green-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-green-300' : 'text-green-700'}`}>\n                Clientes Recorrentes\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-green-400' : 'text-green-600'}`}>\n                {stats.returningCustomers}\n              </span>\n            </div>\n          </div>\n\n          <div>\n            <h3 className={`text-sm font-semibold mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              √öltimos Clientes Registados\n            </h3>\n            <div className=\"space-y-2\">\n              {recentCustomers.map(customer => (\n                <div\n                  key={customer.id}\n                  className={`flex items-center justify-between p-3 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'} hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-colors cursor-pointer`}\n                  onClick={() => window.location.href = '/admin?tab=clientes'}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-semibold\">\n                      {customer.full_name?.charAt(0) || 'C'}\n                    </div>\n                    <div>\n                      <div className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                        {customer.full_name || 'Cliente'}\n                      </div>\n                      <div className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                        {customer.email}\n                      </div>\n                    </div>\n                  </div>\n                  <i className=\"ri-arrow-right-s-line text-gray-400\"></i>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Produtos */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üõç Produtos\n          </h2>\n          <div className=\"space-y-4 mb-6\">\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-blue-300' : 'text-blue-700'}`}>\n                Produtos Ativos\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-blue-400' : 'text-blue-600'}`}>\n                {stats.totalProducts}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-red-50 dark:bg-red-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-red-300' : 'text-red-700'}`}>\n                Produtos Esgotados\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-red-400' : 'text-red-600'}`}>\n                {stats.outOfStockProducts}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-orange-300' : 'text-orange-700'}`}>\n                Stock Baixo\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-orange-400' : 'text-orange-600'}`}>\n                {stats.lowStockProducts}\n              </span>\n            </div>\n            <div className=\"flex items-center justify-between p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20\">\n              <span className={`font-medium ${darkMode ? 'text-purple-300' : 'text-purple-700'}`}>\n                Em Promo√ß√£o\n              </span>\n              <span className={`text-xl font-bold ${darkMode ? 'text-purple-400' : 'text-purple-600'}`}>\n                {stats.promotionProducts}\n              </span>\n            </div>\n          </div>\n\n          <div>\n            <h3 className={`text-sm font-semibold mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              üö® Alertas de Stock\n            </h3>\n            <div className=\"space-y-2\">\n              {stockAlerts.length > 0 ? (\n                stockAlerts.map(alert => (\n                  <div\n                    key={alert.id}\n                    className={`flex items-center justify-between p-3 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'} border ${alert.stock === 0 ? 'border-red-500' : 'border-orange-500'}`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <i className={`ri-alert-line text-xl ${alert.stock === 0 ? 'text-red-500' : 'text-orange-500'}`}></i>\n                      <div>\n                        <div className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                          {alert.name}\n                        </div>\n                        <div className={`text-xs ${alert.stock === 0 ? 'text-red-500' : 'text-orange-500'}`}>\n                          {alert.stock === 0 ? 'Esgotado' : `Apenas ${alert.stock} em stock`}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                <div className={`text-center py-4 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  ‚úÖ Nenhum alerta de stock\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 5Ô∏è‚É£ TR√ÅFEGO + 6Ô∏è‚É£ MARKETING */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Tr√°fego */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üìà Tr√°fego & Visitas\n          </h2>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-blue-500 to-purple-500 text-white\">\n              <div>\n                <div className=\"text-sm opacity-90 mb-1\">Total de Visitas</div>\n                <div className=\"text-3xl font-bold\">{stats.totalVisits}</div>\n              </div>\n              <i className=\"ri-eye-line text-4xl opacity-50\"></i>\n            </div>\n\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-pink-500 to-orange-500 text-white\">\n              <div>\n                <div className=\"text-sm opacity-90 mb-1\">Visitantes √önicos</div>\n                <div className=\"text-3xl font-bold\">{stats.uniqueVisitors}</div>\n              </div>\n              <i className=\"ri-user-line text-4xl opacity-50\"></i>\n            </div>\n\n            <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n              <div className={`text-sm mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Produto Mais Visto\n              </div>\n              <div className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                {stats.mostViewedProduct}\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div className={`p-3 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"text-2xl mb-1\">üîç</div>\n                <div className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Google</div>\n                <div className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>45%</div>\n              </div>\n              <div className={`p-3 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"text-2xl mb-1\">üì±</div>\n                <div className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Social</div>\n                <div className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>30%</div>\n              </div>\n              <div className={`p-3 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"text-2xl mb-1\">üîó</div>\n                <div className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Direto</div>\n                <div className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>25%</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Marketing */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üíå Marketing & Newsletter\n          </h2>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-pink-500 to-rose-500 text-white\">\n              <div>\n                <div className=\"text-sm opacity-90 mb-1\">Total de Subscritores</div>\n                <div className=\"text-3xl font-bold\">{stats.newsletterSubscribers}</div>\n              </div>\n              <i className=\"ri-mail-line text-4xl opacity-50\"></i>\n            </div>\n\n            <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  Novas Inscri√ß√µes (Semana)\n                </span>\n                <span className={`font-bold text-green-500`}>\n                  +{stats.newSubscribersWeek}\n                </span>\n              </div>\n              <div className=\"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2\">\n                <div \n                  className=\"bg-gradient-to-r from-pink-500 to-rose-500 h-2 rounded-full\"\n                  style={{ width: `${(stats.newSubscribersWeek / stats.newsletterSubscribers) * 100}%` }}\n                ></div>\n              </div>\n            </div>\n\n            <button\n              onClick={() => window.location.href = '/admin?tab=marketing'}\n              className=\"w-full py-3 px-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all flex items-center justify-center gap-2\"\n            >\n              <i className=\"ri-send-plane-line\"></i>\n              Criar Nova Campanha\n            </button>\n\n            <div className={`p-4 rounded-lg border-2 border-dashed ${darkMode ? 'border-gray-600' : 'border-gray-300'}`}>\n              <div className=\"text-center\">\n                <i className=\"ri-calendar-check-line text-3xl text-pink-500 mb-2\"></i>\n                <div className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  √öltima Campanha Enviada\n                </div>\n                <div className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                  H√° 3 dias\n                </div>\n                <div className=\"mt-2 text-xs text-green-500\">\n                  Taxa de Abertura: 42%\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 7Ô∏è‚É£ IVA/TVA + 8Ô∏è‚É£ NOTIFICA√á√ïES */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* IVA/TVA & Envio */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üßæ IVA/TVA & Envio\n          </h2>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 text-white\">\n              <div>\n                <div className=\"text-sm opacity-90 mb-1\">IVA Arrecadado (M√™s)</div>\n                <div className=\"text-3xl font-bold\">‚Ç¨{stats.ivaCollected.toFixed(2)}</div>\n              </div>\n              <i className=\"ri-file-text-line text-4xl opacity-50\"></i>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <div className={`w-3 h-3 rounded-full ${stats.ivaActive ? 'bg-green-500' : 'bg-red-500'}`}></div>\n                  <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    Status IVA\n                  </span>\n                </div>\n                <div className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                  {stats.ivaActive ? 'Ativo' : 'Inativo'}\n                </div>\n              </div>\n\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <div className={`w-3 h-3 rounded-full ${stats.freeShippingActive ? 'bg-green-500' : 'bg-red-500'}`}></div>\n                  <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    Envio Gr√°tis\n                  </span>\n                </div>\n                <div className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                  {stats.freeShippingActive ? 'Ativo' : 'Inativo'}\n                </div>\n              </div>\n            </div>\n\n            <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n              <div className={`text-sm mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Encomendas com Envio Gr√°tis\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <div className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                  {stats.freeShippingOrders}\n                </div>\n                <div className=\"text-sm text-green-500\">\n                  {stats.ordersTotal > 0 ? ((stats.freeShippingOrders / stats.ordersTotal) * 100).toFixed(1) : 0}%\n                </div>\n              </div>\n            </div>\n\n            <button\n              onClick={() => window.location.href = '/admin?tab=iva-envio'}\n              className={`w-full py-3 px-4 rounded-lg font-semibold transition-all ${darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 text-gray-900 hover:bg-gray-200'}`}\n            >\n              Gerir IVA & Envio\n            </button>\n          </div>\n        </div>\n\n        {/* Notifica√ß√µes */}\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üîî Notifica√ß√µes & Alertas\n          </h2>\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors\"\n              onClick={() => window.location.href = '/admin?tab=notificacoes'}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center\">\n                  <i className=\"ri-message-3-line text-white\"></i>\n                </div>\n                <div>\n                  <div className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Novas Mensagens\n                  </div>\n                  <div className=\"text-xs text-blue-600 dark:text-blue-400\">\n                    Formul√°rio de Contacto\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                {stats.unreadMessages}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center\">\n                  <i className=\"ri-mail-line text-white\"></i>\n                </div>\n                <div>\n                  <div className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Newsletter\n                  </div>\n                  <div className=\"text-xs text-purple-600 dark:text-purple-400\">\n                    Novas Inscri√ß√µes\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">\n                {stats.newNewsletterSubs}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center\">\n                  <i className=\"ri-alert-line text-white\"></i>\n                </div>\n                <div>\n                  <div className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Alertas de Stock\n                  </div>\n                  <div className=\"text-xs text-orange-600 dark:text-orange-400\">\n                    Produtos com Stock Baixo\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold text-orange-600 dark:text-orange-400\">\n                {stats.stockAlerts}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\">\n                  <i className=\"ri-shopping-bag-line text-white\"></i>\n                </div>\n                <div>\n                  <div className={`font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                    Novos Pedidos\n                  </div>\n                  <div className=\"text-xs text-green-600 dark:text-green-400\">\n                    Pendentes de Processamento\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                {stats.pendingOrders}\n              </div>\n            </div>\n\n            <button\n              onClick={() => window.location.href = '/admin?tab=notificacoes'}\n              className=\"w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all\"\n            >\n              Ver Todas as Notifica√ß√µes\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* 9Ô∏è‚É£ A√á√ïES R√ÅPIDAS */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n        <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n          ‚öôÔ∏è A√ß√µes R√°pidas\n        </h2>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <button\n            onClick={() => window.location.href = '/admin?tab=produtos&action=add'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-pink-500 to-rose-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-add-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Adicionar Produto</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=produtos&action=promotion'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-orange-500 to-red-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-price-tag-3-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Criar Promo√ß√£o</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=encomendas'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-shopping-bag-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Ver Encomendas</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=marketing'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-purple-500 to-indigo-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-mail-send-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Enviar Newsletter</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=pagina-inicial'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-green-500 to-teal-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-image-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Alterar Banner</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=iva-envio'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-file-text-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Gerir IVA</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=clientes'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-user-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Ver Clientes</div>\n          </button>\n\n          <button\n            onClick={() => window.location.href = '/admin?tab=categorias'}\n            className=\"p-4 rounded-lg bg-gradient-to-br from-pink-500 to-purple-500 text-white hover:shadow-xl transition-all transform hover:scale-105\"\n          >\n            <i className=\"ri-stack-line text-3xl mb-2\"></i>\n            <div className=\"font-semibold\">Gerir Categorias</div>\n          </button>\n        </div>\n      </div>\n\n      {/* üîê SEGURAN√áA & ESTADO DO SISTEMA */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n        <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n          üîê Seguran√ßa & Estado do Sistema\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className={`p-4 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <div className={`w-3 h-3 rounded-full ${stats.stripeStatus ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`}></div>\n              <i className=\"ri-bank-card-line text-2xl text-purple-500\"></i>\n            </div>\n            <div className={`text-sm mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n              Stripe\n            </div>\n            <div className={`font-bold ${stats.stripeStatus ? 'text-green-500' : 'text-red-500'}`}>\n              {stats.stripeStatus ? 'Conectado' : 'Erro'}\n            </div>\n          </div>\n\n          <div className={`p-4 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <div className={`w-3 h-3 rounded-full ${stats.supabaseStatus ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`}></div>\n              <i className=\"ri-database-2-line text-2xl text-emerald-500\"></i>\n            </div>\n            <div className={`text-sm mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n              Supabase\n            </div>\n            <div className={`font-bold ${stats.supabaseStatus ? 'text-green-500' : 'text-red-500'}`}>\n              {stats.supabaseStatus ? 'Conectado' : 'Erro'}\n            </div>\n          </div>\n\n          <div className={`p-4 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <div className=\"w-3 h-3 rounded-full bg-green-500 animate-pulse\"></div>\n              <i className=\"ri-global-line text-2xl text-blue-500\"></i>\n            </div>\n            <div className={`text-sm mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n              Site\n            </div>\n            <div className=\"font-bold text-green-500\">\n              Online\n            </div>\n          </div>\n\n          <div className={`p-4 rounded-lg text-center ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n            <div className=\"flex items-center justify-center gap-2 mb-2\">\n              <i className=\"ri-user-settings-line text-2xl text-pink-500\"></i>\n            </div>\n            <div className={`text-sm mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n              √öltimo Login\n            </div>\n            <div className={`font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n              Agora\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Produtos Mais Vendidos */}\n      {bestSellingProducts.length > 0 && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg border ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n          <h2 className={`text-xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            üèÜ Produtos Mais Vendidos\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n            {bestSellingProducts.map((product, index) => (\n              <div\n                key={product.id}\n                className={`relative p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'} hover:shadow-lg transition-all cursor-pointer`}\n                onClick={() => window.location.href = '/admin?tab=produtos'}\n              >\n                <div className=\"absolute top-2 left-2 w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm\">\n                  #{index + 1}\n                </div>\n                <img\n                  src={product.image_url}\n                  alt={product.name}\n                  className=\"w-full h-32 object-cover rounded-lg mb-3\"\n                />\n                <div className={`font-medium mb-1 text-sm ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                  {product.name}\n                </div>\n                <div className=\"text-xs text-pink-500 font-semibold\">\n                  {product.sales} vendas\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  import.meta.env.VITE_PUBLIC_SUPABASE_URL,\n  import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY\n);\n\ninterface ProductsManagementProps {\n  darkMode?: boolean;\n}\n\nexport default function ProductsManagement({ darkMode = false }: ProductsManagementProps) {\n  const [products, setProducts] = useState<any[]>([]);\n  const [categories, setCategories] = useState<any[]>([]);\n  const [subcategories, setSubcategories] = useState<any[]>([]);\n  const [availableColors, setAvailableColors] = useState<string[]>([]);\n  const [availableSizes, setAvailableSizes] = useState<string[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<any>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('');\n  const [filterStatus, setFilterStatus] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\n\n  const [formData, setFormData] = useState({\n    name_pt: '',\n    name_en: '',\n    name_fr: '',\n    name_de: '',\n    description: '',\n    price: '',\n    category_id: '',\n    subcategory_id: '',\n    colors: [] as string[],\n    sizes: [] as string[],\n    stock: '',\n    images: [] as string[],\n    is_active: true,\n    is_on_sale: false,\n    sale_price: '',\n    discount_percentage: 0,\n  });\n\n  const [colorInput, setColorInput] = useState('');\n  const [sizeInput, setSizeInput] = useState('');\n  const [imageInput, setImageInput] = useState('');\n\n  useEffect(() => {\n    loadData();\n    loadFiltersData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [productsData, categoriesData, subcategoriesData] = await Promise.all([\n        supabase.from('products').select('*').order('created_at', { ascending: false }),\n        supabase.from('categories').select('*').order('name'),\n        supabase.from('subcategories').select('*').order('name'),\n      ]);\n\n      if (productsData.data) setProducts(productsData.data);\n      if (categoriesData.data) setCategories(categoriesData.data);\n      if (subcategoriesData.data) setSubcategories(subcategoriesData.data);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadFiltersData = async () => {\n    try {\n      // Carregar todas as cores √∫nicas dos produtos\n      const { data: productsData } = await supabase.from('products').select('colors');\n      const colorsSet = new Set<string>();\n      productsData?.forEach((product: any) => {\n        if (product.colors && Array.isArray(product.colors)) {\n          product.colors.forEach((color: string) => colorsSet.add(color));\n        }\n      });\n      setAvailableColors(Array.from(colorsSet).sort());\n\n      // Carregar todos os tamanhos √∫nicos dos produtos\n      const sizesSet = new Set<string>();\n      productsData?.forEach((product: any) => {\n        if (product.sizes && Array.isArray(product.sizes)) {\n          product.sizes.forEach((size: string) => sizesSet.add(size));\n        }\n      });\n      setAvailableSizes(Array.from(sizesSet).sort());\n    } catch (error) {\n      console.error('Erro ao carregar filtros:', error);\n    }\n  };\n\n  const handleSaveProduct = async () => {\n    if (!formData.name_pt || !formData.price) {\n      alert('‚ùå Nome e pre√ßo s√£o obrigat√≥rios');\n      return;\n    }\n\n    if (!formData.category_id) {\n      alert('‚ùå Por favor, selecione uma categoria');\n      return;\n    }\n\n    if (formData.images.length === 0) {\n      alert('‚ùå Adicione pelo menos uma imagem');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const productData: any = {\n        name_pt: formData.name_pt,\n        name_en: formData.name_en || formData.name_pt,\n        name_fr: formData.name_fr || formData.name_pt,\n        name_de: formData.name_de || formData.name_pt,\n        price: parseFloat(formData.price),\n        stock: parseInt(formData.stock) || 0,\n        category: formData.category_id,\n        category_id: formData.category_id,\n        description: formData.description || '',\n        images: formData.images,\n        colors: formData.colors,\n        sizes: formData.sizes,\n        is_active: formData.is_active,\n        is_on_sale: formData.is_on_sale,\n        sale_price: formData.is_on_sale && formData.sale_price ? parseFloat(formData.sale_price) : null,\n        discount_percentage: formData.is_on_sale ? formData.discount_percentage : 0,\n        updated_at: new Date().toISOString()\n      };\n\n      if (formData.subcategory_id) {\n        productData.subcategory_id = formData.subcategory_id;\n      }\n\n      if (editingProduct) {\n        const { error } = await supabase\n          .from('products')\n          .update(productData)\n          .eq('id', editingProduct.id);\n        if (error) throw error;\n        alert('‚úÖ Produto atualizado com sucesso!');\n      } else {\n        const insertData = {\n          ...productData,\n          created_at: new Date().toISOString()\n        };\n        \n        const { error } = await supabase\n          .from('products')\n          .insert([insertData]);\n        if (error) throw error;\n        alert('‚úÖ Produto adicionado com sucesso!');\n      }\n\n      setShowAddModal(false);\n      setEditingProduct(null);\n      resetForm();\n      await loadData();\n      await loadFiltersData();\n    } catch (error: any) {\n      console.error('Erro ao guardar produto:', error);\n      alert(`‚ùå Erro ao guardar produto: ${error.message || 'Erro desconhecido'}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteProduct = async (id: string) => {\n    if (!confirm('‚ùå Tem certeza que deseja eliminar este produto?')) return;\n    try {\n      const { error } = await supabase.from('products').delete().eq('id', id);\n      if (error) throw error;\n      alert('‚úÖ Produto eliminado com sucesso!');\n      await loadData();\n      await loadFiltersData();\n    } catch (error) {\n      console.error('Erro:', error);\n      alert('‚ùå Erro ao eliminar produto');\n    }\n  };\n\n  const handleDeleteSelected = async () => {\n    if (selectedProducts.length === 0) {\n      alert('‚ùå Por favor, selecione pelo menos um produto');\n      return;\n    }\n\n    if (!confirm(`‚ùå Tem certeza que deseja eliminar ${selectedProducts.length} produto(s)?`)) return;\n\n    try {\n      const { error } = await supabase\n        .from('products')\n        .delete()\n        .in('id', selectedProducts);\n\n      if (error) throw error;\n\n      alert(`‚úÖ ${selectedProducts.length} produto(s) eliminado(s) com sucesso!`);\n      setSelectedProducts([]);\n      await loadData();\n      await loadFiltersData();\n    } catch (error) {\n      console.error('Erro ao eliminar produtos:', error);\n      alert('‚ùå Erro ao eliminar produtos');\n    }\n  };\n\n  const handleBulkActivate = async () => {\n    if (selectedProducts.length === 0) {\n      alert('‚ùå Por favor, selecione pelo menos um produto');\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('products')\n        .update({ is_active: true })\n        .in('id', selectedProducts);\n\n      if (error) throw error;\n\n      alert(`‚úÖ ${selectedProducts.length} produto(s) ativado(s) com sucesso!`);\n      setSelectedProducts([]);\n      await loadData();\n    } catch (error) {\n      console.error('Erro:', error);\n      alert('‚ùå Erro ao ativar produtos');\n    }\n  };\n\n  const handleBulkDeactivate = async () => {\n    if (selectedProducts.length === 0) {\n      alert('‚ùå Por favor, selecione pelo menos um produto');\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('products')\n        .update({ is_active: false })\n        .in('id', selectedProducts);\n\n      if (error) throw error;\n\n      alert(`‚úÖ ${selectedProducts.length} produto(s) desativado(s) com sucesso!`);\n      setSelectedProducts([]);\n      await loadData();\n    } catch (error) {\n      console.error('Erro:', error);\n      alert('‚ùå Erro ao desativar produtos');\n    }\n  };\n\n  const handleDuplicateProduct = async (product: any) => {\n    try {\n      const newProduct = {\n        ...product,\n        id: undefined,\n        name_pt: `${product.name_pt} (C√≥pia)`,\n        name_en: `${product.name_en || product.name_pt} (Copy)`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n      };\n\n      const { error } = await supabase.from('products').insert([newProduct]);\n      if (error) throw error;\n\n      alert('‚úÖ Produto duplicado com sucesso!');\n      await loadData();\n    } catch (error) {\n      console.error('Erro ao duplicar produto:', error);\n      alert('‚ùå Erro ao duplicar produto');\n    }\n  };\n\n  const toggleSelectProduct = (productId: string) => {\n    if (selectedProducts.includes(productId)) {\n      setSelectedProducts(selectedProducts.filter(id => id !== productId));\n    } else {\n      setSelectedProducts([...selectedProducts, productId]);\n    }\n  };\n\n  const selectAllProducts = () => {\n    if (selectedProducts.length === filteredProducts.length) {\n      setSelectedProducts([]);\n    } else {\n      setSelectedProducts(filteredProducts.map(p => p.id));\n    }\n  };\n\n  const handleToggleActive = async (id: string, currentStatus: boolean) => {\n    try {\n      const { error } = await supabase.from('products').update({ is_active: !currentStatus }).eq('id', id);\n      if (error) throw error;\n      await loadData();\n    } catch (error) {\n      console.error('Erro:', error);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      name_pt: '',\n      name_en: '',\n      name_fr: '',\n      name_de: '',\n      description: '',\n      price: '',\n      category_id: '',\n      subcategory_id: '',\n      colors: [],\n      sizes: [],\n      stock: '',\n      images: [],\n      is_active: true,\n      is_on_sale: false,\n      sale_price: '',\n      discount_percentage: 0,\n    });\n    setColorInput('');\n    setSizeInput('');\n    setImageInput('');\n  };\n\n  const openEditModal = (product: any) => {\n    setEditingProduct(product);\n    setFormData({\n      name_pt: product.name_pt || '',\n      name_en: product.name_en || '',\n      name_fr: product.name_fr || '',\n      name_de: product.name_de || '',\n      description: product.description || '',\n      price: product.price?.toString() || '',\n      category_id: product.category_id || '',\n      subcategory_id: product.subcategory_id || '',\n      colors: product.colors || [],\n      sizes: product.sizes || [],\n      stock: product.stock?.toString() || '',\n      images: product.images || [],\n      is_active: product.is_active !== false,\n      is_on_sale: product.is_on_sale || false,\n      sale_price: product.sale_price?.toString() || '',\n      discount_percentage: product.discount_percentage || 0,\n    });\n    setShowAddModal(true);\n  };\n\n  const addColor = () => {\n    if (colorInput.trim() && !formData.colors.includes(colorInput.trim())) {\n      setFormData({ ...formData, colors: [...formData.colors, colorInput.trim()] });\n      setColorInput('');\n    }\n  };\n\n  const removeColor = (color: string) => {\n    setFormData({ ...formData, colors: formData.colors.filter(c => c !== color) });\n  };\n\n  const addSize = () => {\n    if (sizeInput.trim() && !formData.sizes.includes(sizeInput.trim())) {\n      setFormData({ ...formData, sizes: [...formData.sizes, sizeInput.trim()] });\n      setSizeInput('');\n    }\n  };\n\n  const removeSize = (size: string) => {\n    setFormData({ ...formData, sizes: formData.sizes.filter(s => s !== size) });\n  };\n\n  const addImage = () => {\n    if (imageInput.trim() && !formData.images.includes(imageInput.trim())) {\n      setFormData({ ...formData, images: [...formData.images, imageInput.trim()] });\n      setImageInput('');\n    }\n  };\n\n  const removeImage = (url: string) => {\n    setFormData({ ...formData, images: formData.images.filter(img => img !== url) });\n  };\n\n  const filteredProducts = products.filter(product => {\n    const matchesSearch = product.name_pt?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = !filterCategory || product.category_id === filterCategory;\n    const matchesStatus = !filterStatus || \n      (filterStatus === 'active' && product.is_active !== false) ||\n      (filterStatus === 'inactive' && product.is_active === false) ||\n      (filterStatus === 'out_ofstock' && (product.stock || 0) === 0) ||\n      (filterStatus === 'onsale' && product.is_on_sale);\n    \n    return matchesSearch && matchesCategory && matchesStatus;\n  });\n\n  const availableSubcategories = subcategories.filter(sub => sub.category_id === formData.category_id);\n\n  // Estat√≠sticas\n  const totalProducts = products.length;\n  const activeProducts = products.filter(p => p.is_active !== false).length;\n  const outOfStock = products.filter(p => (p.stock || 0) === 0).length;\n  const onSale = products.filter(p => p.is_on_sale).length;\n  const lowStock = products.filter(p => (p.stock || 0) > 0 && (p.stock || 0) <= 10).length;\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Header com Estat√≠sticas */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              Gest√£o de Produtos\n            </h1>\n            <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n              Gerir todos os produtos da sua loja\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            {selectedProducts.length > 0 && (\n              <>\n                <button\n                  onClick={handleBulkActivate}\n                  className=\"px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-eye-line mr-2\"></i>\n                  Ativar\n                </button>\n                <button\n                  onClick={handleBulkDeactivate}\n                  className=\"px-4 py-3 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-eye-off-line mr-2\"></i>\n                  Desativar\n                </button>\n                <button\n                  onClick={handleDeleteSelected}\n                  className=\"px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-delete-bin-line mr-2\"></i>\n                  Eliminar ({selectedProducts.length})\n                </button>\n              </>\n            )}\n            <button\n              onClick={() => {\n                resetForm();\n                setEditingProduct(null);\n                setShowAddModal(true);\n              }}\n              className=\"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              Adicionar Produto\n            </button>\n          </div>\n        </div>\n\n        {/* Estat√≠sticas */}\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n          <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-xl p-4 border`}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Total</p>\n                <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{totalProducts}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center\">\n                <i className=\"ri-shopping-bag-line text-white text-2xl\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-xl p-4 border`}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Ativos</p>\n                <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{activeProducts}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center\">\n                <i className=\"ri-eye-line text-white text-2xl\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-xl p-4 border`}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Esgotados</p>\n                <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{outOfStock}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-gradient-to-br from-red-500 to-rose-500 rounded-xl flex items-center justify-center\">\n                <i className=\"ri-close-circle-line text-white text-2xl\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-xl p-4 border`}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Stock Baixo</p>\n                <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{lowStock}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-500 rounded-xl flex items-center justify-center\">\n                <i className=\"ri-alert-line text-white text-2xl\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-xl p-4 border`}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Em Promo√ß√£o</p>\n                <p className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{onSale}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center\">\n                <i className=\"ri-discount-percent-line text-white text-2xl\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Filtros */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border mb-6`}>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Pesquisar\n            </label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Nome do produto...\"\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n            />\n          </div>\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Categoria\n            </label>\n            <select\n              value={filterCategory}\n              onChange={(e) => setFilterCategory(e.target.value)}\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n            >\n              <option value=\"\">Todas as categorias</option>\n              {categories.map(cat => (\n                <option key={cat.id} value={cat.id}>{cat.name}</option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Estado\n            </label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n            >\n              <option value=\"\">Todos os estados</option>\n              <option value=\"active\">Ativos</option>\n              <option value=\"inactive\">Inativos</option>\n              <option value=\"outofstock\">Sem Stock</option>\n              <option value=\"onsale\">Em Promo√ß√£o</option>\n            </select>\n          </div>\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Sele√ß√£o\n            </label>\n            <button\n              onClick={selectAllProducts}\n              className={`w-full px-4 py-2 rounded-lg border transition-colors cursor-pointer whitespace-nowrap ${\n                selectedProducts.length === filteredProducts.length && filteredProducts.length > 0\n                  ? 'bg-pink-500 text-white border-pink-500'\n                  : darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white hover:bg-gray-600'\n                  : 'bg-white border-gray-300 text-gray-800 hover:bg-gray-50'\n              }`}\n            >\n              {selectedProducts.length === filteredProducts.length && filteredProducts.length > 0\n                ? '‚úì Todos Selecionados'\n                : 'Selecionar Todos'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Produtos */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {filteredProducts.map((product) => {\n          const categoryName = categories.find(c => c.id === product.category_id)?.name || 'Sem categoria';\n          const subcategoryName = product.subcategory_id ? subcategories.find(s => s.id === product.subcategory_id)?.name : null;\n          \n          return (\n            <div\n              key={product.id}\n              className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl shadow-sm border overflow-hidden hover:shadow-lg transition-all ${\n                selectedProducts.includes(product.id) ? 'ring-4 ring-pink-500' : ''\n              }`}\n            >\n              <div className=\"relative aspect-square w-full\">\n                <img\n                  src={product.images?.[0] || 'https://via.placeholder.com/400'}\n                  alt={product.name_pt}\n                  className=\"w-full h-full object-cover object-top\"\n                />\n                <div className=\"absolute top-2 left-2\">\n                  <button\n                    onClick={() => toggleSelectProduct(product.id)}\n                    className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all cursor-pointer ${\n                      selectedProducts.includes(product.id)\n                        ? 'bg-pink-500 text-white'\n                        : 'bg-white/90 text-gray-700 hover:bg-white'\n                    }`}\n                  >\n                    {selectedProducts.includes(product.id) ? (\n                      <i className=\"ri-checkbox-line text-xl\"></i>\n                    ) : (\n                      <i className=\"ri-checkbox-blank-line text-xl\"></i>\n                    )}\n                  </button>\n                </div>\n                {product.is_active === false && (\n                  <div className=\"absolute top-2 right-2\">\n                    <span className=\"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full\">\n                      Inativo\n                    </span>\n                  </div>\n                )}\n                {product.is_on_sale && (\n                  <div className=\"absolute top-12 right-2\">\n                    <span className=\"px-2 py-1 bg-green-500 text-white text-xs font-medium rounded-full\">\n                      -{product.discount_percentage}% OFF\n                    </span>\n                  </div>\n                )}\n                {(product.stock || 0) === 0 ? (\n                  <div className=\"absolute bottom-2 left-2\">\n                    <span className=\"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full\">\n                      Esgotado\n                    </span>\n                  </div>\n                ) : (product.stock || 0) <= 10 && (\n                  <div className=\"absolute bottom-2 left-2\">\n                    <span className=\"px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded-full\">\n                      Stock Baixo ({product.stock})\n                    </span>\n                  </div>\n                )}\n              </div>\n              <div className=\"p-4\">\n                <h3 className={`font-semibold mb-1 truncate ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  {product.name_pt}\n                </h3>\n                <p className={`text-xs mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  {categoryName}{subcategoryName ? ` ‚Ä∫ ${subcategoryName}` : ''}\n                </p>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div>\n                    {product.is_on_sale && product.sale_price ? (\n                      <>\n                        <span className=\"text-xs line-through text-gray-400\">‚Ç¨{product.price?.toFixed(2)}</span>\n                        <span className=\"text-lg font-bold text-green-500 ml-2\">‚Ç¨{product.sale_price?.toFixed(2)}</span>\n                      </>\n                    ) : (\n                      <span className=\"text-lg font-bold text-pink-500\">‚Ç¨{product.price?.toFixed(2)}</span>\n                    )}\n                  </div>\n                  <span className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                    Stock: {product.stock || 0}\n                  </span>\n                </div>\n\n                {/* Cores e Tamanhos */}\n                {(product.colors?.length > 0 || product.sizes?.length > 0) && (\n                  <div className=\"mb-3 space-y-1\">\n                    {product.colors?.length > 0 && (\n                      <div className=\"flex items-center gap-1 text-xs\">\n                        <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Cores:</span>\n                        <span className={`${darkMode ? 'text-gray-300' : 'text-gray-700'} truncate`}>\n                          {product.colors.slice(0, 3).join(', ')}{product.colors.length > 3 ? '...' : ''}\n                        </span>\n                      </div>\n                    )}\n                    {product.sizes?.length > 0 && (\n                      <div className=\"flex items-center gap-1 text-xs\">\n                        <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Tamanhos:</span>\n                        <span className={`${darkMode ? 'text-gray-300' : 'text-gray-700'} truncate`}>\n                          {product.sizes.slice(0, 4).join(', ')}{product.sizes.length > 4 ? '...' : ''}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <div className=\"grid grid-cols-3 gap-2\">\n                  <button\n                    onClick={() => openEditModal(product)}\n                    className=\"px-3 py-2 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center\"\n                  >\n                    <i className=\"ri-edit-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => handleDuplicateProduct(product)}\n                    className=\"px-3 py-2 bg-purple-500 text-white rounded-lg text-xs hover:bg-purple-600 transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center\"\n                  >\n                    <i className=\"ri-file-copy-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => handleDeleteProduct(product.id)}\n                    className=\"px-3 py-2 bg-red-500 text-white rounded-lg text-xs hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap flex items-center justify-center\"\n                  >\n                    <i className=\"ri-delete-bin-line\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {filteredProducts.length === 0 && (\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-12 text-center shadow-sm border`}>\n          <i className={`ri-shirt-line text-6xl mb-4 ${darkMode ? 'text-gray-600' : 'text-gray-300'}`}></i>\n          <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n            Nenhum produto encontrado\n          </p>\n        </div>\n      )}\n\n      {/* Modal Adicionar/Editar */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-4xl w-full my-8 max-h-[90vh] overflow-y-auto`}>\n            <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              {editingProduct ? '‚úèÔ∏è Editar Produto' : '‚ûï Adicionar Produto'}\n            </h2>\n            \n            <div className=\"space-y-6\">\n              {/* Nome em Portugu√™s (obrigat√≥rio) */}\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Nome do Produto (Portugu√™s) *\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.name_pt}\n                  onChange={(e) => setFormData({ ...formData, name_pt: e.target.value })}\n                  placeholder=\"Ex: Vestido Elegante\"\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              {/* Outros idiomas (opcional) */}\n              <details className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} rounded-xl p-4`}>\n                <summary className={`cursor-pointer font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  üìù Tradu√ß√µes (Opcional)\n                </summary>\n                <div className=\"mt-4 space-y-3\">\n                  <input\n                    type=\"text\"\n                    value={formData.name_en}\n                    onChange={(e) => setFormData({ ...formData, name_en: e.target.value })}\n                    placeholder=\"Nome em Ingl√™s\"\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400`}\n                  />\n                  <input\n                    type=\"text\"\n                    value={formData.name_fr}\n                    onChange={(e) => setFormData({ ...formData, name_fr: e.target.value })}\n                    placeholder=\"Nome em Franc√™s\"\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400`}\n                  />\n                  <input\n                    type=\"text\"\n                    value={formData.name_de}\n                    onChange={(e) => setFormData({ ...formData, name_de: e.target.value })}\n                    placeholder=\"Nome em Alem√£o\"\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400`}\n                  />\n                </div>\n              </details>\n\n              {/* Pre√ßo e Stock */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    üí∞ Pre√ßo Normal *\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={formData.price}\n                    onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n                    placeholder=\"0.00\"\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                  />\n                </div>\n\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    üì¶ Stock\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={formData.stock}\n                    onChange={(e) => setFormData({ ...formData, stock: e.target.value })}\n                    placeholder=\"0\"\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                  />\n                </div>\n              </div>\n\n              {/* Promo√ß√£o */}\n              <div className={`p-6 rounded-xl border-2 ${formData.is_on_sale ? 'border-green-500 bg-green-50 dark:bg-green-900/20' : darkMode ? 'border-gray-600 bg-gray-700' : 'border-gray-200 bg-gray-50'}`}>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div>\n                    <label className={`text-lg font-bold ${darkMode ? 'text-gray-200' : 'text-gray-800'}`}>\n                      üè∑Ô∏è Produto em Promo√ß√£o\n                    </label>\n                    <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                      Ative para definir pre√ßo promocional\n                    </p>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => setFormData({ ...formData, is_on_sale: !formData.is_on_sale })}\n                    className={`relative w-16 h-8 rounded-full transition-all cursor-pointer ${\n                      formData.is_on_sale ? 'bg-gradient-to-r from-green-500 to-emerald-500' : 'bg-gray-300'\n                    }`}\n                  >\n                    <span\n                      className={`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${\n                        formData.is_on_sale ? 'translate-x-8' : ''\n                      }`}\n                    ></span>\n                  </button>\n                </div>\n\n                {formData.is_on_sale && (\n                  <div className=\"space-y-4 mt-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                          üíµ Pre√ßo Promocional *\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          value={formData.sale_price}\n                          onChange={(e) => {\n                            const salePrice = parseFloat(e.target.value);\n                            const originalPrice = parseFloat(formData.price);\n                            const discount = originalPrice > 0 ? Math.round(((originalPrice - salePrice) / originalPrice) * 100) : 0;\n                            setFormData({ \n                              ...formData, \n                              sale_price: e.target.value,\n                              discount_percentage: discount\n                            });\n                          }}\n                          placeholder=\"0.00\"\n                          className={`w-full px-3 py-2 rounded-lg border ${\n                            darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                          } focus:ring-2 focus:ring-green-400`}\n                        />\n                      </div>\n                      <div>\n                        <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                          üìä Desconto (%)\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={formData.discount_percentage}\n                          onChange={(e) => {\n                            const discount = parseInt(e.target.value) || 0;\n                            const originalPrice = parseFloat(formData.price);\n                            const salePrice = originalPrice * (1 - discount / 100);\n                            setFormData({ \n                              ...formData, \n                              discount_percentage: discount,\n                              sale_price: salePrice.toFixed(2)\n                            });\n                          }}\n                          placeholder=\"0\"\n                          className={`w-full px-3 py-2 rounded-lg border ${\n                            darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                          } focus:ring-2 focus:ring-green-400`}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Pr√©-visualiza√ß√£o */}\n                    {formData.price && formData.sale_price && (\n                      <div className={`p-3 rounded-lg ${darkMode ? 'bg-green-900/30' : 'bg-green-100'}`}>\n                        <p className={`text-sm font-medium ${darkMode ? 'text-green-300' : 'text-green-800'}`}>\n                          üìå Pr√©-visualiza√ß√£o:\n                        </p>\n                        <div className=\"flex items-center gap-3 mt-2\">\n                          <span className={`text-lg line-through ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                            ‚Ç¨{parseFloat(formData.price).toFixed(2)}\n                          </span>\n                          <span className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                            ‚Ç¨{parseFloat(formData.sale_price).toFixed(2)}\n                          </span>\n                          <span className=\"px-3 py-1 bg-green-500 text-white text-sm font-bold rounded-full\">\n                            -{formData.discount_percentage}% OFF\n                          </span>\n                        </div>\n                        <p className={`text-xs mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          üí∞ Poupan√ßa: ‚Ç¨{(parseFloat(formData.price) - parseFloat(formData.sale_price)).toFixed(2)}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Categoria e Subcategoria */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    üìÇ Categoria *\n                  </label>\n                  <select\n                    value={formData.category_id}\n                    onChange={(e) => setFormData({ ...formData, category_id: e.target.value, subcategory_id: '' })}\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n                  >\n                    <option value=\"\">Selecionar categoria</option>\n                    {categories.map(cat => (\n                      <option key={cat.id} value={cat.id}>{cat.name}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    üìÅ Subcategoria (Opcional)\n                  </label>\n                  <select\n                    value={formData.subcategory_id}\n                    onChange={(e) => setFormData({ ...formData, subcategory_id: e.target.value })}\n                    disabled={!formData.category_id}\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer disabled:opacity-50`}\n                  >\n                    <option value=\"\">Selecionar subcategoria</option>\n                    {availableSubcategories.map(sub => (\n                      <option key={sub.id} value={sub.id}>{sub.name}</option>\n                    ))}\n                  </select>\n                  {!formData.category_id && (\n                    <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                      ‚ÑπÔ∏è Selecione uma categoria primeiro\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Cores */}\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  üé® Cores Dispon√≠veis\n                </label>\n                <p className={`text-xs mb-3 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  ‚ÑπÔ∏è Novas cores s√£o adicionadas automaticamente aos filtros da loja\n                </p>\n                <div className=\"flex gap-2 mb-3\">\n                  <input\n                    type=\"text\"\n                    value={colorInput}\n                    onChange={(e) => setColorInput(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addColor())}\n                    placeholder=\"Ex: Preto, Azul Marinho, Rosa Claro...\"\n                    className={`flex-1 px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                  />\n                  <button\n                    onClick={addColor}\n                    type=\"button\"\n                    className=\"px-5 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap font-medium\"\n                  >\n                    <i className=\"ri-add-line mr-1\"></i> Adicionar\n                  </button>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {formData.colors.map((color, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30 text-pink-700 dark:text-pink-300 rounded-full text-sm font-medium\"\n                    >\n                      {color}\n                      <button\n                        onClick={() => removeColor(color)}\n                        type=\"button\"\n                        className=\"hover:text-pink-900 dark:hover:text-pink-100 cursor-pointer\"\n                      >\n                        <i className=\"ri-close-line\"></i>\n                      </button>\n                    </span>\n                  ))}\n                  {formData.colors.length === 0 && (\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                      Nenhuma cor adicionada\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Tamanhos */}\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  üìè Tamanhos Dispon√≠veis\n                </label>\n                <p className={`text-xs mb-3 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  ‚ÑπÔ∏è Novos tamanhos s√£o adicionados automaticamente aos filtros da loja\n                </p>\n                <div className=\"flex gap-2 mb-3\">\n                  <input\n                    type=\"text\"\n                    value={sizeInput}\n                    onChange={(e) => setSizeInput(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addSize())}\n                    placeholder=\"Ex: XS, S, M, L, XL, 36, 38, √önico...\"\n                    className={`flex-1 px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                  />\n                  <button\n                    onClick={addSize}\n                    type=\"button\"\n                    className=\"px-5 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap font-medium\"\n                  >\n                    <i className=\"ri-add-line mr-1\"></i> Adicionar\n                  </button>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {formData.sizes.map((size, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium\"\n                    >\n                      {size}\n                      <button\n                        onClick={() => removeSize(size)}\n                        type=\"button\"\n                        className=\"hover:text-blue-900 dark:hover:text-blue-100 cursor-pointer\"\n                      >\n                        <i className=\"ri-close-line\"></i>\n                      </button>\n                    </span>\n                  ))}\n                  {formData.sizes.length === 0 && (\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                      Nenhum tamanho adicionado\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              {/* Descri√ß√£o */}\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  üìù Descri√ß√£o\n                </label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  rows={4}\n                  placeholder=\"Descreva as caracter√≠sticas, materiais, detalhes do produto...\"\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              {/* Imagens */}\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  üñºÔ∏è Imagens do Produto * (m√≠nimo 1)\n                </label>\n                <p className={`text-xs mb-3 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  üìå A primeira imagem ser√° a imagem principal\n                </p>\n                <div className=\"flex gap-2 mb-3\">\n                  <input\n                    type=\"text\"\n                    value={imageInput}\n                    onChange={(e) => setImageInput(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addImage())}\n                    placeholder=\"Cole o URL da imagem aqui...\"\n                    className={`flex-1 px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                  />\n                  <button\n                    onClick={addImage}\n                    type=\"button\"\n                    className=\"px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap font-medium\"\n                  >\n                    <i className=\"ri-add-line mr-1\"></i> Adicionar\n                  </button>\n                </div>\n                <div className=\"grid grid-cols-4 gap-3\">\n                  {formData.images.map((url, index) => (\n                    <div key={index} className=\"relative group\">\n                      <div className=\"relative w-full h-32 rounded-lg overflow-hidden border-2 border-gray-200 dark:border-gray-600\">\n                        <img src={url} alt={`Imagem ${index + 1}`} className=\"w-full h-full object-cover\" />\n                        {index === 0 && (\n                          <div className=\"absolute top-1 left-1 bg-gradient-to-r from-pink-500 to-rose-500 text-white px-2 py-1 rounded text-xs font-bold\">\n                            Principal\n                          </div>\n                        )}\n                      </div>\n                      <button\n                        onClick={() => removeImage(url)}\n                        type=\"button\"\n                        className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer shadow-lg hover:bg-red-600\"\n                      >\n                        <i className=\"ri-close-line text-lg\"></i>\n                      </button>\n                    </div>\n                  ))}\n                </div>\n                {formData.images.length === 0 && (\n                  <div className={`border-2 border-dashed rounded-lg p-8 text-center ${darkMode ? 'border-gray-600' : 'border-gray-300'}`}>\n                    <i className={`ri-image-line text-5xl mb-2 ${darkMode ? 'text-gray-600' : 'text-gray-300'}`}></i>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                      Nenhuma imagem adicionada\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Estado do Produto */}\n              <div className={`flex items-center justify-between p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div>\n                  <label className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    üëÅÔ∏è Produto Ativo\n                  </label>\n                  <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    {formData.is_active ? 'Vis√≠vel na loja' : 'Oculto dos clientes'}\n                  </p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, is_active: !formData.is_active })}\n                  className={`relative w-16 h-8 rounded-full transition-all cursor-pointer ${\n                    formData.is_active ? 'bg-gradient-to-r from-green-500 to-emerald-500' : 'bg-gray-300'\n                  }`}\n                >\n                  <span\n                    className={`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${\n                      formData.is_active ? 'translate-x-8' : ''\n                    }`}\n                  ></span>\n                </button>\n              </div>\n            </div>\n\n            {/* Bot√µes de A√ß√£o */}\n            <div className=\"flex items-center gap-4 mt-8\">\n              <button\n                onClick={handleSaveProduct}\n                disabled={saving}\n                type=\"button\"\n                className=\"flex-1 px-6 py-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-bold hover:shadow-2xl transition-all cursor-pointer whitespace-nowrap disabled:opacity-50 text-lg\"\n              >\n                {saving ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin mr-2\"></i>A guardar...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"ri-save-line mr-2\"></i>\n                    {editingProduct ? 'Guardar Altera√ß√µes' : 'Adicionar Produto'}\n                  </>\n                )}\n              </button>\n              <button\n                onClick={() => {\n                  setShowAddModal(false);\n                  setEditingProduct(null);\n                  resetForm();\n                }}\n                type=\"button\"\n                disabled={saving}\n                className={`px-6 py-4 rounded-xl font-bold transition-all cursor-pointer whitespace-nowrap text-lg ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                }`}\n              >\n                Cancelar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  import.meta.env.VITE_PUBLIC_SUPABASE_URL,\n  import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY\n);\n\ninterface CategoriesManagementProps {\n  darkMode?: boolean;\n}\n\nexport default function CategoriesManagement({ darkMode = false }: CategoriesManagementProps) {\n  const [categories, setCategories] = useState<any[]>([]);\n  const [subcategories, setSubcategories] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddCategoryModal, setShowAddCategoryModal] = useState(false);\n  const [showAddSubcategoryModal, setShowAddSubcategoryModal] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<any>(null);\n  const [editingSubcategory, setEditingSubcategory] = useState<any>(null);\n  const [viewMode, setViewMode] = useState<'categories' | 'subcategories'>('categories');\n  const [selectedCategoryFilter, setSelectedCategoryFilter] = useState('');\n\n  const [categoryForm, setCategoryForm] = useState({\n    name: '',\n    description: '',\n    image_url: '',\n    display_order: 0,\n    is_active: true,\n  });\n\n  const [subcategoryForm, setSubcategoryForm] = useState({\n    name: '',\n    description: '',\n    category_id: '',\n    image_url: '',\n    display_order: 0,\n    is_active: true,\n  });\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [categoriesData, subcategoriesData] = await Promise.all([\n        supabase.from('categories').select('*').order('display_order'),\n        supabase.from('subcategories').select('*').order('display_order'),\n      ]);\n\n      if (categoriesData.data) setCategories(categoriesData.data);\n      if (subcategoriesData.data) setSubcategories(subcategoriesData.data);\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveCategory = async () => {\n    if (!categoryForm.name) {\n      alert('Por favor, preencha o nome da categoria');\n      return;\n    }\n\n    try {\n      // Gerar slug a partir do nome\n      const slug = categoryForm.name\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '');\n\n      const categoryData = {\n        ...categoryForm,\n        slug: slug,\n      };\n\n      if (editingCategory) {\n        const { error } = await supabase\n          .from('categories')\n          .update(categoryData)\n          .eq('id', editingCategory.id);\n        if (error) throw error;\n      } else {\n        const { error } = await supabase.from('categories').insert([categoryData]);\n        if (error) throw error;\n      }\n\n      setShowAddCategoryModal(false);\n      setEditingCategory(null);\n      resetCategoryForm();\n      await loadData();\n      alert(editingCategory ? 'Categoria atualizada com sucesso!' : 'Categoria adicionada com sucesso! Agora aparece no site.');\n    } catch (error) {\n      console.error('Erro ao guardar categoria:', error);\n      alert('Erro ao guardar categoria');\n    }\n  };\n\n  const handleSaveSubcategory = async () => {\n    if (!subcategoryForm.name || !subcategoryForm.category_id) {\n      alert('Por favor, preencha o nome e selecione uma categoria');\n      return;\n    }\n\n    try {\n      // Gerar slug a partir do nome\n      let slug = subcategoryForm.name\n        .toLowerCase()\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-+|-+$/g, '');\n\n      // Verificar se o slug j√° existe nesta categoria\n      if (!editingSubcategory) {\n        const { data: existingSlugs } = await supabase\n          .from('subcategories')\n          .select('slug')\n          .eq('category_id', subcategoryForm.category_id)\n          .like('slug', `${slug}%`);\n\n        if (existingSlugs && existingSlugs.length > 0) {\n          // Se o slug j√° existe, adicionar um n√∫mero\n          const slugNumbers = existingSlugs\n            .map(s => {\n              const match = s.slug.match(new RegExp(`^${slug}-(\\\\d+)$`));\n              return match ? parseInt(match[1]) : (s.slug === slug ? 0 : null);\n            })\n            .filter(n => n !== null) as number[];\n          \n          const nextNumber = slugNumbers.length > 0 ? Math.max(...slugNumbers) + 1 : 1;\n          slug = `${slug}-${nextNumber}`;\n        }\n      }\n\n      const subcategoryData = {\n        ...subcategoryForm,\n        slug: slug,\n      };\n\n      if (editingSubcategory) {\n        const { error } = await supabase\n          .from('subcategories')\n          .update(subcategoryData)\n          .eq('id', editingSubcategory.id);\n        if (error) throw error;\n      } else {\n        const { error } = await supabase.from('subcategories').insert([subcategoryData]);\n        if (error) throw error;\n      }\n\n      setShowAddSubcategoryModal(false);\n      setEditingSubcategory(null);\n      resetSubcategoryForm();\n      await loadData();\n      alert(editingSubcategory ? 'Subcategoria atualizada com sucesso!' : 'Subcategoria adicionada com sucesso! Agora aparece no site.');\n    } catch (error: any) {\n      console.error('Erro ao guardar subcategoria:', error);\n      \n      // Mensagem de erro mais clara\n      if (error.code === '23505') {\n        alert('J√° existe uma subcategoria com este nome nesta categoria. Por favor, escolha outro nome.');\n      } else {\n        alert('Erro ao guardar subcategoria: ' + (error.message || 'Erro desconhecido'));\n      }\n    }\n  };\n\n  const handleDeleteCategory = async (id: string) => {\n    if (!confirm('Tem certeza que deseja eliminar esta categoria? Todas as subcategorias e produtos associados tamb√©m ser√£o eliminados.')) return;\n\n    try {\n      // Primeiro, eliminar todos os produtos desta categoria\n      const { error: productsError } = await supabase\n        .from('products')\n        .delete()\n        .eq('category_id', id);\n\n      if (productsError) throw productsError;\n\n      // Depois, eliminar todas as subcategorias\n      const { error: subcategoriesError } = await supabase\n        .from('subcategories')\n        .delete()\n        .eq('category_id', id);\n\n      if (subcategoriesError) throw subcategoriesError;\n\n      // Finalmente, eliminar a categoria\n      const { error: categoryError } = await supabase\n        .from('categories')\n        .delete()\n        .eq('id', id);\n\n      if (categoryError) throw categoryError;\n\n      await loadData();\n      alert('Categoria e todos os produtos associados eliminados com sucesso!');\n    } catch (error) {\n      console.error('Erro ao eliminar categoria:', error);\n      alert('Erro ao eliminar categoria');\n    }\n  };\n\n  const handleDeleteSubcategory = async (id: string) => {\n    if (!confirm('Tem certeza que deseja eliminar esta subcategoria? Todos os produtos associados tamb√©m ser√£o eliminados.')) return;\n\n    try {\n      // Primeiro, eliminar todos os produtos desta subcategoria\n      const { error: productsError } = await supabase\n        .from('products')\n        .delete()\n        .eq('subcategory_id', id);\n\n      if (productsError) throw productsError;\n\n      // Depois, eliminar a subcategoria\n      const { error: subcategoryError } = await supabase\n        .from('subcategories')\n        .delete()\n        .eq('id', id);\n\n      if (subcategoryError) throw subcategoryError;\n\n      await loadData();\n      alert('Subcategoria e todos os produtos associados eliminados com sucesso!');\n    } catch (error) {\n      console.error('Erro ao eliminar subcategoria:', error);\n      alert('Erro ao eliminar subcategoria');\n    }\n  };\n\n  const resetCategoryForm = () => {\n    setCategoryForm({\n      name: '',\n      description: '',\n      image_url: '',\n      display_order: 0,\n      is_active: true,\n    });\n  };\n\n  const resetSubcategoryForm = () => {\n    setSubcategoryForm({\n      name: '',\n      description: '',\n      category_id: '',\n      image_url: '',\n      display_order: 0,\n      is_active: true,\n    });\n  };\n\n  const openEditCategoryModal = (category: any) => {\n    setEditingCategory(category);\n    setCategoryForm({\n      name: category.name || '',\n      description: category.description || '',\n      image_url: category.image_url || '',\n      display_order: category.display_order || 0,\n      is_active: category.is_active !== false,\n    });\n    setShowAddCategoryModal(true);\n  };\n\n  const openEditSubcategoryModal = (subcategory: any) => {\n    setEditingSubcategory(subcategory);\n    setSubcategoryForm({\n      name: subcategory.name || '',\n      description: subcategory.description || '',\n      category_id: subcategory.category_id || '',\n      image_url: subcategory.image_url || '',\n      display_order: subcategory.display_order || 0,\n      is_active: subcategory.is_active !== false,\n    });\n    setShowAddSubcategoryModal(true);\n  };\n\n  const getSubcategoryCount = (categoryId: string) => {\n    return subcategories.filter(sub => sub.category_id === categoryId).length;\n  };\n\n  const filteredSubcategories = selectedCategoryFilter\n    ? subcategories.filter(sub => sub.category_id === selectedCategoryFilter)\n    : subcategories;\n\n  const groupedSubcategories = categories.map(category => ({\n    category,\n    subcategories: subcategories.filter(sub => sub.category_id === category.id)\n  }));\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            Gest√£o de Categorias\n          </h1>\n          <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n            {categories.length} categorias e {subcategories.length} subcategorias\n          </p>\n        </div>\n        <div className=\"flex gap-3\">\n          <button\n            onClick={() => setViewMode(viewMode === 'categories' ? 'subcategories' : 'categories')}\n            className={`px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${\n              viewMode === 'subcategories'\n                ? 'bg-gradient-to-r from-purple-500 to-indigo-500 text-white shadow-lg'\n                : 'bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg'\n            }`}\n          >\n            <i className={`${viewMode === 'categories' ? 'ri-folder-line' : 'ri-folder-open-line'} mr-2`}></i>\n            {viewMode === 'categories' ? 'Ver Subcategorias' : 'Ver Categorias'}\n          </button>\n        </div>\n      </div>\n\n      {/* Categories View */}\n      {viewMode === 'categories' && (\n        <>\n          <div className=\"flex items-center justify-between mb-6\">\n            <select\n              value={selectedCategoryFilter}\n              onChange={(e) => setSelectedCategoryFilter(e.target.value)}\n              className={`px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n            >\n              <option value=\"\">Todas as Categorias</option>\n              {categories.map(cat => (\n                <option key={cat.id} value={cat.id}>{cat.name}</option>\n              ))}\n            </select>\n            <button\n              onClick={() => {\n                resetCategoryForm();\n                setEditingCategory(null);\n                setShowAddCategoryModal(true);\n              }}\n              className=\"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              Adicionar Categoria\n            </button>\n          </div>\n\n          <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl shadow-sm border overflow-hidden`}>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                  <tr>\n                    <th className={`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      Categoria\n                    </th>\n                    <th className={`px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      Descri√ß√£o\n                    </th>\n                    <th className={`px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      Subcategorias\n                    </th>\n                    <th className={`px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      Estado\n                    </th>\n                    <th className={`px-6 py-4 text-center text-xs font-semibold uppercase tracking-wider ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      A√ß√µes\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className={`divide-y ${darkMode ? 'divide-gray-700' : 'divide-gray-200'}`}>\n                  {categories.map((category) => (\n                    <tr key={category.id} className={`${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50'} transition-colors`}>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg flex items-center justify-center flex-shrink-0\">\n                            <i className=\"ri-folder-line text-xl text-white\"></i>\n                          </div>\n                          <div>\n                            <h3 className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                              {category.name}\n                            </h3>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          {category.description || '‚Äî'}\n                        </p>\n                      </td>\n                      <td className=\"px-6 py-4 text-center\">\n                        <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${\n                          darkMode ? 'bg-purple-900/30 text-purple-300' : 'bg-purple-100 text-purple-700'\n                        }`}>\n                          <i className=\"ri-folder-open-line\"></i>\n                          {getSubcategoryCount(category.id)}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-center\">\n                        <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${\n                          category.is_active !== false\n                            ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300'\n                            : 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300'\n                        }`}>\n                          <i className={`${category.is_active !== false ? 'ri-check-line' : 'ri-close-line'}`}></i>\n                          {category.is_active !== false ? 'Ativa' : 'Inativa'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center justify-center gap-2\">\n                          <button\n                            onClick={() => openEditCategoryModal(category)}\n                            className=\"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors cursor-pointer\"\n                            title=\"Editar\"\n                          >\n                            <i className=\"ri-edit-line text-lg\"></i>\n                          </button>\n                          <button\n                            onClick={() => handleDeleteCategory(category.id)}\n                            className=\"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors cursor-pointer\"\n                            title=\"Eliminar\"\n                          >\n                            <i className=\"ri-delete-bin-line text-lg\"></i>\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n            {categories.length === 0 && (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-folder-line text-6xl text-gray-300 dark:text-gray-600 mb-4\"></i>\n                <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                  Nenhuma categoria encontrada\n                </p>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n\n      {/* Subcategories View */}\n      {viewMode === 'subcategories' && (\n        <>\n          <div className=\"flex items-center justify-between mb-6\">\n            <select\n              value={selectedCategoryFilter}\n              onChange={(e) => setSelectedCategoryFilter(e.target.value)}\n              className={`px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-purple-400 focus:border-transparent cursor-pointer`}\n            >\n              <option value=\"\">Todas as Categorias</option>\n              {categories.map(cat => (\n                <option key={cat.id} value={cat.id}>{cat.name}</option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"space-y-8\">\n            {groupedSubcategories.map(({ category, subcategories: catSubcategories }) => (\n              <div key={category.id} className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-xl flex items-center justify-center\">\n                      <i className=\"ri-folder-line text-2xl text-white\"></i>\n                    </div>\n                    <div>\n                      <h2 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                        {category.name}\n                      </h2>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {catSubcategories.length} subcategorias\n                      </p>\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => {\n                      resetSubcategoryForm();\n                      setSubcategoryForm({ ...subcategoryForm, category_id: category.id });\n                      setEditingSubcategory(null);\n                      setShowAddSubcategoryModal(true);\n                    }}\n                    className=\"px-4 py-2 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-add-line mr-2\"></i>\n                    Adicionar Subcategoria\n                  </button>\n                </div>\n\n                {catSubcategories.length === 0 ? (\n                  <p className={`text-center py-8 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>\n                    Nenhuma subcategoria nesta categoria\n                  </p>\n                ) : (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                    {catSubcategories.map((subcategory) => (\n                      <div\n                        key={subcategory.id}\n                        className={`${darkMode ? 'bg-gray-700 border-gray-600' : 'bg-gray-50 border-gray-200'} rounded-xl border p-4 hover:shadow-md transition-shadow`}\n                      >\n                        {subcategory.image_url && (\n                          <div className=\"relative w-full h-32 mb-3 rounded-lg overflow-hidden bg-gradient-to-br from-pink-100 to-blue-100 dark:from-gray-600 dark:to-gray-500\">\n                            <img\n                              src={subcategory.image_url}\n                              alt={subcategory.name}\n                              className=\"w-full h-full object-cover\"\n                            />\n                          </div>\n                        )}\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <h3 className={`font-semibold text-sm ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {subcategory.name}\n                          </h3>\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                            subcategory.is_active !== false\n                              ? 'bg-green-100 text-green-700'\n                              : 'bg-red-100 text-red-700'\n                          }`}>\n                            {subcategory.is_active !== false ? 'Ativa' : 'Inativa'}\n                          </span>\n                        </div>\n                        {subcategory.description && (\n                          <p className={`text-xs mb-3 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            {subcategory.description}\n                          </p>\n                        )}\n                        <div className=\"flex items-center gap-2\">\n                          <button\n                            onClick={() => openEditSubcategoryModal(subcategory)}\n                            className=\"flex-1 px-3 py-1.5 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap\"\n                          >\n                            <i className=\"ri-edit-line mr-1\"></i>\n                            Editar\n                          </button>\n                          <button\n                            onClick={() => handleDeleteSubcategory(subcategory.id)}\n                            className=\"px-3 py-1.5 bg-red-500 text-white rounded-lg text-xs hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap\"\n                          >\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n\n      {/* Modal Adicionar/Editar Categoria */}\n      {showAddCategoryModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-2xl w-full`}>\n            <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              {editingCategory ? 'Editar Categoria' : 'Adicionar Categoria'}\n            </h2>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Nome da Categoria *\n                </label>\n                <input\n                  type=\"text\"\n                  value={categoryForm.name}\n                  onChange={(e) => setCategoryForm({ ...categoryForm, name: e.target.value })}\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Descri√ß√£o\n                </label>\n                <textarea\n                  value={categoryForm.description}\n                  onChange={(e) => setCategoryForm({ ...categoryForm, description: e.target.value })}\n                  rows={3}\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              <div>\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={categoryForm.is_active}\n                    onChange={(e) => setCategoryForm({ ...categoryForm, is_active: e.target.checked })}\n                    className=\"w-5 h-5 text-pink-500 rounded focus:ring-2 focus:ring-pink-400 cursor-pointer\"\n                  />\n                  <span className={darkMode ? 'text-gray-300' : 'text-gray-700'}>Categoria Ativa</span>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 mt-8\">\n              <button\n                onClick={handleSaveCategory}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-save-line mr-2\"></i>\n                {editingCategory ? 'Guardar Altera√ß√µes' : 'Adicionar Categoria'}\n              </button>\n              <button\n                onClick={() => {\n                  setShowAddCategoryModal(false);\n                  setEditingCategory(null);\n                  resetCategoryForm();\n                }}\n                className={`px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                }`}\n              >\n                Cancelar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal Adicionar/Editar Subcategoria */}\n      {showAddSubcategoryModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-2xl w-full`}>\n            <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              {editingSubcategory ? 'Editar Subcategoria' : 'Adicionar Subcategoria'}\n            </h2>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Categoria *\n                </label>\n                <select\n                  value={subcategoryForm.category_id}\n                  onChange={(e) => setSubcategoryForm({ ...subcategoryForm, category_id: e.target.value })}\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n                >\n                  <option value=\"\">Selecionar categoria</option>\n                  {categories.map(cat => (\n                    <option key={cat.id} value={cat.id}>{cat.name}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Nome da Subcategoria *\n                </label>\n                <input\n                  type=\"text\"\n                  value={subcategoryForm.name}\n                  onChange={(e) => setSubcategoryForm({ ...subcategoryForm, name: e.target.value })}\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Descri√ß√£o\n                </label>\n                <textarea\n                  value={subcategoryForm.description}\n                  onChange={(e) => setSubcategoryForm({ ...subcategoryForm, description: e.target.value })}\n                  rows={3}\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  URL da Imagem\n                </label>\n                <input\n                  type=\"text\"\n                  value={subcategoryForm.image_url}\n                  onChange={(e) => setSubcategoryForm({ ...subcategoryForm, image_url: e.target.value })}\n                  className={`w-full px-4 py-2 rounded-lg border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                  } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n                />\n              </div>\n\n              <div>\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={subcategoryForm.is_active}\n                    onChange={(e) => setSubcategoryForm({ ...subcategoryForm, is_active: e.target.checked })}\n                    className=\"w-5 h-5 text-pink-500 rounded focus:ring-2 focus:ring-pink-400 cursor-pointer\"\n                  />\n                  <span className={darkMode ? 'text-gray-300' : 'text-gray-700'}>Subcategoria Ativa</span>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 mt-8\">\n              <button\n                onClick={handleSaveSubcategory}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-save-line mr-2\"></i>\n                {editingSubcategory ? 'Guardar Altera√ß√µes' : 'Adicionar Subcategoria'}\n              </button>\n              <button\n                onClick={() => {\n                  setShowAddSubcategoryModal(false);\n                  setEditingSubcategory(null);\n                  resetSubcategoryForm();\n                }}\n                className={`px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                }`}\n              >\n                Cancelar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface OrdersManagementProps {\n  darkMode: boolean;\n}\n\nexport default function OrdersManagement({ darkMode }: OrdersManagementProps) {\n  const [orders, setOrders] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedOrder, setSelectedOrder] = useState<any>(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [filterStatus, setFilterStatus] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [trackingNumber, setTrackingNumber] = useState('');\n  const [trackingUrl, setTrackingUrl] = useState('');\n  const [orderNotes, setOrderNotes] = useState('');\n  const [showCreateTestOrderModal, setShowCreateTestOrderModal] = useState(false);\n  const [creatingTestOrders, setCreatingTestOrders] = useState(false);\n\n  useEffect(() => {\n    loadOrders();\n  }, []);\n\n  const loadOrders = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('orders')\n        .select(`\n          *,\n          customers (\n            email,\n            full_name,\n            phone\n          ),\n          order_items (\n            id,\n            product_id,\n            product_name,\n            quantity,\n            price,\n            product_image\n          )\n        `)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      if (data) setOrders(data);\n    } catch (error) {\n      console.error('Erro ao carregar encomendas:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createTestOrders = async () => {\n    setCreatingTestOrders(true);\n    try {\n      // Verificar se j√° existe cliente de teste\n      let testCustomerId;\n      const { data: existingCustomer } = await supabase\n        .from('customers')\n        .select('id')\n        .eq('email', 'teste@marisol.lu')\n        .maybeSingle();\n\n      if (existingCustomer) {\n        testCustomerId = existingCustomer.id;\n      } else {\n        // Criar cliente de teste\n        const { data: newCustomer, error: customerError } = await supabase\n          .from('customers')\n          .insert({\n            name: 'Cliente de Teste',\n            email: 'teste@marisol.lu',\n            full_name: 'Cliente de Teste',\n            phone: '+352 691 123 456',\n            role: 'customer'\n          })\n          .select()\n          .single();\n\n        if (customerError) throw customerError;\n        testCustomerId = newCustomer.id;\n      }\n\n      // Buscar produtos reais da base de dados para usar nas encomendas de teste\n      const { data: realProducts, error: productsError } = await supabase\n        .from('products')\n        .select('id, name, price, images')\n        .eq('is_active', true)\n        .limit(5);\n\n      if (productsError) throw productsError;\n\n      // Se n√£o houver produtos suficientes, usar produtos fict√≠cios (sem product_id)\n      const testProducts = realProducts && realProducts.length >= 3 ? [\n        {\n          id: realProducts[0].id,\n          name: realProducts[0].name,\n          image: realProducts[0].images?.[0] || 'https://readdy.ai/api/search-image?query=elegant%20evening%20dress%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test1&orientation=squarish',\n          price: realProducts[0].price || 45.00\n        },\n        {\n          id: realProducts[1].id,\n          name: realProducts[1].name,\n          image: realProducts[1].images?.[0] || 'https://readdy.ai/api/search-image?query=luxury%20leather%20handbag%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test2&orientation=squarish',\n          price: realProducts[1].price || 65.00\n        },\n        {\n          id: realProducts[2].id,\n          name: realProducts[2].name,\n          image: realProducts[2].images?.[0] || 'https://readdy.ai/api/search-image?query=elegant%20high%20heels%20shoes%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test3&orientation=squarish',\n          price: realProducts[2].price || 55.00\n        }\n      ] : [\n        {\n          id: null, // Usar null quando n√£o h√° produto real\n          name: 'Vestido Elegante de Teste',\n          image: 'https://readdy.ai/api/search-image?query=elegant%20evening%20dress%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test1&orientation=squarish',\n          price: 45.00\n        },\n        {\n          id: null,\n          name: 'Bolsa de Couro de Teste',\n          image: 'https://readdy.ai/api/search-image?query=luxury%20leather%20handbag%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test2&orientation=squarish',\n          price: 65.00\n        },\n        {\n          id: null,\n          name: 'Sapatos de Salto de Teste',\n          image: 'https://readdy.ai/api/search-image?query=elegant%20high%20heels%20shoes%20fashion%20product%20simple%20white%20background%20high%20quality%20ecommerce&width=400&height=400&seq=test3&orientation=squarish',\n          price: 55.00\n        }\n      ];\n\n      const testOrdersData = [\n        {\n          status: 'pending',\n          payment_status: 'pending',\n          label: 'Encomenda Pendente (Aguarda Pagamento)',\n          products: [testProducts[0], testProducts[1]],\n          subtotal: (testProducts[0].price + testProducts[1].price),\n          shipping_cost: 5.00\n        },\n        {\n          status: 'processing',\n          payment_status: 'paid',\n          label: 'Encomenda Em Processo (Paga, A Preparar)',\n          products: [testProducts[0], testProducts[2]],\n          subtotal: (testProducts[0].price + testProducts[2].price),\n          shipping_cost: 5.00\n        },\n        {\n          status: 'shipped',\n          payment_status: 'paid',\n          label: 'Encomenda Enviada',\n          products: [testProducts[1], testProducts[2]],\n          subtotal: (testProducts[1].price + testProducts[2].price),\n          shipping_cost: 5.00,\n          tracking: {\n            carrier: 'Post Luxembourg',\n            number: 'LU123456789TEST',\n            url: 'https://www.post.lu/en/track-trace'\n          }\n        },\n        {\n          status: 'completed',\n          payment_status: 'paid',\n          label: 'Encomenda Conclu√≠da',\n          products: [testProducts[0], testProducts[1], testProducts[2]],\n          subtotal: (testProducts[0].price + testProducts[1].price + testProducts[2].price),\n          shipping_cost: 0.00\n        },\n        {\n          status: 'cancelled',\n          payment_status: 'refunded',\n          label: 'Encomenda Cancelada',\n          products: [testProducts[0]],\n          subtotal: testProducts[0].price,\n          shipping_cost: 5.00\n        }\n      ];\n\n      const createdOrders = [];\n\n      for (const testOrder of testOrdersData) {\n        const totalAmount = testOrder.subtotal + testOrder.shipping_cost;\n        const taxAmount = totalAmount * 0.17;\n\n        // Gerar n√∫mero de encomenda √∫nico (formato: ORD-TIMESTAMP-RANDOM)\n        const orderNumber = `ORD-${Date.now()}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;\n\n        // Criar encomenda\n        const { data: order, error: orderError } = await supabase\n          .from('orders')\n          .insert({\n            order_number: orderNumber,\n            customer_id: testCustomerId,\n            subtotal: testOrder.subtotal,\n            total: totalAmount,\n            tax_amount: taxAmount,\n            tax_rate: 0.17,\n            shipping_cost: testOrder.shipping_cost,\n            status: testOrder.status,\n            payment_status: testOrder.payment_status,\n            payment_method: 'card',\n            shipping_method: testOrder.shipping_cost === 0 ? 'free' : 'standard',\n            shipping_address: {\n              name: 'Cliente de Teste',\n              street: 'Rua de Teste, 123',\n              city: 'Luxembourg',\n              postal_code: 'L-1234',\n              country: 'LU',\n              phone: '+352 691 123 456'\n            },\n            notes: `ENCOMENDA DE TESTE - ${testOrder.label}${testOrder.tracking?.carrier ? ` - Transportadora: ${testOrder.tracking.carrier}` : ''}`,\n            tracking_number: testOrder.tracking?.number || null,\n            is_test: true\n          })\n          .select()\n          .single();\n\n        if (orderError) throw orderError;\n\n        // Criar itens da encomenda (com product_id real ou null)\n        const orderItems = testOrder.products.map((product: any) => ({\n          order_id: order.id,\n          product_id: product.id, // Agora usa o ID real do produto ou null\n          product_name: product.name,\n          product_image: product.image,\n          quantity: 1,\n          price: product.price\n        }));\n\n        const { error: itemsError } = await supabase\n          .from('order_items')\n          .insert(orderItems);\n\n        if (itemsError) throw itemsError;\n\n        createdOrders.push(testOrder.label);\n      }\n\n      alert(`‚úÖ ${createdOrders.length} encomendas de teste criadas com sucesso!\\n\\n${createdOrders.join('\\n')}`);\n      setShowCreateTestOrderModal(false);\n      await loadOrders();\n    } catch (error) {\n      console.error('Erro ao criar encomendas de teste:', error);\n      alert(`‚ùå Erro ao criar encomendas de teste: ${error instanceof Error ? error.message : 'Erro desconhecido'}`);\n    } finally {\n      setCreatingTestOrders(false);\n    }\n  };\n\n  const deleteTestOrders = async () => {\n    if (!confirm('‚ö†Ô∏è Tem certeza que deseja eliminar TODAS as encomendas de teste?')) {\n      return;\n    }\n\n    try {\n      // Buscar encomendas de teste\n      const { data: testOrders } = await supabase\n        .from('orders')\n        .select('id')\n        .eq('is_test', true);\n\n      if (!testOrders || testOrders.length === 0) {\n        alert('‚ÑπÔ∏è Nenhuma encomenda de teste encontrada.');\n        return;\n      }\n\n      const orderIds = testOrders.map(o => o.id);\n\n      // Eliminar order_items primeiro\n      const { error: itemsError } = await supabase\n        .from('order_items')\n        .delete()\n        .in('order_id', orderIds);\n\n      if (itemsError) throw itemsError;\n\n      // Eliminar encomendas\n      const { error: ordersError } = await supabase\n        .from('orders')\n        .delete()\n        .in('id', orderIds);\n\n      if (ordersError) throw ordersError;\n\n      alert(`‚úÖ ${testOrders.length} encomendas de teste eliminadas com sucesso!`);\n      await loadOrders();\n    } catch (error) {\n      console.error('Erro ao eliminar encomendas de teste:', error);\n      alert('‚ùå Erro ao eliminar encomendas de teste');\n    }\n  };\n\n  const updateOrderStatus = async (orderId: string, newStatus: string) => {\n    try {\n      const { error } = await supabase\n        .from('orders')\n        .update({ status: newStatus, updated_at: new Date().toISOString() })\n        .eq('id', orderId);\n\n      if (error) throw error;\n      await loadOrders();\n      alert('‚úÖ Estado atualizado com sucesso!');\n    } catch (error) {\n      console.error('Erro ao atualizar estado:', error);\n      alert('‚ùå Erro ao atualizar estado da encomenda');\n    }\n  };\n\n  const updateTrackingInfo = async () => {\n    if (!selectedOrder) return;\n    \n    try {\n      const { error } = await supabase\n        .from('orders')\n        .update({ \n          tracking_number: trackingNumber,\n          notes: orderNotes,\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', selectedOrder.id);\n\n      if (error) throw error;\n      \n      setSelectedOrder({\n        ...selectedOrder,\n        tracking_number: trackingNumber,\n        notes: orderNotes\n      });\n      \n      await loadOrders();\n      alert('‚úÖ Informa√ß√µes atualizadas com sucesso!');\n    } catch (error) {\n      console.error('Erro ao atualizar rastreamento:', error);\n      alert('‚ùå Erro ao atualizar informa√ß√µes');\n    }\n  };\n\n  const viewOrderDetails = (order: any) => {\n    setSelectedOrder(order);\n    setTrackingNumber(order.tracking_number || '');\n    setTrackingUrl(order.tracking_url || '');\n    setOrderNotes(order.notes || '');\n    setShowDetailsModal(true);\n  };\n\n  const filteredOrders = orders.filter(order => {\n    const matchesStatus = !filterStatus || order.status === filterStatus;\n    const matchesSearch = !searchTerm || \n      order.customers?.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      order.customers?.full_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      order.id?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    return matchesStatus && matchesSearch;\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'completed': return 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300';\n      case 'processing': return 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300';\n      case 'shipped': return 'bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300';\n      case 'cancelled': return 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300';\n      case 'refunded': return 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300';\n      default: return 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300';\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case 'completed': return '‚úì Conclu√≠da';\n      case 'processing': return '‚è≥ Em Processo';\n      case 'shipped': return 'üì¶ Enviada';\n      case 'cancelled': return '‚úó Cancelada';\n      case 'refunded': return '‚Ü© Reembolsada';\n      default: return '‚è∏ Pendente';\n    }\n  };\n\n  const getPaymentStatusLabel = (status: string) => {\n    switch (status) {\n      case 'paid': return '‚úì Pago';\n      case 'pending': return '‚è≥ Pendente';\n      case 'refunded': return '‚Ü© Reembolsado';\n      case 'failed': return '‚úó Falhado';\n      default: return '‚è∏ Pendente';\n    }\n  };\n\n  // Estat√≠sticas\n  const stats = {\n    total: orders.length,\n    pending: orders.filter(o => o.status === 'pending').length,\n    processing: orders.filter(o => o.status === 'processing').length,\n    shipped: orders.filter(o => o.status === 'shipped').length,\n    completed: orders.filter(o => o.status === 'completed').length,\n    cancelled: orders.filter(o => o.status === 'cancelled').length,\n    testOrders: orders.filter(o => o.is_test).length\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"mb-8 flex items-center justify-between\">\n        <div>\n          <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            üì¶ Gest√£o de Encomendas\n          </h1>\n          <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n            {orders.length} encomendas no total\n            {stats.testOrders > 0 && (\n              <span className=\"ml-2 text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300\">\n                {stats.testOrders} de teste\n              </span>\n            )}\n          </p>\n        </div>\n        <div className=\"flex gap-3\">\n          <button\n            onClick={() => setShowCreateTestOrderModal(true)}\n            className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n          >\n            <i className=\"ri-add-line mr-1\"></i>\n            Criar Encomendas de Teste\n          </button>\n          {stats.testOrders > 0 && (\n            <button\n              onClick={deleteTestOrders}\n              className=\"px-4 py-2 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n            >\n              <i className=\"ri-delete-bin-line mr-1\"></i>\n              Eliminar Encomendas de Teste\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6\">\n        {[\n          { label: 'Pendentes', status: 'pending', count: stats.pending, color: 'yellow', icon: 'ri-time-line' },\n          { label: 'Em Processo', status: 'processing', count: stats.processing, color: 'blue', icon: 'ri-loader-line' },\n          { label: 'Enviadas', status: 'shipped', count: stats.shipped, color: 'purple', icon: 'ri-truck-line' },\n          { label: 'Conclu√≠das', status: 'completed', count: stats.completed, color: 'green', icon: 'ri-check-line' },\n          { label: 'Canceladas', status: 'cancelled', count: stats.cancelled, color: 'red', icon: 'ri-close-line' },\n        ].map((stat) => (\n          <div key={stat.status} className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-xl p-4 shadow-sm border`}>\n            <div className=\"flex items-center justify-between mb-2\">\n              <i className={`${stat.icon} text-2xl text-${stat.color}-500`}></i>\n              <span className={`text-2xl font-bold text-${stat.color}-500`}>{stat.count}</span>\n            </div>\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{stat.label}</p>\n          </div>\n        ))}\n      </div>\n\n      {/* Filtros */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border mb-6`}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              üîç Pesquisar\n            </label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Email, nome ou ID da encomenda...\"\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n            />\n          </div>\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              üìä Estado\n            </label>\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n            >\n              <option value=\"\">Todos os estados</option>\n              <option value=\"pending\">Pendente</option>\n              <option value=\"processing\">Em Processo</option>\n              <option value=\"shipped\">Enviada</option>\n              <option value=\"completed\">Conclu√≠da</option>\n              <option value=\"cancelled\">Cancelada</option>\n              <option value=\"refunded\">Reembolsada</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Encomendas */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl shadow-sm border overflow-hidden`}>\n        {filteredOrders.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <i className={`ri-shopping-bag-line text-6xl mb-4 ${darkMode ? 'text-gray-600' : 'text-gray-300'}`}></i>\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n              Nenhuma encomenda encontrada\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} border-b ${darkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                <tr>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    ID\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Cliente\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Produtos\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Total\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Estado\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Pagamento\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Data\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    A√ß√µes\n                  </th>\n                </tr>\n              </thead>\n              <tbody className={`divide-y ${darkMode ? 'divide-gray-700' : 'divide-gray-200'}`}>\n                {filteredOrders.map((order) => (\n                  <tr key={order.id} className={`${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50'} transition-colors`}>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium\">\n                          #{order.id.substring(0, 8).toUpperCase()}\n                        </span>\n                        {order.is_test && (\n                          <span className=\"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-medium\">\n                            TESTE\n                          </span>\n                        )}\n                      </div>\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      <div>\n                        <p className=\"font-medium\">{order.customers?.full_name || 'N/A'}</p>\n                        <p className=\"text-xs\">{order.customers?.email || 'N/A'}</p>\n                      </div>\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      <div className=\"flex items-center gap-2\">\n                        <i className=\"ri-shopping-cart-line text-pink-500\"></i>\n                        <span>{order.order_items?.length || 0} produtos</span>\n                      </div>\n                    </td>\n                    <td className={`px-6 py-4 text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      ‚Ç¨{order.total?.toFixed(2)}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`inline-flex px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(order.status)}`}>\n                        {getStatusLabel(order.status)}\n                      </span>\n                    </td>\n                    <td className={`px-6 py-4 text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                      {getPaymentStatusLabel(order.payment_status)}\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      {new Date(order.created_at).toLocaleDateString('pt-PT', {\n                        day: '2-digit',\n                        month: '2-digit',\n                        year: 'numeric',\n                      })}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <button\n                        onClick={() => viewOrderDetails(order)}\n                        className=\"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg text-sm hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n                      >\n                        <i className=\"ri-eye-line mr-1\"></i>\n                        Ver Detalhes\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Modal Criar Encomendas de Teste */}\n      {showCreateTestOrderModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-2xl w-full`}>\n            <h2 className={`text-2xl font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              üß™ Criar Encomendas de Teste\n            </h2>\n            \n            <div className={`p-4 rounded-lg mb-6 ${darkMode ? 'bg-blue-900/20 border border-blue-700/30' : 'bg-blue-50 border border-blue-200'}`}>\n              <p className={`text-sm ${darkMode ? 'text-blue-300' : 'text-blue-800'} mb-2`}>\n                <i className=\"ri-information-line mr-2\"></i>\n                <strong>Objetivo:</strong> Validar que todos os estados funcionam corretamente\n              </p>\n              <p className={`text-xs ${darkMode ? 'text-blue-300/70' : 'text-blue-700'}`}>\n                Ser√£o criadas 5 encomendas de teste com diferentes estados para valida√ß√£o do sistema.\n              </p>\n            </div>\n\n            <div className=\"space-y-3 mb-6\">\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    1. Encomenda Pendente\n                  </span>\n                  <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700\">\n                    ‚è∏ Aguarda Pagamento\n                  </span>\n                </div>\n                <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  2 produtos ‚Ä¢ ‚Ç¨110.00 + ‚Ç¨5.00 envio\n                </p>\n              </div>\n\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    2. Encomenda Em Processo\n                  </span>\n                  <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700\">\n                    ‚è≥ Paga, A Preparar\n                  </span>\n                </div>\n                <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  2 produtos ‚Ä¢ ‚Ç¨100.00 + ‚Ç¨5.00 envio\n                </p>\n              </div>\n\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    3. Encomenda Enviada\n                  </span>\n                  <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700\">\n                    üì¶ Com Rastreamento\n                  </span>\n                </div>\n                <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  2 produtos ‚Ä¢ ‚Ç¨120.00 + ‚Ç¨5.00 envio ‚Ä¢ Post Luxembourg\n                </p>\n              </div>\n\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    4. Encomenda Conclu√≠da\n                  </span>\n                  <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700\">\n                    ‚úì Finalizada\n                  </span>\n                </div>\n                <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  3 produtos ‚Ä¢ ‚Ç¨165.00 + envio gr√°tis\n                </p>\n              </div>\n\n              <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    5. Encomenda Cancelada\n                  </span>\n                  <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700\">\n                    ‚úó Reembolsada\n                  </span>\n                </div>\n                <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  1 produto ‚Ä¢ ‚Ç¨45.00 + ‚Ç¨5.00 envio\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowCreateTestOrderModal(false)}\n                className={`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                }`}\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={createTestOrders}\n                disabled={creatingTestOrders}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer disabled:opacity-50\"\n              >\n                {creatingTestOrders ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                    A Criar...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"ri-checkbox-circle-line mr-2\"></i>\n                    Criar 5 Encomendas de Teste\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal Detalhes da Encomenda */}\n      {showDetailsModal && selectedOrder && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-5xl w-full my-8 max-h-[90vh] overflow-y-auto`}>\n            <div className=\"flex items-center justify-between mb-6\">\n              <div>\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    Encomenda #{selectedOrder.id.substring(0, 8).toUpperCase()}\n                  </h2>\n                  {selectedOrder.is_test && (\n                    <span className=\"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300\">\n                      üß™ ENCOMENDA DE TESTE\n                    </span>\n                  )}\n                </div>\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  {selectedOrder.order_items?.length || 0} produtos ‚Ä¢ \n                  Criada em {new Date(selectedOrder.created_at).toLocaleDateString('pt-PT', {\n                    day: '2-digit',\n                    month: 'long',\n                    year: 'numeric',\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  })}\n                </p>\n              </div>\n              <button\n                onClick={() => setShowDetailsModal(false)}\n                className={`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                <i className=\"ri-close-line text-xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n              {/* Informa√ß√µes do Cliente */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-user-line mr-2 text-pink-500\"></i>\n                  üë§ Informa√ß√µes do Cliente\n                </h3>\n                <div className=\"space-y-3\">\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Nome Completo</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedOrder.customers?.full_name || selectedOrder.shipping_address?.name || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Email</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedOrder.customers?.email || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Telefone</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedOrder.customers?.phone || selectedOrder.shipping_address?.phone || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Tipo de Cliente</p>\n                    <span className=\"inline-flex px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700\">\n                      {selectedOrder.customers ? 'Cliente Registado' : 'Compra como Convidado'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Endere√ßo de Envio */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-map-pin-line mr-2 text-pink-500\"></i>\n                  üè† Endere√ßo de Envio\n                </h3>\n                <div className=\"space-y-2\">\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Destinat√°rio</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedOrder.shipping_address?.name || selectedOrder.customers?.full_name || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Rua e N√∫mero</p>\n                    <p className={`${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      {selectedOrder.shipping_address?.street || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>C√≥digo Postal e Cidade</p>\n                    <p className={`${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      {selectedOrder.shipping_address?.postal_code} {selectedOrder.shipping_address?.city}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Pa√≠s</p>\n                    <p className={`${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      {selectedOrder.shipping_address?.country || 'LU'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Produtos da Encomenda */}\n            <div className={`p-6 rounded-xl mb-6 ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n              <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                <i className=\"ri-shopping-bag-line mr-2 text-pink-500\"></i>\n                üì¶ Produtos da Encomenda ({selectedOrder.order_items?.length || 0})\n              </h3>\n              \n              {selectedOrder.order_items && selectedOrder.order_items.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {selectedOrder.order_items.map((item: any) => (\n                    <div key={item.id} className={`p-4 rounded-lg flex items-center gap-4 ${darkMode ? 'bg-gray-600' : 'bg-white border border-gray-200'}`}>\n                      {item.product_image && (\n                        <img\n                          src={item.product_image}\n                          alt={item.product_name}\n                          className=\"w-20 h-20 rounded-lg object-cover\"\n                        />\n                      )}\n                      <div className=\"flex-1\">\n                        <p className={`font-medium mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                          {item.product_name}\n                        </p>\n                        <div className=\"flex items-center gap-4 text-sm\">\n                          <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                            Quantidade: <strong>{item.quantity}</strong>\n                          </span>\n                          <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                            Pre√ßo unit√°rio: <strong>‚Ç¨{item.price?.toFixed(2)}</strong>\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-lg font-bold text-pink-500\">\n                          ‚Ç¨{(item.quantity * item.price).toFixed(2)}\n                        </p>\n                        <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                          Subtotal\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                  Nenhum produto encontrado\n                </p>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n              {/* Estado e M√©todo de Envio */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-truck-line mr-2 text-pink-500\"></i>\n                  üöö Estado & Envio\n                </h3>\n                <div className=\"space-y-4\">\n                  <div>\n                    <p className={`text-xs mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Estado Atual</p>\n                    <span className={`inline-flex px-4 py-2 rounded-full text-sm font-medium ${getStatusColor(selectedOrder.status)}`}>\n                      {getStatusLabel(selectedOrder.status)}\n                    </span>\n                  </div>\n                  \n                  <div>\n                    <p className={`text-xs mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Alterar Estado</p>\n                    <select\n                      value={selectedOrder.status}\n                      onChange={(e) => {\n                        updateOrderStatus(selectedOrder.id, e.target.value);\n                        setSelectedOrder({ ...selectedOrder, status: e.target.value });\n                      }}\n                      className={`w-full px-4 py-2 rounded-lg border ${\n                        darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                      } cursor-pointer focus:ring-2 focus:ring-pink-400`}\n                    >\n                      <option value=\"pending\">‚è∏ Pendente</option>\n                      <option value=\"processing\">‚è≥ Em Processo</option>\n                      <option value=\"shipped\">üì¶ Enviada</option>\n                      <option value=\"completed\">‚úì Conclu√≠da</option>\n                      <option value=\"cancelled\">‚úó Cancelada</option>\n                      <option value=\"refunded\">‚Ü© Reembolsada</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <p className={`text-xs mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>M√©todo de Envio</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedOrder.shipping_method === 'free' ? 'üéÅ Envio Gr√°tis' : \n                       selectedOrder.shipping_method === 'express' ? '‚ö° Envio Expresso' : \n                       'üì¶ Envio Standard'}\n                    </p>\n                  </div>\n\n                  {selectedOrder.updated_at && (\n                    <div>\n                      <p className={`text-xs mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>√öltima Atualiza√ß√£o</p>\n                      <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                        {new Date(selectedOrder.updated_at).toLocaleDateString('pt-PT', {\n                          day: '2-digit',\n                          month: 'long',\n                          year: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Resumo Financeiro */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-money-euro-circle-line mr-2 text-pink-500\"></i>\n                  üí∞ Resumo Financeiro\n                </h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>M√©todo de Pagamento</span>\n                    <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedOrder.payment_method === 'card' ? 'üí≥ Cart√£o' : \n                       selectedOrder.payment_method === 'paypal' ? 'PayPal' : \n                       'Outro'}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Estado do Pagamento</span>\n                    <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {getPaymentStatusLabel(selectedOrder.payment_status)}\n                    </span>\n                  </div>\n                  <div className={`pt-3 border-t ${darkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                    <div className=\"flex justify-between mb-2\">\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Subtotal</span>\n                      <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                        ‚Ç¨{(selectedOrder.subtotal || 0).toFixed(2)}\n                      </span>\n                    </div>\n                    {selectedOrder.tax_amount > 0 && (\n                      <div className=\"flex justify-between mb-2\">\n                        <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>IVA (17%)</span>\n                        <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                          ‚Ç¨{selectedOrder.tax_amount?.toFixed(2)}\n                        </span>\n                      </div>\n                    )}\n                    <div className=\"flex justify-between mb-2\">\n                      <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>Envio</span>\n                      <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                        {selectedOrder.shipping_cost === 0 ? 'Gr√°tis' : `‚Ç¨${selectedOrder.shipping_cost?.toFixed(2)}`}\n                      </span>\n                    </div>\n                  </div>\n                  <div className={`flex justify-between pt-3 border-t ${darkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                    <span className={`font-semibold text-lg ${darkMode ? 'text-white' : 'text-gray-800'}`}>Total Pago</span>\n                    <span className=\"font-bold text-2xl text-green-500\">\n                      ‚Ç¨{selectedOrder.total?.toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Rastreamento */}\n            <div className={`p-6 rounded-xl mb-6 ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n              <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                <i className=\"ri-map-pin-time-line mr-2 text-pink-500\"></i>\n                üìç Informa√ß√µes de Rastreamento\n              </h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <label className={`block text-xs font-medium mb-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    N√∫mero de Rastreamento\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={trackingNumber}\n                    onChange={(e) => setTrackingNumber(e.target.value)}\n                    placeholder=\"Ex: LU123456789\"\n                    className={`w-full px-4 py-2 rounded-lg border ${\n                      darkMode ? 'bg-gray-600 border-gray-500 text-white' : 'bg-white border-gray-300 text-gray-800'\n                    } focus:ring-2 focus:ring-pink-400`}\n                  />\n                </div>\n              </div>\n\n              <div className=\"mb-4 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800\">\n                <p className={`text-sm font-medium mb-2 ${darkMode ? 'text-blue-300' : 'text-blue-800'}`}>\n                  <i className=\"ri-information-line mr-2\"></i>\n                  Links de Rastreamento √öteis:\n                </p>\n                <div className=\"flex flex-wrap gap-2\">\n                  <a\n                    href=\"https://www.post.lu/en/track-trace\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"px-3 py-1 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-external-link-line mr-1\"></i>\n                    Post Luxembourg\n                  </a>\n                  <a\n                    href=\"https://www.dhl.com/lu-en/home/tracking.html\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"px-3 py-1 bg-yellow-500 text-white rounded-lg text-xs hover:bg-yellow-600 transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-external-link-line mr-1\"></i>\n                    DHL\n                  </a>\n                  <a\n                    href=\"https://www.ups.com/track\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"px-3 py-1 bg-amber-600 text-white rounded-lg text-xs hover:bg-amber-700 transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-external-link-line mr-1\"></i>\n                    UPS\n                  </a>\n                  <a\n                    href=\"https://www.fedex.com/en-lu/tracking.html\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"px-3 py-1 bg-purple-500 text-white rounded-lg text-xs hover:bg-purple-600 transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-external-link-line mr-1\"></i>\n                    FedEx\n                  </a>\n                </div>\n              </div>\n\n              {selectedOrder.tracking_number && (\n                <div className=\"mb-4 p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800\">\n                  <p className={`text-sm font-medium mb-2 ${darkMode ? 'text-green-300' : 'text-green-800'}`}>\n                    <i className=\"ri-check-line mr-2\"></i>\n                    Informa√ß√µes de Rastreamento Atuais:\n                  </p>\n                  <div className=\"space-y-1 text-sm\">\n                    <p className={darkMode ? 'text-gray-300' : 'text-gray-700'}>\n                      <strong>N√∫mero:</strong> {selectedOrder.tracking_number}\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              <button\n                onClick={updateTrackingInfo}\n                className=\"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-save-line mr-2\"></i>\n                Guardar Informa√ß√µes de Rastreamento\n              </button>\n            </div>\n\n            {/* Notas Internas */}\n            <div className={`p-6 rounded-xl mb-6 ${darkMode ? 'bg-yellow-900/20 border border-yellow-700/30' : 'bg-yellow-50 border border-yellow-200'}`}>\n              <h3 className={`font-semibold mb-4 flex items-center ${darkMode ? 'text-yellow-300' : 'text-yellow-800'}`}>\n                <i className=\"ri-sticky-note-line mr-2 text-yellow-500\"></i>\n                üìù Notas Internas da Encomenda\n              </h3>\n              <p className={`text-xs mb-3 ${darkMode ? 'text-yellow-300/70' : 'text-yellow-700'}`}>\n                Campo privado para notas administrativas sobre esta encomenda.\n              </p>\n              <textarea\n                value={orderNotes}\n                onChange={(e) => setOrderNotes(e.target.value)}\n                rows={3}\n                placeholder=\"Ex: Cliente pediu entrega r√°pida, Houve atraso, Problema resolvido...\"\n                className={`w-full px-4 py-2 rounded-lg border ${\n                  darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n                } focus:ring-2 focus:ring-yellow-400`}\n              />\n              {selectedOrder.notes && (\n                <div className=\"mt-3 p-3 rounded-lg bg-white/50 dark:bg-gray-700/50\">\n                  <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    Nota Atual:\n                  </p>\n                  <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    {selectedOrder.notes}\n                  </p>\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowDetailsModal(false)}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-close-line mr-2\"></i>\n                Fechar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  import.meta.env.VITE_PUBLIC_SUPABASE_URL,\n  import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY\n);\n\ninterface CustomersManagementProps {\n  darkMode: boolean;\n}\n\nexport default function CustomersManagement({ darkMode }: CustomersManagementProps) {\n  const [customers, setCustomers] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterType, setFilterType] = useState('all'); // all, new, recurring, vip\n  const [selectedCustomer, setSelectedCustomer] = useState<any>(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [customerNotes, setCustomerNotes] = useState('');\n  const [savingNotes, setSavingNotes] = useState(false);\n  const [expandedOrders, setExpandedOrders] = useState<Set<string>>(new Set());\n  const [selectedCustomers, setSelectedCustomers] = useState<Set<string>>(new Set());\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n\n  useEffect(() => {\n    loadCustomers();\n  }, []);\n\n  const loadCustomers = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('customers')\n        .select(`\n          id,\n          email,\n          full_name,\n          phone,\n          role,\n          created_at,\n          notes\n        `)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      \n      // Carregar estat√≠sticas para cada cliente\n      if (data) {\n        const customersWithStats = await Promise.all(\n          data.map(async (customer) => {\n            const { data: orders } = await supabase\n              .from('orders')\n              .select('id, total_amount, created_at')\n              .eq('customer_id', customer.id);\n\n            const { data: newsletter } = await supabase\n              .from('newsletter_subscribers')\n              .select('id')\n              .eq('email', customer.email)\n              .maybeSingle();\n\n            const totalSpent = orders?.reduce((sum, order) => sum + (order.total_amount || 0), 0) || 0;\n            const orderCount = orders?.length || 0;\n            const lastPurchase = orders?.[0]?.created_at;\n            \n            // Determinar tipo de cliente\n            let customerType = 'new';\n            if (orderCount === 0) customerType = 'new';\n            else if (orderCount >= 1 && orderCount < 3) customerType = 'recurring';\n            else if (orderCount >= 3 || totalSpent >= 300) customerType = 'vip';\n\n            return {\n              ...customer,\n              orderCount,\n              totalSpent,\n              lastPurchase,\n              customerType,\n              isNewsletterSubscribed: !!newsletter,\n            };\n          })\n        );\n        setCustomers(customersWithStats);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar clientes:', error);\n      alert('Erro ao carregar clientes. Por favor, verifique as permiss√µes no Supabase.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const viewCustomerDetails = async (customer: any) => {\n    try {\n      // Carregar encomendas com produtos\n      const { data: ordersData } = await supabase\n        .from('orders')\n        .select(`\n          *,\n          order_items (\n            id,\n            product_id,\n            product_name,\n            quantity,\n            price,\n            product_image\n          )\n        `)\n        .eq('customer_id', customer.id)\n        .order('created_at', { ascending: false });\n\n      // Carregar favoritos com detalhes dos produtos\n      const { data: favoritesData } = await supabase\n        .from('favorites')\n        .select(`\n          id,\n          product_id,\n          created_at,\n          products (\n            id,\n            name_pt,\n            price,\n            images\n          )\n        `)\n        .eq('user_id', customer.id);\n\n      // Carregar endere√ßos\n      const { data: addressesData } = await supabase\n        .from('addresses')\n        .select('*')\n        .eq('user_id', customer.id);\n\n      // Verificar inscri√ß√£o na newsletter\n      const { data: newsletterData } = await supabase\n        .from('newsletter_subscribers')\n        .select('*')\n        .eq('email', customer.email)\n        .maybeSingle();\n\n      setSelectedCustomer({\n        ...customer,\n        orders: ordersData || [],\n        favorites: favoritesData || [],\n        addresses: addressesData || [],\n        newsletterInfo: newsletterData,\n      });\n      setCustomerNotes(customer.notes || '');\n      setShowDetailsModal(true);\n    } catch (error) {\n      console.error('Erro ao carregar detalhes:', error);\n      alert('Erro ao carregar detalhes do cliente');\n    }\n  };\n\n  const saveCustomerNotes = async () => {\n    if (!selectedCustomer) return;\n\n    setSavingNotes(true);\n    try {\n      const { error } = await supabase\n        .from('customers')\n        .update({ notes: customerNotes })\n        .eq('id', selectedCustomer.id);\n\n      if (error) throw error;\n\n      alert('‚úÖ Notas guardadas com sucesso!');\n      loadCustomers();\n    } catch (error) {\n      console.error('Erro ao guardar notas:', error);\n      alert('‚ùå Erro ao guardar notas');\n    } finally {\n      setSavingNotes(false);\n    }\n  };\n\n  const toggleOrderExpanded = (orderId: string) => {\n    const newExpanded = new Set(expandedOrders);\n    if (newExpanded.has(orderId)) {\n      newExpanded.delete(orderId);\n    } else {\n      newExpanded.add(orderId);\n    }\n    setExpandedOrders(newExpanded);\n  };\n\n  const selectAllCustomers = () => {\n    if (selectedCustomers.size === filteredCustomers.length && filteredCustomers.length > 0) {\n      // Desmarcar todos\n      setSelectedCustomers(new Set());\n    } else {\n      // Marcar todos\n      const allIds = new Set(filteredCustomers.map(c => c.id));\n      setSelectedCustomers(allIds);\n    }\n  };\n\n  const toggleCustomerSelection = (customerId: string) => {\n    const newSelected = new Set(selectedCustomers);\n    if (newSelected.has(customerId)) {\n      newSelected.delete(customerId);\n    } else {\n      newSelected.add(customerId);\n    }\n    setSelectedCustomers(newSelected);\n  };\n\n  const deleteSelectedCustomers = async () => {\n    setDeleting(true);\n    try {\n      const customerIds = Array.from(selectedCustomers);\n      \n      // Para cada cliente, eliminar em cascata\n      for (const customerId of customerIds) {\n        const customer = customers.find(c => c.id === customerId);\n        if (!customer) continue;\n\n        // 1. Eliminar endere√ßos\n        await supabase\n          .from('addresses')\n          .delete()\n          .eq('user_id', customerId);\n\n        // 2. Eliminar favoritos\n        await supabase\n          .from('favorites')\n          .delete()\n          .eq('user_id', customerId);\n\n        // 3. Eliminar itens do carrinho\n        await supabase\n          .from('cart_items')\n          .delete()\n          .eq('user_id', customerId);\n\n        // 4. Obter encomendas do cliente\n        const { data: orders } = await supabase\n          .from('orders')\n          .select('id')\n          .eq('customer_id', customerId);\n\n        if (orders && orders.length > 0) {\n          const orderIds = orders.map(o => o.id);\n\n          // 5. Eliminar itens das encomendas\n          await supabase\n            .from('order_items')\n            .delete()\n            .in('order_id', orderIds);\n\n          // 6. Eliminar encomendas\n          await supabase\n            .from('orders')\n            .delete()\n            .eq('customer_id', customerId);\n        }\n\n        // 7. Desinscrever da newsletter\n        await supabase\n          .from('newsletter_subscribers')\n          .delete()\n          .eq('email', customer.email);\n\n        // 8. Finalmente, eliminar o cliente\n        await supabase\n          .from('customers')\n          .delete()\n          .eq('id', customerId);\n      }\n\n      alert(`‚úÖ ${customerIds.length} cliente(s) eliminado(s) com sucesso!`);\n      setShowDeleteConfirm(false);\n      setSelectedCustomers(new Set());\n      loadCustomers();\n    } catch (error) {\n      console.error('Erro ao eliminar clientes:', error);\n      alert('‚ùå Erro ao eliminar clientes. Verifique as permiss√µes no Supabase.');\n    } finally {\n      setDeleting(false);\n    }\n  };\n\n  const getCustomerTypeBadge = (type: string) => {\n    const badges = {\n      new: { text: 'Novo Cliente', color: 'bg-blue-100 text-blue-700' },\n      recurring: { text: 'Cliente Recorrente', color: 'bg-green-100 text-green-700' },\n      vip: { text: 'Cliente VIP', color: 'bg-gradient-to-r from-yellow-400 to-amber-500 text-white' },\n    };\n    const badge = badges[type as keyof typeof badges] || badges.new;\n    return (\n      <span className={`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${badge.color}`}>\n        {badge.text}\n      </span>\n    );\n  };\n\n  const filteredCustomers = customers.filter(customer => {\n    const matchesSearch = !searchTerm || \n      customer.full_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      customer.email?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesFilter = filterType === 'all' || customer.customerType === filterType;\n    \n    return matchesSearch && matchesFilter;\n  });\n\n  // Estat√≠sticas\n  const stats = {\n    total: customers.length,\n    new: customers.filter(c => c.customerType === 'new').length,\n    recurring: customers.filter(c => c.customerType === 'recurring').length,\n    vip: customers.filter(c => c.customerType === 'vip').length,\n    newsletter: customers.filter(c => c.isNewsletterSubscribed).length,\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"mb-8\">\n        <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n          üë• Gest√£o de Clientes\n        </h1>\n        <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n          {customers.length} clientes registados\n        </p>\n      </div>\n\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-6\">\n        <div className={`${darkMode ? 'bg-gradient-to-br from-blue-900/40 to-blue-800/40 border-blue-700/30' : 'bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200'} rounded-2xl p-6 border`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-user-line text-2xl text-white\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.total}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-blue-300' : 'text-blue-700'}`}>\n            Total de Clientes\n          </p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gradient-to-br from-cyan-900/40 to-cyan-800/40 border-cyan-700/30' : 'bg-gradient-to-br from-cyan-50 to-cyan-100 border-cyan-200'} rounded-2xl p-6 border`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-12 h-12 bg-cyan-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-user-add-line text-2xl text-white\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.new}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-cyan-300' : 'text-cyan-700'}`}>\n            Novos Clientes\n          </p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gradient-to-br from-green-900/40 to-green-800/40 border-green-700/30' : 'bg-gradient-to-br from-green-50 to-green-100 border-green-200'} rounded-2xl p-6 border`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-repeat-line text-2xl text-white\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.recurring}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-green-300' : 'text-green-700'}`}>\n            Recorrentes\n          </p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gradient-to-br from-yellow-900/40 to-amber-800/40 border-yellow-700/30' : 'bg-gradient-to-br from-yellow-50 to-amber-100 border-yellow-200'} rounded-2xl p-6 border`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-12 h-12 bg-gradient-to-r from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-vip-crown-line text-2xl text-white\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.vip}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-yellow-300' : 'text-yellow-700'}`}>\n            Clientes VIP\n          </p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gradient-to-br from-purple-900/40 to-purple-800/40 border-purple-700/30' : 'bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200'} rounded-2xl p-6 border`}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-mail-line text-2xl text-white\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.newsletter}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-purple-300' : 'text-purple-700'}`}>\n            Newsletter\n          </p>\n        </div>\n      </div>\n\n      {/* Pesquisa e Filtros */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border mb-6`}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              üîç Pesquisar Cliente\n            </label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Nome ou email...\"\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              üìä Filtrar por Tipo\n            </label>\n            <select\n              value={filterType}\n              onChange={(e) => setFilterType(e.target.value)}\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent cursor-pointer`}\n            >\n              <option value=\"all\">Todos os Clientes</option>\n              <option value=\"new\">Novos Clientes</option>\n              <option value=\"recurring\">Clientes Recorrentes</option>\n              <option value=\"vip\">Clientes VIP</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Bot√µes de A√ß√£o com Selecionados */}\n      {selectedCustomers.size > 0 && (\n        <div className={`${darkMode ? 'bg-pink-900/30 border-pink-700/50' : 'bg-pink-50 border-pink-200'} rounded-2xl p-4 mb-6 border`}>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-pink-500 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-checkbox-multiple-line text-xl text-white\"></i>\n              </div>\n              <div>\n                <p className={`text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  {selectedCustomers.size} cliente(s) selecionado(s)\n                </p>\n                <p className={`text-xs ${darkMode ? 'text-pink-300' : 'text-pink-700'}`}>\n                  Escolha uma a√ß√£o para aplicar aos clientes selecionados\n                </p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={() => setSelectedCustomers(new Set())}\n                className={`px-4 py-2 rounded-lg border-2 ${\n                  darkMode \n                    ? 'border-gray-600 text-gray-300 hover:bg-gray-700' \n                    : 'border-gray-300 text-gray-700 hover:bg-gray-100'\n                } transition-colors cursor-pointer whitespace-nowrap font-medium`}\n              >\n                <i className=\"ri-close-line mr-1\"></i>\n                Cancelar\n              </button>\n              <button\n                onClick={() => setShowDeleteConfirm(true)}\n                className=\"px-4 py-2 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-lg font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-delete-bin-line mr-1\"></i>\n                Eliminar Selecionados\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Lista de Clientes */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl shadow-sm border overflow-hidden`}>\n        {filteredCustomers.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <i className={`ri-user-line text-6xl mb-4 ${darkMode ? 'text-gray-600' : 'text-gray-300'}`}></i>\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n              Nenhum cliente encontrado\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} border-b ${darkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                <tr>\n                  <th className={`px-6 py-4 text-left ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedCustomers.size === filteredCustomers.length && filteredCustomers.length > 0}\n                      onChange={selectAllCustomers}\n                      className=\"w-5 h-5 text-pink-500 border-gray-300 rounded focus:ring-pink-400 cursor-pointer\"\n                    />\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Cliente\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Email\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Encomendas\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Total Gasto\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Tipo\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    √öltima Compra\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    A√ß√µes\n                  </th>\n                </tr>\n              </thead>\n              <tbody className={`divide-y ${darkMode ? 'divide-gray-700' : 'divide-gray-200'}`}>\n                {filteredCustomers.map((customer) => (\n                  <tr key={customer.id} className={`${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50'} transition-colors`}>\n                    <td className=\"px-6 py-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedCustomers.has(customer.id)}\n                        onChange={() => toggleCustomerSelection(customer.id)}\n                        className=\"w-5 h-5 text-pink-500 border-gray-300 rounded focus:ring-pink-400 cursor-pointer\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-bold\">\n                          {customer.full_name?.charAt(0).toUpperCase() || customer.email.charAt(0).toUpperCase()}\n                        </div>\n                        <div>\n                          <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {customer.full_name || 'N/A'}\n                          </p>\n                          {customer.isNewsletterSubscribed && (\n                            <span className=\"text-xs text-purple-500\">\n                              <i className=\"ri-mail-check-line mr-1\"></i>\n                              Newsletter\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      {customer.email}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold ${\n                        darkMode ? 'bg-blue-900 text-blue-300' : 'bg-blue-100 text-blue-700'\n                      }`}>\n                        {customer.orderCount}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-lg font-bold text-green-500\">\n                        ‚Ç¨{customer.totalSpent.toFixed(2)}\n                      </p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      {getCustomerTypeBadge(customer.customerType)}\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      {customer.lastPurchase \n                        ? new Date(customer.lastPurchase).toLocaleDateString('pt-PT')\n                        : 'Nunca'\n                      }\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <button\n                        onClick={() => viewCustomerDetails(customer)}\n                        className=\"px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n                      >\n                        <i className=\"ri-eye-line mr-1\"></i>\n                        Ver Detalhes\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Modal de Confirma√ß√£o de Elimina√ß√£o */}\n      {showDeleteConfirm && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-md w-full`}>\n            <div className=\"w-16 h-16 bg-gradient-to-r from-red-500 to-rose-500 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <i className=\"ri-error-warning-line text-4xl text-white\"></i>\n            </div>\n            <h2 className={`text-2xl font-bold text-center mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              ‚ö†Ô∏è Confirmar Elimina√ß√£o\n            </h2>\n            <p className={`text-center mb-6 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n              Tem a certeza que deseja eliminar <strong className=\"text-red-500\">{selectedCustomers.size} cliente(s)</strong>?\n            </p>\n            <div className={`p-4 rounded-lg mb-6 ${darkMode ? 'bg-red-900/30 border border-red-700/50' : 'bg-red-50 border border-red-200'}`}>\n              <p className={`text-sm ${darkMode ? 'text-red-300' : 'text-red-700'}`}>\n                <strong>‚ö†Ô∏è Aten√ß√£o:</strong> Esta a√ß√£o √© irrevers√≠vel e ir√° eliminar:\n              </p>\n              <ul className={`text-sm mt-2 space-y-1 ml-4 ${darkMode ? 'text-red-300' : 'text-red-700'}`}>\n                <li>‚Ä¢ Dados pessoais dos clientes</li>\n                <li>‚Ä¢ Hist√≥rico de encomendas</li>\n                <li>‚Ä¢ Endere√ßos guardados</li>\n                <li>‚Ä¢ Produtos favoritos</li>\n                <li>‚Ä¢ Inscri√ß√µes na newsletter</li>\n              </ul>\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowDeleteConfirm(false)}\n                disabled={deleting}\n                className={`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${\n                  darkMode \n                    ? 'bg-gray-700 text-white hover:bg-gray-600' \n                    : 'bg-gray-200 text-gray-800 hover:bg-gray-300'\n                } disabled:opacity-50`}\n              >\n                <i className=\"ri-close-line mr-2\"></i>\n                Cancelar\n              </button>\n              <button\n                onClick={deleteSelectedCustomers}\n                disabled={deleting}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50\"\n              >\n                {deleting ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                    A Eliminar...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"ri-delete-bin-line mr-2\"></i>\n                    Eliminar\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal Detalhes COMPLETO do Cliente */}\n      {showDetailsModal && selectedCustomer && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-start justify-center z-50 p-4 overflow-y-auto\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl p-8 max-w-5xl w-full my-8`}>\n            {/* Header */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white text-2xl font-bold\">\n                  {selectedCustomer.full_name?.charAt(0).toUpperCase() || selectedCustomer.email.charAt(0).toUpperCase()}\n                </div>\n                <div>\n                  <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    {selectedCustomer.full_name || 'N/A'}\n                  </h2>\n                  <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    {selectedCustomer.email}\n                  </p>\n                </div>\n              </div>\n              <button\n                onClick={() => setShowDetailsModal(false)}\n                className={`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                }`}\n              >\n                <i className=\"ri-close-line text-xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"space-y-6\">\n              {/* Informa√ß√µes Pessoais */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-user-line text-xl text-pink-500\"></i>\n                  Informa√ß√µes Pessoais\n                </h3>\n                <div className=\"grid grid-cols-2 gap-6\">\n                  <div>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Nome Completo</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedCustomer.full_name || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Email</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedCustomer.email}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Telefone</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedCustomer.phone || 'N/A'}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Data de Registo</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {new Date(selectedCustomer.created_at).toLocaleDateString('pt-PT', {\n                        day: '2-digit',\n                        month: 'long',\n                        year: 'numeric'\n                      })}\n                    </p>\n                  </div>\n                  <div>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Estado da Conta</p>\n                    <span className=\"inline-flex px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700\">\n                      ‚úì Ativa\n                    </span>\n                  </div>\n                  <div>\n                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Tipo de Cliente</p>\n                    {getCustomerTypeBadge(selectedCustomer.customerType)}\n                  </div>\n                </div>\n              </div>\n\n              {/* Estat√≠sticas */}\n              <div className=\"grid grid-cols-4 gap-4\">\n                <div className={`p-4 rounded-xl text-center ${darkMode ? 'bg-pink-900/30 border border-pink-700/30' : 'bg-pink-50 border border-pink-200'}`}>\n                  <p className=\"text-3xl font-bold text-pink-500 mb-1\">\n                    {selectedCustomer.orders?.length || 0}\n                  </p>\n                  <p className={`text-sm ${darkMode ? 'text-pink-300' : 'text-pink-700'}`}>Encomendas</p>\n                </div>\n                <div className={`p-4 rounded-xl text-center ${darkMode ? 'bg-green-900/30 border border-green-700/30' : 'bg-green-50 border border-green-200'}`}>\n                  <p className=\"text-3xl font-bold text-green-500 mb-1\">\n                    ‚Ç¨{selectedCustomer.orders?.reduce((sum: number, order: any) => sum + (order.total_amount || 0), 0).toFixed(2) || '0.00'}\n                  </p>\n                  <p className={`text-sm ${darkMode ? 'text-green-300' : 'text-green-700'}`}>Total Gasto</p>\n                </div>\n                <div className={`p-4 rounded-xl text-center ${darkMode ? 'bg-purple-900/30 border border-purple-700/30' : 'bg-purple-50 border border-purple-200'}`}>\n                  <p className=\"text-3xl font-bold text-purple-500 mb-1\">\n                    {selectedCustomer.favorites?.length || 0}\n                  </p>\n                  <p className={`text-sm ${darkMode ? 'text-purple-300' : 'text-purple-700'}`}>Favoritos</p>\n                </div>\n                <div className={`p-4 rounded-xl text-center ${darkMode ? 'bg-blue-900/30 border border-blue-700/30' : 'bg-blue-50 border border-blue-200'}`}>\n                  <p className=\"text-3xl font-bold text-blue-500 mb-1\">\n                    ‚Ç¨{selectedCustomer.orders?.length > 0 \n                      ? (selectedCustomer.orders.reduce((sum: number, order: any) => sum + (order.total_amount || 0), 0) / selectedCustomer.orders.length).toFixed(2)\n                      : '0.00'\n                    }\n                  </p>\n                  <p className={`text-sm ${darkMode ? 'text-blue-300' : 'text-blue-700'}`}>Ticket M√©dio</p>\n                </div>\n              </div>\n\n              {/* Hist√≥rico de Encomendas COMPLETO */}\n              {selectedCustomer.orders && selectedCustomer.orders.length > 0 && (\n                <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                  <h3 className={`font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    <i className=\"ri-shopping-bag-line text-xl text-pink-500\"></i>\n                    Hist√≥rico de Encomendas ({selectedCustomer.orders.length})\n                  </h3>\n                  <div className=\"space-y-3\">\n                    {selectedCustomer.orders.map((order: any) => (\n                      <div key={order.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-600 border border-gray-500' : 'bg-white border border-gray-200'}`}>\n                        <div \n                          className=\"flex items-center justify-between cursor-pointer\"\n                          onClick={() => toggleOrderExpanded(order.id)}\n                        >\n                          <div className=\"flex items-center gap-4 flex-1\">\n                            <div className={`w-12 h-12 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-100'} flex items-center justify-center`}>\n                              <i className=\"ri-file-list-3-line text-2xl text-pink-500\"></i>\n                            </div>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <p className={`text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                                  Encomenda #{order.id.substring(0, 8).toUpperCase()}\n                                </p>\n                                <span className={`text-xs px-2 py-0.5 rounded-full ${\n                                  order.status === 'completed' ? 'bg-green-100 text-green-700' :\n                                  order.status === 'shipped' ? 'bg-blue-100 text-blue-700' :\n                                  order.status === 'processing' ? 'bg-yellow-100 text-yellow-700' :\n                                  order.status === 'cancelled' ? 'bg-red-100 text-red-700' :\n                                  'bg-gray-100 text-gray-700'\n                                }`}>\n                                  {order.status === 'completed' ? '‚úì Entregue' :\n                                   order.status === 'shipped' ? 'üì¶ Enviado' :\n                                   order.status === 'processing' ? '‚è≥ Processamento' :\n                                   order.status === 'cancelled' ? '‚úó Cancelado' :\n                                   '‚è∏ Pendente'}\n                                </span>\n                              </div>\n                              <div className=\"flex items-center gap-4 text-xs\">\n                                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                                  <i className=\"ri-calendar-line mr-1\"></i>\n                                  {new Date(order.created_at).toLocaleDateString('pt-PT')}\n                                </span>\n                                <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                                  <i className=\"ri-shopping-cart-line mr-1\"></i>\n                                  {order.order_items?.length || 0} produtos\n                                </span>\n                                {order.payment_method && (\n                                  <span className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                                    <i className=\"ri-bank-card-line mr-1\"></i>\n                                    {order.payment_method === 'card' ? 'Cart√£o' : order.payment_method}\n                                  </span>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-4\">\n                            <p className=\"text-xl font-bold text-green-500\">\n                              ‚Ç¨{order.total_amount?.toFixed(2)}\n                            </p>\n                            <i className={`ri-arrow-${expandedOrders.has(order.id) ? 'up' : 'down'}-s-line text-xl ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}></i>\n                          </div>\n                        </div>\n\n                        {/* Produtos da Encomenda (Expans√≠vel) */}\n                        {expandedOrders.has(order.id) && order.order_items && order.order_items.length > 0 && (\n                          <div className={`mt-4 pt-4 border-t ${darkMode ? 'border-gray-500' : 'border-gray-200'}`}>\n                            <p className={`text-sm font-semibold mb-3 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                              Produtos Encomendados:\n                            </p>\n                            <div className=\"space-y-2\">\n                              {order.order_items.map((item: any) => (\n                                <div key={item.id} className=\"flex items-center gap-3\">\n                                  {item.product_image && (\n                                    <img\n                                      src={item.product_image}\n                                      alt={item.product_name}\n                                      className=\"w-12 h-12 rounded object-cover\"\n                                    />\n                                  )}\n                                  <div className=\"flex-1\">\n                                    <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                                      {item.product_name}\n                                    </p>\n                                    <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                      Quantidade: {item.quantity} √ó ‚Ç¨{item.price?.toFixed(2)}\n                                    </p>\n                                  </div>\n                                  <p className={`text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                                    ‚Ç¨{(item.quantity * item.price).toFixed(2)}\n                                  </p>\n                                </div>\n                              ))}\n                            </div>\n\n                            {/* Informa√ß√µes de Envio */}\n                            {order.shipping_address && (\n                              <div className={`mt-3 pt-3 border-t ${darkMode ? 'border-gray-500' : 'border-gray-200'}`}>\n                                <p className={`text-xs font-semibold mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                                  üìç Enviado para:\n                                </p>\n                                <p className={`text-xs ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                  {order.shipping_address.name}\n                                </p>\n                                <p className={`text-xs ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                  {order.shipping_address.street}, {order.shipping_address.city}\n                                </p>\n                                <p className={`text-xs ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                                  {order.shipping_address.postal_code}, {order.shipping_address.country}\n                                </p>\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Endere√ßos */}\n              {selectedCustomer.addresses && selectedCustomer.addresses.length > 0 && (\n                <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                  <h3 className={`font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    <i className=\"ri-map-pin-line text-xl text-pink-500\"></i>\n                    Endere√ßos Guardados ({selectedCustomer.addresses.length})\n                  </h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    {selectedCustomer.addresses.map((address: any) => (\n                      <div key={address.id} className={`p-4 rounded-lg ${darkMode ? 'bg-gray-600 border border-gray-500' : 'bg-white border border-gray-200'}`}>\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <p className={`text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {address.full_name}\n                          </p>\n                          {address.is_default && (\n                            <span className=\"text-xs bg-pink-500 text-white px-2 py-1 rounded-full font-medium\">\n                              Principal\n                            </span>\n                          )}\n                        </div>\n                        <div className={`text-xs space-y-1 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                          <p>{address.street}</p>\n                          <p>{address.postal_code} {address.city}</p>\n                          <p>{address.country}</p>\n                          {address.phone && (\n                            <p className=\"mt-2\">\n                              <i className=\"ri-phone-line mr-1\"></i>\n                              {address.phone}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Produtos Favoritos */}\n              {selectedCustomer.favorites && selectedCustomer.favorites.length > 0 && (\n                <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                  <h3 className={`font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    <i className=\"ri-heart-line text-xl text-pink-500\"></i>\n                    Produtos Favoritos ({selectedCustomer.favorites.length})\n                  </h3>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                    {selectedCustomer.favorites.map((fav: any) => (\n                      <div key={fav.id} className={`p-3 rounded-lg ${darkMode ? 'bg-gray-600 border border-gray-500' : 'bg-white border border-gray-200'}`}>\n                        {fav.products?.images?.[0] && (\n                          <img\n                            src={fav.products.images[0]}\n                            alt={fav.products.name_pt}\n                            className=\"w-full h-32 object-cover rounded-lg mb-2\"\n                          />\n                        )}\n                        <p className={`text-xs font-medium ${darkMode ? 'text-white' : 'text-gray-800'} line-clamp-2`}>\n                          {fav.products?.name_pt || 'Produto'}\n                        </p>\n                        <p className=\"text-xs text-pink-500 font-bold mt-1\">\n                          ‚Ç¨{fav.products?.price?.toFixed(2)}\n                        </p>\n                        <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'} mt-1`}>\n                          {new Date(fav.created_at).toLocaleDateString('pt-PT')}\n                        </p>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Informa√ß√µes de Marketing */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-mail-line text-xl text-pink-500\"></i>\n                  Comunica√ß√£o & Marketing\n                </h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                        Newsletter\n                      </p>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        Subscri√ß√£o de email marketing\n                      </p>\n                    </div>\n                    <span className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                      selectedCustomer.newsletterInfo \n                        ? 'bg-green-100 text-green-700' \n                        : 'bg-gray-100 text-gray-700'\n                    }`}>\n                      {selectedCustomer.newsletterInfo ? '‚úì Inscrito' : '‚úó N√£o Inscrito'}\n                    </span>\n                  </div>\n                  {selectedCustomer.newsletterInfo && (\n                    <div className={`p-3 rounded-lg ${darkMode ? 'bg-gray-600' : 'bg-white'}`}>\n                      <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        Data de Inscri√ß√£o: {new Date(selectedCustomer.newsletterInfo.created_at).toLocaleDateString('pt-PT')}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Notas Internas (Admin) */}\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-yellow-900/20 border border-yellow-700/30' : 'bg-yellow-50 border border-yellow-200'}`}>\n                <h3 className={`font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-yellow-300' : 'text-yellow-800'}`}>\n                  <i className=\"ri-sticky-note-line text-xl text-yellow-500\"></i>\n                  üìù Notas Internas (Privadas)\n                </h3>\n                <p className={`text-xs mb-3 ${darkMode ? 'text-yellow-300/70' : 'text-yellow-700'}`}>\n                  Estas notas s√£o privadas e apenas vis√≠veis para administradores. Use para registar prefer√™ncias, problemas ou observa√ß√µes sobre o cliente.\n                </p>\n                <textarea\n                  value={customerNotes}\n                  onChange={(e) => setCustomerNotes(e.target.value)}\n                  placeholder=\"Ex: Cliente VIP, Teve problema numa encomenda, Prefer√™ncias espec√≠ficas...\"\n                  rows={4}\n                  className={`w-full px-4 py-3 rounded-lg border ${\n                    darkMode \n                      ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' \n                      : 'bg-white border-gray-300 text-gray-800 placeholder-gray-500'\n                  } focus:ring-2 focus:ring-yellow-400 focus:border-transparent`}\n                />\n                <button\n                  onClick={saveCustomerNotes}\n                  disabled={savingNotes}\n                  className=\"mt-3 px-6 py-2 bg-gradient-to-r from-yellow-500 to-amber-500 text-white rounded-lg font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50\"\n                >\n                  {savingNotes ? (\n                    <>\n                      <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                      A Guardar...\n                    </>\n                  ) : (\n                    <>\n                      <i className=\"ri-save-line mr-2\"></i>\n                      Guardar Notas\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n\n            <div className=\"mt-8 flex gap-3\">\n              <button\n                onClick={() => setShowDetailsModal(false)}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-close-line mr-2\"></i>\n                Fechar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface HomePageManagementProps {\n  darkMode: boolean;\n}\n\nexport default function HomePageManagement({ darkMode }: HomePageManagementProps) {\n  const [loading, setLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('hero');\n  const [products, setProducts] = useState<any[]>([]);\n  const [looks, setLooks] = useState<any[]>([]);\n  const [showCreateLookModal, setShowCreateLookModal] = useState(false);\n  const [selectedLookProducts, setSelectedLookProducts] = useState<string[]>([]);\n  const [lookTitle, setLookTitle] = useState('');\n  \n  // Hero Section - TUDO EDIT√ÅVEL\n  const [heroTitle, setHeroTitle] = useState('MARISOL');\n  const [heroSubtitle, setHeroSubtitle] = useState('Eleg√¢ncia Atemporal, Estilo √önico');\n  const [heroDescription, setHeroDescription] = useState('Descubra a cole√ß√£o exclusiva que celebra a sua feminilidade e sofistica√ß√£o. Cada pe√ßa conta uma hist√≥ria de eleg√¢ncia e confian√ßa.');\n  const [heroButtonText, setHeroButtonText] = useState('Explorar Cole√ß√£o');\n  const [heroButtonLink, setHeroButtonLink] = useState('/products');\n  const [heroBackgroundImage, setHeroBackgroundImage] = useState('https://readdy.ai/api/search-image?query=luxury%20fashion%20boutique%20interior%20elegant%20clothing%20display%20modern%20minimalist%20design%20soft%20pink%20rose%20gold%20tones%20sophisticated%20feminine%20aesthetic%20high%20end%20retail%20space%20professional%20photography&width=1920&height=1080&seq=hero-marisol-luxury-v2&orientation=landscape');\n  const [showArrowDown, setShowArrowDown] = useState(true);\n  \n  // Featured Products\n  const [featuredProducts, setFeaturedProducts] = useState<string[]>([]);\n  const [featuredTitle, setFeaturedTitle] = useState('Produtos em Destaque');\n  const [featuredSubtitle, setFeaturedSubtitle] = useState('Descubra as nossas pe√ßas mais populares e elegantes');\n  const [featuredMode, setFeaturedMode] = useState<'manual' | 'auto'>('manual');\n  \n  // About Section\n  const [aboutTitle, setAboutTitle] = useState('Sobre a Marisol');\n  const [aboutDescription, setAboutDescription] = useState('A Marisol √© mais do que uma loja de moda - √© um destino para mulheres que valorizam estilo, qualidade e autenticidade. Cada pe√ßa da nossa cole√ß√£o √© cuidadosamente selecionada para celebrar a sua individualidade e confian√ßa.');\n  const [aboutButtonText, setAboutButtonText] = useState('Saiba Mais Sobre N√≥s');\n  const [aboutImage, setAboutImage] = useState('https://readdy.ai/api/search-image?query=elegant%20fashion%20boutique%20interior%20with%20modern%20minimalist%20design%20soft%20pink%20and%20white%20tones%20luxury%20clothing%20store%20atmosphere%20professional%20interior%20photography&width=800&height=600&seq=about-marisol&orientation=landscape');\n  \n  // Newsletter\n  const [newsletterTitle, setNewsletterTitle] = useState('Fique por Dentro das Novidades');\n  const [newsletterDescription, setNewsletterDescription] = useState('Subscreva a nossa newsletter e receba em primeira m√£o as √∫ltimas tend√™ncias, ofertas exclusivas e dicas de estilo.');\n  const [newsletterButtonText, setNewsletterButtonText] = useState('Subscrever Newsletter');\n  const [newsletterIncentive, setNewsletterIncentive] = useState('');\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    try {\n      // Carregar TODOS os produtos publicados\n      const { data: productsData, error: productsError } = await supabase\n        .from('products')\n        .select('*')\n        .eq('is_active', true)\n        .order('created_at', { ascending: false });\n      \n      if (productsError) {\n        console.error('Erro ao carregar produtos:', productsError);\n      } else if (productsData) {\n        console.log('‚úÖ Produtos carregados:', productsData.length);\n        setProducts(productsData);\n      }\n\n      // Carregar looks\n      const { data: looksData, error: looksError } = await supabase\n        .from('inspiration_looks')\n        .select('*')\n        .eq('is_active', true)\n        .order('created_at', { ascending: false });\n      \n      if (looksError) {\n        console.error('Erro ao carregar looks:', looksError);\n      } else if (looksData) {\n        console.log('‚úÖ Looks carregados:', looksData.length);\n        setLooks(looksData);\n      }\n\n      // Carregar configura√ß√µes da p√°gina inicial\n      const { data: settingsData } = await supabase\n        .from('site_settings')\n        .select('*')\n        .eq('key', 'homepage_settings')\n        .maybeSingle();\n\n      if (settingsData?.value) {\n        const config = settingsData.value;\n        \n        if (config.hero) {\n          setHeroTitle(config.hero.title || heroTitle);\n          setHeroSubtitle(config.hero.subtitle || heroSubtitle);\n          setHeroDescription(config.hero.description || heroDescription);\n          setHeroButtonText(config.hero.buttonText || heroButtonText);\n          setHeroButtonLink(config.hero.buttonLink || heroButtonLink);\n          setHeroBackgroundImage(config.hero.backgroundImage || heroBackgroundImage);\n          setShowArrowDown(config.hero.showArrowDown !== undefined ? config.hero.showArrowDown : showArrowDown);\n        }\n        if (config.featured) {\n          setFeaturedProducts(config.featured.productIds || []);\n          setFeaturedTitle(config.featured.title || featuredTitle);\n          setFeaturedSubtitle(config.featured.subtitle || featuredSubtitle);\n          setFeaturedMode(config.featured.mode || featuredMode);\n        }\n        if (config.about) {\n          setAboutTitle(config.about.title || aboutTitle);\n          setAboutDescription(config.about.description || aboutDescription);\n          setAboutButtonText(config.about.buttonText || aboutButtonText);\n          setAboutImage(config.about.image || aboutImage);\n        }\n        if (config.newsletter) {\n          setNewsletterTitle(config.newsletter.title || newsletterTitle);\n          setNewsletterDescription(config.newsletter.description || newsletterDescription);\n          setNewsletterButtonText(config.newsletter.buttonText || newsletterButtonText);\n          setNewsletterIncentive(config.newsletter.incentive || newsletterIncentive);\n        }\n      }\n    } catch (error) {\n      console.error('Erro ao carregar dados:', error);\n    }\n  };\n\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      const config = {\n        hero: {\n          title: heroTitle,\n          subtitle: heroSubtitle,\n          description: heroDescription,\n          buttonText: heroButtonText,\n          buttonLink: heroButtonLink,\n          backgroundImage: heroBackgroundImage,\n          showArrowDown,\n        },\n        featured: {\n          productIds: featuredProducts,\n          title: featuredTitle,\n          subtitle: featuredSubtitle,\n          mode: featuredMode,\n        },\n        about: {\n          title: aboutTitle,\n          description: aboutDescription,\n          buttonText: aboutButtonText,\n          image: aboutImage,\n        },\n        newsletter: {\n          title: newsletterTitle,\n          description: newsletterDescription,\n          buttonText: newsletterButtonText,\n          incentive: newsletterIncentive,\n        },\n      };\n\n      const { error } = await supabase\n        .from('site_settings')\n        .upsert(\n          {\n            key: 'homepage_settings',\n            value: config,\n            updated_at: new Date().toISOString(),\n          },\n          {\n            onConflict: 'key',\n            ignoreDuplicates: false,\n          }\n        );\n\n      if (error) throw error;\n\n      alert('‚úÖ Configura√ß√µes salvas e sincronizadas com o site!');\n      await loadData();\n    } catch (error) {\n      console.error('Erro ao salvar:', error);\n      alert('‚ùå Erro ao salvar configura√ß√µes: ' + (error as any).message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleFeaturedProduct = (productId: string) => {\n    if (featuredProducts.includes(productId)) {\n      setFeaturedProducts(featuredProducts.filter(id => id !== productId));\n    } else {\n      setFeaturedProducts([...featuredProducts, productId]);\n    }\n  };\n\n  const toggleLookProduct = (productId: string) => {\n    if (selectedLookProducts.includes(productId)) {\n      setSelectedLookProducts(selectedLookProducts.filter(id => id !== productId));\n    } else {\n      if (selectedLookProducts.length >= 4) {\n        alert('‚ùå Pode selecionar no m√°ximo 4 produtos por look');\n        return;\n      }\n      setSelectedLookProducts([...selectedLookProducts, productId]);\n    }\n  };\n\n  const handleCreateLook = async () => {\n    if (!lookTitle.trim()) {\n      alert('‚ùå Por favor, insira um t√≠tulo para o look');\n      return;\n    }\n    if (selectedLookProducts.length === 0) {\n      alert('‚ùå Por favor, selecione pelo menos 1 produto');\n      return;\n    }\n    if (selectedLookProducts.length > 4) {\n      alert('‚ùå Pode selecionar no m√°ximo 4 produtos por look');\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('inspiration_looks')\n        .insert([{\n          title: lookTitle,\n          product_ids: selectedLookProducts,\n          is_active: true,\n        }]);\n\n      if (error) {\n        console.error('Erro ao criar look:', error);\n        throw error;\n      }\n\n      alert('‚úÖ Look criado com sucesso!');\n      setShowCreateLookModal(false);\n      setLookTitle('');\n      setSelectedLookProducts([]);\n      await loadData();\n    } catch (error) {\n      console.error('Erro ao criar look:', error);\n      alert('‚ùå Erro ao criar look: ' + (error as any).message);\n    }\n  };\n\n  const handleDeleteLook = async (lookId: string) => {\n    if (!confirm('Tem certeza que deseja eliminar este look?')) return;\n\n    try {\n      const { error } = await supabase\n        .from('inspiration_looks')\n        .delete()\n        .eq('id', lookId);\n\n      if (error) throw error;\n\n      alert('‚úÖ Look eliminado com sucesso!');\n      await loadData();\n    } catch (error) {\n      console.error('Erro ao eliminar look:', error);\n      alert('‚ùå Erro ao eliminar look');\n    }\n  };\n\n  // Obter produtos selecionados para pr√©-visualiza√ß√£o\n  const getSelectedProducts = () => {\n    return products.filter(p => featuredProducts.includes(p.id));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n          Editor da P√°gina Inicial\n        </h2>\n        <button\n          onClick={handleSave}\n          disabled={loading}\n          className=\"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50 whitespace-nowrap\"\n        >\n          {loading ? 'A Guardar...' : 'üíæ Guardar Altera√ß√µes'}\n        </button>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex gap-2 overflow-x-auto\">\n        {['hero', 'featured', 'looks', 'about', 'newsletter'].map((tab) => (\n          <button\n            key={tab}\n            onClick={() => setActiveTab(tab)}\n            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap cursor-pointer transition-colors ${\n              activeTab === tab\n                ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white'\n                : darkMode\n                ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            {tab === 'hero' && 'üé® Hero Section'}\n            {tab === 'featured' && '‚≠ê Produtos em Destaque'}\n            {tab === 'looks' && 'üëó Looks Inspiradores'}\n            {tab === 'about' && 'üìñ Sobre N√≥s'}\n            {tab === 'newsletter' && 'üìß Newsletter'}\n          </button>\n        ))}\n      </div>\n\n      {/* Hero Section - COMPLETO */}\n      {activeTab === 'hero' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg space-y-4`}>\n          <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\n            üé® Hero Section (Primeira Sec√ß√£o do Site)\n          </h3>\n          \n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              üñºÔ∏è Imagem de Fundo (URL)\n            </label>\n            <input\n              type=\"text\"\n              value={heroBackgroundImage}\n              onChange={(e) => setHeroBackgroundImage(e.target.value)}\n              placeholder=\"URL da imagem de fundo\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n            <p className={`text-xs mt-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n              Cole o URL da imagem ou use o Stable Diffusion da Readdy\n            </p>\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              üìù T√≠tulo Principal (Headline)\n            </label>\n            <input\n              type=\"text\"\n              value={heroTitle}\n              onChange={(e) => setHeroTitle(e.target.value)}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              üí´ Subt√≠tulo / Frase de Impacto\n            </label>\n            <input\n              type=\"text\"\n              value={heroSubtitle}\n              onChange={(e) => setHeroSubtitle(e.target.value)}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              üìÑ Descri√ß√£o\n            </label>\n            <textarea\n              value={heroDescription}\n              onChange={(e) => setHeroDescription(e.target.value)}\n              rows={3}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                üîò Texto do Bot√£o\n              </label>\n              <input\n                type=\"text\"\n                value={heroButtonText}\n                onChange={(e) => setHeroButtonText(e.target.value)}\n                className={`w-full px-4 py-3 rounded-lg border ${\n                  darkMode\n                    ? 'bg-gray-700 border-gray-600 text-white'\n                    : 'bg-white border-gray-300 text-gray-900'\n                } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n              />\n            </div>\n\n            <div>\n              <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                üîó Link do Bot√£o\n              </label>\n              <input\n                type=\"text\"\n                value={heroButtonLink}\n                onChange={(e) => setHeroButtonLink(e.target.value)}\n                placeholder=\"/products\"\n                className={`w-full px-4 py-3 rounded-lg border ${\n                  darkMode\n                    ? 'bg-gray-700 border-gray-600 text-white'\n                    : 'bg-white border-gray-300 text-gray-900'\n                } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n              />\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"showArrowDown\"\n              checked={showArrowDown}\n              onChange={(e) => setShowArrowDown(e.target.checked)}\n              className=\"w-5 h-5 rounded border-gray-300 text-pink-600 focus:ring-pink-500 cursor-pointer\"\n            />\n            <label htmlFor=\"showArrowDown\" className={`text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} cursor-pointer`}>\n              ‚¨áÔ∏è Mostrar seta para baixo\n            </label>\n          </div>\n        </div>\n      )}\n\n      {/* Featured Products */}\n      {activeTab === 'featured' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg space-y-6`}>\n          <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            ‚≠ê Produtos em Destaque\n          </h3>\n\n          {/* Configura√ß√µes da Sec√ß√£o */}\n          <div className=\"space-y-4\">\n            <div>\n              <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                T√≠tulo da Sec√ß√£o\n              </label>\n              <input\n                type=\"text\"\n                value={featuredTitle}\n                onChange={(e) => setFeaturedTitle(e.target.value)}\n                placeholder=\"Ex: Mais Vendidos, Escolhas da Marisol\"\n                className={`w-full px-4 py-3 rounded-lg border ${\n                  darkMode\n                    ? 'bg-gray-700 border-gray-600 text-white'\n                    : 'bg-white border-gray-300 text-gray-900'\n                } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n              />\n            </div>\n\n            <div>\n              <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                Subt√≠tulo (Opcional)\n              </label>\n              <input\n                type=\"text\"\n                value={featuredSubtitle}\n                onChange={(e) => setFeaturedSubtitle(e.target.value)}\n                placeholder=\"Descri√ß√£o curta da sec√ß√£o\"\n                className={`w-full px-4 py-3 rounded-lg border ${\n                  darkMode\n                    ? 'bg-gray-700 border-gray-600 text-white'\n                    : 'bg-white border-gray-300 text-gray-900'\n                } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n              />\n            </div>\n\n            <div>\n              <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                Modo de Sele√ß√£o\n              </label>\n              <div className=\"flex gap-4\">\n                <button\n                  onClick={() => setFeaturedMode('manual')}\n                  className={`flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer transition-all ${\n                    featuredMode === 'manual'\n                      ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white'\n                      : darkMode\n                      ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  ‚úã Manual (Escolhidos por ti)\n                </button>\n                <button\n                  onClick={() => setFeaturedMode('auto')}\n                  className={`flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer transition-all ${\n                    featuredMode === 'auto'\n                      ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white'\n                      : darkMode\n                      ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  ü§ñ Autom√°tico (Mais vendidos)\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Produtos J√° Selecionados */}\n          {featuredMode === 'manual' && getSelectedProducts().length > 0 && (\n            <div className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-pink-50'} border-2 border-pink-200 dark:border-pink-800`}>\n              <h4 className={`text-sm font-bold mb-3 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                ‚úÖ Produtos J√° Selecionados ({getSelectedProducts().length})\n              </h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                {getSelectedProducts().map((product) => (\n                  <div key={product.id} className=\"relative group\">\n                    <img\n                      src={product.images?.[0] || product.image_url}\n                      alt={product.name}\n                      className=\"w-full h-32 object-cover rounded-lg\"\n                    />\n                    <div className={`absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center`}>\n                      <button\n                        onClick={() => toggleFeaturedProduct(product.id)}\n                        className=\"px-3 py-1 bg-red-500 text-white rounded-lg text-xs font-bold cursor-pointer\"\n                      >\n                        Remover\n                      </button>\n                    </div>\n                    <p className={`text-xs mt-1 font-medium line-clamp-1 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {product.name_pt || product.name}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Selecionar Produtos */}\n          {featuredMode === 'manual' && (\n            <>\n              <h4 className={`text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                Selecionar Produtos ({featuredProducts.length} selecionados)\n              </h4>\n              \n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                {products.map((product) => (\n                  <div\n                    key={product.id}\n                    onClick={() => toggleFeaturedProduct(product.id)}\n                    className={`relative rounded-lg overflow-hidden cursor-pointer transition-all ${\n                      featuredProducts.includes(product.id)\n                        ? 'ring-4 ring-pink-500 shadow-xl'\n                        : 'hover:shadow-lg'\n                    }`}\n                  >\n                    <img\n                      src={product.images?.[0] || product.image_url}\n                      alt={product.name}\n                      className=\"w-full h-48 object-cover\"\n                    />\n                    <div className={`p-3 ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                      <p className={`text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-900'} line-clamp-1`}>\n                        {product.name_pt || product.name}\n                      </p>\n                      <p className=\"text-pink-500 font-bold\">‚Ç¨{product.price.toFixed(2)}</p>\n                    </div>\n                    {featuredProducts.includes(product.id) && (\n                      <div className=\"absolute top-2 right-2 w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center\">\n                        <i className=\"ri-check-line text-white text-lg\"></i>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Looks Inspiradores */}\n      {activeTab === 'looks' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg`}>\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n              üëó Looks Inspiradores ({looks.length} looks criados)\n            </h3>\n            <button\n              onClick={() => setShowCreateLookModal(true)}\n              className=\"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              Criar Novo Look\n            </button>\n          </div>\n          \n          {looks.length === 0 ? (\n            <div className={`text-center py-12 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n              <i className=\"ri-shirt-line text-6xl mb-4\"></i>\n              <p className=\"text-lg\">Nenhum look criado ainda</p>\n              <p className=\"text-sm mt-2\">Clique em \"Criar Novo Look\" para come√ßar</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {looks.map((look) => (\n                <div\n                  key={look.id}\n                  className={`rounded-lg overflow-hidden ${darkMode ? 'bg-gray-700' : 'bg-gray-50'} shadow-lg`}\n                >\n                  <div className=\"p-4\">\n                    <h4 className={`text-lg font-semibold mb-3 ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                      {look.title}\n                    </h4>\n                    <p className={`text-sm mb-3 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                      {look.product_ids?.length || 0} produtos selecionados\n                    </p>\n                    <div className=\"grid grid-cols-2 gap-2 mb-4\">\n                      {look.product_ids?.slice(0, 4).map((productId: string) => {\n                        const product = products.find(p => p.id === productId);\n                        return product ? (\n                          <img\n                            key={productId}\n                            src={product.images?.[0] || product.image_url}\n                            alt={product.name}\n                            className=\"w-full h-24 object-cover rounded-lg\"\n                          />\n                        ) : null;\n                      })}\n                    </div>\n                    <button\n                      onClick={() => handleDeleteLook(look.id)}\n                      className=\"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap\"\n                    >\n                      <i className=\"ri-delete-bin-line mr-2\"></i>\n                      Eliminar Look\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* About Section */}\n      {activeTab === 'about' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg space-y-4`}>\n          <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\n            üìñ Sec√ß√£o Sobre N√≥s (Vers√£o Curta na Home)\n          </h3>\n          \n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              T√≠tulo\n            </label>\n            <input\n              type=\"text\"\n              value={aboutTitle}\n              onChange={(e) => setAboutTitle(e.target.value)}\n              placeholder=\"Ex: Mais do que moda\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Descri√ß√£o Curta\n            </label>\n            <textarea\n              value={aboutDescription}\n              onChange={(e) => setAboutDescription(e.target.value)}\n              rows={5}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Texto do Bot√£o\n            </label>\n            <input\n              type=\"text\"\n              value={aboutButtonText}\n              onChange={(e) => setAboutButtonText(e.target.value)}\n              placeholder=\"Ex: Conhe√ßa a Marisol\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Imagem Ilustrativa (URL)\n            </label>\n            <input\n              type=\"text\"\n              value={aboutImage}\n              onChange={(e) => setAboutImage(e.target.value)}\n              placeholder=\"URL da imagem\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Newsletter */}\n      {activeTab === 'newsletter' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg space-y-4`}>\n          <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\n            üíå Sec√ß√£o Newsletter\n          </h3>\n          \n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              T√≠tulo da Sec√ß√£o\n            </label>\n            <input\n              type=\"text\"\n              value={newsletterTitle}\n              onChange={(e) => setNewsletterTitle(e.target.value)}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Texto Descritivo\n            </label>\n            <textarea\n              value={newsletterDescription}\n              onChange={(e) => setNewsletterDescription(e.target.value)}\n              rows={3}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Texto do Bot√£o\n            </label>\n            <input\n              type=\"text\"\n              value={newsletterButtonText}\n              onChange={(e) => setNewsletterButtonText(e.target.value)}\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Incentivo (Opcional)\n            </label>\n            <input\n              type=\"text\"\n              value={newsletterIncentive}\n              onChange={(e) => setNewsletterIncentive(e.target.value)}\n              placeholder=\"Ex: 10% na primeira compra\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white'\n                  : 'bg-white border-gray-300 text-gray-900'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Modal Criar Look */}\n      {showCreateLookModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl shadow-2xl max-w-6xl w-full my-8 max-h-[90vh] overflow-y-auto`}>\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n              <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                ‚ú® Criar Novo Look Inspirador\n              </h2>\n              <p className={`text-sm mt-2 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Selecione at√© 4 produtos para criar um look ({selectedLookProducts.length}/4 selecionados)\n              </p>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              <div>\n                <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n                  T√≠tulo do Look *\n                </label>\n                <input\n                  type=\"text\"\n                  value={lookTitle}\n                  onChange={(e) => setLookTitle(e.target.value)}\n                  placeholder=\"Ex: Look Elegante para o Escrit√≥rio\"\n                  className={`w-full px-4 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                      : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n                  } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-3`}>\n                  Selecionar Produtos (clique para selecionar/desmarcar)\n                </label>\n                \n                {products.length === 0 ? (\n                  <div className={`text-center py-12 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                    <i className=\"ri-shopping-bag-line text-6xl mb-4\"></i>\n                    <p className=\"text-lg\">Nenhum produto dispon√≠vel</p>\n                    <p className=\"text-sm mt-2\">Adicione produtos primeiro na aba \"Produtos\"</p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-96 overflow-y-auto p-2\">\n                    {products.map((product) => (\n                      <div\n                        key={product.id}\n                        onClick={() => toggleLookProduct(product.id)}\n                        className={`relative rounded-lg overflow-hidden cursor-pointer transition-all ${\n                          selectedLookProducts.includes(product.id)\n                            ? 'ring-4 ring-green-500 shadow-xl'\n                            : 'hover:shadow-lg'\n                        }`}\n                      >\n                        <img\n                          src={product.images?.[0] || product.image_url}\n                          alt={product.name}\n                          className=\"w-full h-40 object-cover\"\n                        />\n                        <div className={`p-2 ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                          <p className={`text-xs font-semibold ${darkMode ? 'text-white' : 'text-gray-900'} line-clamp-1`}>\n                            {product.name_pt || product.name}\n                          </p>\n                          <p className=\"text-pink-500 font-bold text-sm\">‚Ç¨{product.price.toFixed(2)}</p>\n                        </div>\n                        {selectedLookProducts.includes(product.id) && (\n                          <div className=\"absolute top-2 right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\">\n                            <i className=\"ri-check-line text-white text-lg\"></i>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-4\">\n              <button\n                onClick={() => {\n                  setShowCreateLookModal(false);\n                  setLookTitle('');\n                  setSelectedLookProducts([]);\n                }}\n                className={`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={handleCreateLook}\n                disabled={selectedLookProducts.length === 0 || !lookTitle.trim()}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <i className=\"ri-check-line mr-2\"></i>\n                Criar Look ({selectedLookProducts.length}/4)\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface Customer {\n  id: string;\n  name: string;\n  email: string;\n  phone: string;\n  order_count: number;\n  total_spent: number;\n  is_newsletter_subscribed: boolean;\n  created_at: string;\n}\n\ninterface MessageTemplate {\n  id: string;\n  name: string;\n  channel: 'email' | 'whatsapp';\n  subject?: string;\n  message: string;\n  created_at: string;\n}\n\ninterface MessageHistory {\n  id: string;\n  customer_ids: string[];\n  customer_names: string[];\n  channel: 'email' | 'whatsapp';\n  template_name: string;\n  sent_at: string;\n}\n\ninterface MarketingAdvancedProps {\n  darkMode: boolean;\n}\n\nexport default function MarketingAdvanced({ darkMode }: MarketingAdvancedProps) {\n  const [activeTab, setActiveTab] = useState<'customers' | 'templates' | 'history'>('customers');\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [templates, setTemplates] = useState<MessageTemplate[]>([]);\n  const [history, setHistory] = useState<MessageHistory[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterType, setFilterType] = useState<'all' | 'vip' | 'with_orders' | 'without_orders'>('all');\n  const [selectedCustomers, setSelectedCustomers] = useState<Set<string>>(new Set());\n  const [showMessageModal, setShowMessageModal] = useState(false);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [selectedChannel, setSelectedChannel] = useState<'email' | 'whatsapp'>('email');\n  const [selectedTemplate, setSelectedTemplate] = useState<MessageTemplate | null>(null);\n  const [editingTemplate, setEditingTemplate] = useState<MessageTemplate | null>(null);\n\n  // Carregar dados\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    await Promise.all([\n      loadCustomers(),\n      loadTemplates(),\n      loadHistory()\n    ]);\n    setLoading(false);\n  };\n\n  const loadCustomers = async () => {\n    const { data } = await supabase\n      .from('customers')\n      .select('*')\n      .order('created_at', { ascending: false });\n    \n    if (data) {\n      setCustomers(data);\n    }\n  };\n\n  const loadTemplates = async () => {\n    const { data } = await supabase\n      .from('site_settings')\n      .select('value')\n      .eq('key', 'marketing_templates')\n      .single();\n    \n    if (data?.value) {\n      setTemplates(data.value as MessageTemplate[]);\n    } else {\n      // Templates padr√£o se n√£o existirem\n      const defaultTemplates: MessageTemplate[] = [\n        {\n          id: '1',\n          name: 'Promo√ß√£o Exclusiva VIP',\n          channel: 'email',\n          subject: 'üéÅ 40% OFF Exclusivo para Ti!',\n          message: 'Ol√° {{name}}!\\n\\nComo cliente VIP, tens acesso exclusivo a 40% de desconto em toda a loja!\\n\\nUsa o c√≥digo: VIP40\\n\\nV√°lido at√© ao fim do m√™s.\\n\\nObrigada,\\nEquipa Marisol',\n          created_at: new Date().toISOString()\n        },\n        {\n          id: '2',\n          name: 'Novidades na Loja',\n          channel: 'email',\n          subject: '‚ú® Novidades Acabaram de Chegar!',\n          message: 'Ol√° {{name}}!\\n\\nTemos novidades incr√≠veis na nossa loja!\\n\\nVem descobrir as novas cole√ß√µes e aproveita 20% de desconto na primeira compra.\\n\\nC√≥digo: NOVO20\\n\\nBoas compras!\\nEquipa Marisol',\n          created_at: new Date().toISOString()\n        },\n        {\n          id: '3',\n          name: 'Agradecimento',\n          channel: 'email',\n          subject: 'üíñ Obrigada pela tua Compra!',\n          message: 'Ol√° {{name}}!\\n\\nQueremos agradecer a tua confian√ßa e prefer√™ncia!\\n\\nComo agradecimento, tens 15% de desconto na pr√≥xima compra.\\n\\nC√≥digo: OBRIGADA15\\n\\nAt√© breve!\\nEquipa Marisol',\n          created_at: new Date().toISOString()\n        },\n        {\n          id: '4',\n          name: 'Promo√ß√£o WhatsApp',\n          channel: 'whatsapp',\n          message: 'üéâ Ol√° {{name}}!\\n\\nPromo√ß√£o EXCLUSIVA para ti!\\n\\n‚ú® 30% OFF em produtos selecionados\\nüöö Envio GR√ÅTIS acima de ‚Ç¨100\\n\\nVem ver: https://marisol.lu\\n\\nEquipa Marisol üíô',\n          created_at: new Date().toISOString()\n        },\n        {\n          id: '5',\n          name: 'Novidade WhatsApp',\n          channel: 'whatsapp',\n          message: '‚ú® Ol√° {{name}}!\\n\\nNovas cole√ß√µes acabaram de chegar! üõçÔ∏è\\n\\nVem descobrir e aproveita 20% OFF:\\nhttps://marisol.lu\\n\\nEquipa Marisol üíô',\n          created_at: new Date().toISOString()\n        }\n      ];\n      setTemplates(defaultTemplates);\n      // Guardar templates padr√£o\n      await supabase\n        .from('site_settings')\n        .upsert({\n          key: 'marketing_templates',\n          value: defaultTemplates\n        });\n    }\n  };\n\n  const loadHistory = async () => {\n    const { data } = await supabase\n      .from('site_settings')\n      .select('value')\n      .eq('key', 'marketing_history')\n      .single();\n    \n    if (data?.value) {\n      setHistory(data.value as MessageHistory[]);\n    }\n  };\n\n  // Filtrar clientes\n  const getFilteredCustomers = () => {\n    let filtered = customers;\n\n    // Filtro por tipo\n    if (filterType === 'vip') {\n      filtered = filtered.filter(c => c.is_newsletter_subscribed);\n    } else if (filterType === 'with_orders') {\n      filtered = filtered.filter(c => c.order_count > 0);\n    } else if (filterType === 'without_orders') {\n      filtered = filtered.filter(c => c.order_count === 0);\n    }\n\n    // Filtro por pesquisa\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(c =>\n        c.name.toLowerCase().includes(query) ||\n        c.email.toLowerCase().includes(query) ||\n        c.phone?.toLowerCase().includes(query)\n      );\n    }\n\n    return filtered;\n  };\n\n  // Estat√≠sticas\n  const stats = {\n    total: customers.length,\n    vip: customers.filter(c => c.is_newsletter_subscribed).length,\n    withOrders: customers.filter(c => c.order_count > 0).length,\n    withoutOrders: customers.filter(c => c.order_count === 0).length\n  };\n\n  // Selecionar clientes\n  const toggleCustomer = (customerId: string) => {\n    const newSelected = new Set(selectedCustomers);\n    if (newSelected.has(customerId)) {\n      newSelected.delete(customerId);\n    } else {\n      newSelected.add(customerId);\n    }\n    setSelectedCustomers(newSelected);\n  };\n\n  const toggleAll = () => {\n    const filtered = getFilteredCustomers();\n    if (selectedCustomers.size === filtered.length) {\n      setSelectedCustomers(new Set());\n    } else {\n      setSelectedCustomers(new Set(filtered.map(c => c.id)));\n    }\n  };\n\n  // Enviar mensagem\n  const handleSendMessage = (channel: 'email' | 'whatsapp') => {\n    setSelectedChannel(channel);\n    setShowMessageModal(true);\n  };\n\n  const sendMessage = async () => {\n    if (!selectedTemplate || selectedCustomers.size === 0) return;\n\n    const selectedCustomersList = customers.filter(c => selectedCustomers.has(c.id));\n\n    if (selectedChannel === 'email') {\n      // Email\n      const emails = selectedCustomersList.map(c => c.email).join(',');\n      const subject = selectedTemplate.subject || '';\n      const body = selectedTemplate.message.replace(/{{name}}/g, '');\n      \n      window.location.href = `mailto:${emails}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n    } else {\n      // WhatsApp - abrir para cada cliente\n      selectedCustomersList.forEach(customer => {\n        const message = selectedTemplate.message.replace(/{{name}}/g, customer.name);\n        const phone = customer.phone?.replace(/\\D/g, '');\n        if (phone) {\n          window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');\n        }\n      });\n    }\n\n    // Guardar hist√≥rico\n    const newHistoryEntry: MessageHistory = {\n      id: Date.now().toString(),\n      customer_ids: Array.from(selectedCustomers),\n      customer_names: selectedCustomersList.map(c => c.name),\n      channel: selectedChannel,\n      template_name: selectedTemplate.name,\n      sent_at: new Date().toISOString()\n    };\n\n    const updatedHistory = [newHistoryEntry, ...history];\n    setHistory(updatedHistory);\n\n    await supabase\n      .from('site_settings')\n      .upsert({\n        key: 'marketing_history',\n        value: updatedHistory\n      });\n\n    setShowMessageModal(false);\n    setSelectedCustomers(new Set());\n    setSelectedTemplate(null);\n  };\n\n  // Templates\n  const saveTemplate = async () => {\n    if (!editingTemplate) return;\n\n    let updatedTemplates;\n    if (templates.find(t => t.id === editingTemplate.id)) {\n      // Editar existente\n      updatedTemplates = templates.map(t => \n        t.id === editingTemplate.id ? editingTemplate : t\n      );\n    } else {\n      // Novo template\n      const newTemplate = {\n        ...editingTemplate,\n        id: Date.now().toString(),\n        created_at: new Date().toISOString()\n      };\n      updatedTemplates = [...templates, newTemplate];\n    }\n\n    setTemplates(updatedTemplates);\n    await supabase\n      .from('site_settings')\n      .upsert({\n        key: 'marketing_templates',\n        value: updatedTemplates\n      });\n\n    setShowTemplateModal(false);\n    setEditingTemplate(null);\n  };\n\n  const deleteTemplate = async (templateId: string) => {\n    if (!confirm('Tens a certeza que queres eliminar este template?')) return;\n\n    const updatedTemplates = templates.filter(t => t.id !== templateId);\n    setTemplates(updatedTemplates);\n\n    await supabase\n      .from('site_settings')\n      .upsert({\n        key: 'marketing_templates',\n        value: updatedTemplates\n      });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  const filteredCustomers = getFilteredCustomers();\n\n  return (\n    <div>\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            Marketing Profissional\n          </h1>\n          <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n            Gerir clientes, templates e campanhas de marketing\n          </p>\n        </div>\n      </div>\n\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-sm p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Total</p>\n              <p className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{stats.total}</p>\n            </div>\n            <div className=\"w-14 h-14 rounded-full bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center\">\n              <i className=\"ri-group-line text-2xl text-white\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-sm p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Clientes VIP</p>\n              <p className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{stats.vip}</p>\n            </div>\n            <div className=\"w-14 h-14 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center\">\n              <i className=\"ri-vip-crown-line text-2xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-xs text-amber-600 mt-2\">Newsletter = VIP üëë</p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-sm p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Com Compras</p>\n              <p className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{stats.withOrders}</p>\n            </div>\n            <div className=\"w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center\">\n              <i className=\"ri-shopping-bag-3-line text-2xl text-white\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-sm p-6`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-1`}>Sem Compras</p>\n              <p className={`text-3xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{stats.withoutOrders}</p>\n            </div>\n            <div className=\"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center\">\n              <i className=\"ri-user-add-line text-2xl text-white\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-sm mb-6`}>\n        <div className=\"flex border-b border-gray-200 dark:border-gray-700\">\n          <button\n            onClick={() => setActiveTab('customers')}\n            className={`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'customers'\n                ? 'border-b-2 border-pink-500 text-pink-600'\n                : darkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-600 hover:text-gray-800'\n            }`}\n          >\n            <i className=\"ri-group-line mr-2\"></i>\n            Clientes ({filteredCustomers.length})\n          </button>\n          <button\n            onClick={() => setActiveTab('templates')}\n            className={`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'templates'\n                ? 'border-b-2 border-pink-500 text-pink-600'\n                : darkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-600 hover:text-gray-800'\n            }`}\n          >\n            <i className=\"ri-file-text-line mr-2\"></i>\n            Templates ({templates.length})\n          </button>\n          <button\n            onClick={() => setActiveTab('history')}\n            className={`px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${\n              activeTab === 'history'\n                ? 'border-b-2 border-pink-500 text-pink-600'\n                : darkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-600 hover:text-gray-800'\n            }`}\n          >\n            <i className=\"ri-history-line mr-2\"></i>\n            Hist√≥rico ({history.length})\n          </button>\n        </div>\n\n        {/* Conte√∫do dos Tabs */}\n        <div className=\"p-6\">\n          {/* TAB: CLIENTES */}\n          {activeTab === 'customers' && (\n            <div>\n              {/* Filtros e Pesquisa */}\n              <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n                <div className=\"flex-1\">\n                  <div className=\"relative\">\n                    <i className=\"ri-search-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Pesquisar por nome, email ou telefone...\"\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      className={`w-full pl-12 pr-4 py-3 rounded-lg border ${\n                        darkMode\n                          ? 'bg-gray-700 border-gray-600 text-white'\n                          : 'bg-white border-gray-200 text-gray-800'\n                      } focus:outline-none focus:ring-2 focus:ring-pink-500`}\n                    />\n                  </div>\n                </div>\n\n                <select\n                  value={filterType}\n                  onChange={(e) => setFilterType(e.target.value as any)}\n                  className={`px-4 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'bg-gray-700 border-gray-600 text-white'\n                      : 'bg-white border-gray-200 text-gray-800'\n                  } focus:outline-none focus:ring-2 focus:ring-pink-500`}\n                >\n                  <option value=\"all\">Todos os Clientes</option>\n                  <option value=\"vip\">üëë Clientes VIP (Newsletter)</option>\n                  <option value=\"with_orders\">Com Compras</option>\n                  <option value=\"without_orders\">Sem Compras</option>\n                </select>\n              </div>\n\n              {/* Bot√µes de A√ß√£o */}\n              {selectedCustomers.size > 0 && (\n                <div className=\"flex gap-3 mb-6\">\n                  <button\n                    onClick={() => handleSendMessage('email')}\n                    className=\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all whitespace-nowrap\"\n                  >\n                    <i className=\"ri-mail-line text-lg\"></i>\n                    Enviar Email ({selectedCustomers.size})\n                  </button>\n                  <button\n                    onClick={() => handleSendMessage('whatsapp')}\n                    className=\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all whitespace-nowrap\"\n                  >\n                    <i className=\"ri-whatsapp-line text-lg\"></i>\n                    Enviar WhatsApp ({selectedCustomers.size})\n                  </button>\n                </div>\n              )}\n\n              {/* Tabela de Clientes */}\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                      <th className=\"px-4 py-3 text-left\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedCustomers.size === filteredCustomers.length && filteredCustomers.length > 0}\n                          onChange={toggleAll}\n                          className=\"w-5 h-5 rounded border-gray-300 text-pink-500 focus:ring-pink-500 cursor-pointer\"\n                        />\n                      </th>\n                      <th className={`px-4 py-3 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                        Cliente\n                      </th>\n                      <th className={`px-4 py-3 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                        Contacto\n                      </th>\n                      <th className={`px-4 py-3 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                        Tipo\n                      </th>\n                      <th className={`px-4 py-3 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                        Compras\n                      </th>\n                      <th className={`px-4 py-3 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                        Total Gasto\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {filteredCustomers.map((customer) => (\n                      <tr\n                        key={customer.id}\n                        className={`border-t ${\n                          darkMode ? 'border-gray-700 hover:bg-gray-700' : 'border-gray-100 hover:bg-gray-50'\n                        } transition-colors`}\n                      >\n                        <td className=\"px-4 py-4\">\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedCustomers.has(customer.id)}\n                            onChange={() => toggleCustomer(customer.id)}\n                            className=\"w-5 h-5 rounded border-gray-300 text-pink-500 focus:ring-pink-500 cursor-pointer\"\n                          />\n                        </td>\n                        <td className=\"px-4 py-4\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0\">\n                              {customer.name.charAt(0).toUpperCase()}\n                            </div>\n                            <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                              {customer.name}\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"px-4 py-4\">\n                          <div className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <i className=\"ri-mail-line text-gray-400\"></i>\n                              {customer.email}\n                            </div>\n                            {customer.phone && (\n                              <div className=\"flex items-center gap-2\">\n                                <i className=\"ri-phone-line text-gray-400\"></i>\n                                {customer.phone}\n                              </div>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-4 py-4\">\n                          {customer.is_newsletter_subscribed ? (\n                            <span className=\"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-yellow-400 to-amber-500 text-white whitespace-nowrap\">\n                              <i className=\"ri-vip-crown-fill\"></i>\n                              VIP\n                            </span>\n                          ) : customer.order_count > 0 ? (\n                            <span className=\"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-500 to-emerald-600 text-white whitespace-nowrap\">\n                              <i className=\"ri-repeat-line\"></i>\n                              Recorrente\n                            </span>\n                          ) : (\n                            <span className=\"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-500 to-cyan-600 text-white whitespace-nowrap\">\n                              <i className=\"ri-user-add-line\"></i>\n                              Novo\n                            </span>\n                          )}\n                        </td>\n                        <td className={`px-4 py-4 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                          {customer.order_count}\n                        </td>\n                        <td className={`px-4 py-4 font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                          ‚Ç¨{(customer.total_spent || 0).toFixed(2)}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n\n                {filteredCustomers.length === 0 && (\n                  <div className=\"text-center py-12\">\n                    <i className=\"ri-user-search-line text-5xl text-gray-400 mb-3\"></i>\n                    <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                      Nenhum cliente encontrado\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* TAB: TEMPLATES */}\n          {activeTab === 'templates' && (\n            <div>\n              <div className=\"flex justify-between items-center mb-6\">\n                <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n                  Criar e gerir templates de mensagens reutiliz√°veis\n                </p>\n                <button\n                  onClick={() => {\n                    setEditingTemplate({\n                      id: '',\n                      name: '',\n                      channel: 'email',\n                      subject: '',\n                      message: '',\n                      created_at: ''\n                    });\n                    setShowTemplateModal(true);\n                  }}\n                  className=\"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all whitespace-nowrap\"\n                >\n                  <i className=\"ri-add-line text-lg\"></i>\n                  Novo Template\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {templates.map((template) => (\n                  <div\n                    key={template.id}\n                    className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} rounded-lg p-6 border-2 border-transparent hover:border-pink-500 transition-all`}\n                  >\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className={`text-lg font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {template.name}\n                          </h3>\n                          {template.channel === 'email' ? (\n                            <span className=\"px-2 py-1 bg-purple-500 text-white text-xs rounded-full\">\n                              <i className=\"ri-mail-line mr-1\"></i>\n                              Email\n                            </span>\n                          ) : (\n                            <span className=\"px-2 py-1 bg-green-500 text-white text-xs rounded-full\">\n                              <i className=\"ri-whatsapp-line mr-1\"></i>\n                              WhatsApp\n                            </span>\n                          )}\n                        </div>\n                        {template.subject && (\n                          <p className={`text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                            {template.subject}\n                          </p>\n                        )}\n                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} line-clamp-3`}>\n                          {template.message}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <button\n                        onClick={() => {\n                          setEditingTemplate(template);\n                          setShowTemplateModal(true);\n                        }}\n                        className=\"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm whitespace-nowrap\"\n                      >\n                        <i className=\"ri-edit-line mr-1\"></i>\n                        Editar\n                      </button>\n                      <button\n                        onClick={() => deleteTemplate(template.id)}\n                        className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm whitespace-nowrap\"\n                      >\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {templates.length === 0 && (\n                <div className=\"text-center py-12\">\n                  <i className=\"ri-file-text-line text-5xl text-gray-400 mb-3\"></i>\n                  <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-4`}>\n                    Ainda n√£o tens templates\n                  </p>\n                  <button\n                    onClick={() => {\n                      setEditingTemplate({\n                        id: '',\n                        name: '',\n                        channel: 'email',\n                        subject: '',\n                        message: '',\n                        created_at: ''\n                      });\n                      setShowTemplateModal(true);\n                    }}\n                    className=\"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all whitespace-nowrap\"\n                  >\n                    Criar Primeiro Template\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* TAB: HIST√ìRICO */}\n          {activeTab === 'history' && (\n            <div>\n              <p className={`mb-6 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Hist√≥rico de todas as mensagens enviadas\n              </p>\n\n              <div className=\"space-y-4\">\n                {history.map((entry) => (\n                  <div\n                    key={entry.id}\n                    className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} rounded-lg p-6`}\n                  >\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <div className=\"flex items-center gap-3\">\n                        {entry.channel === 'email' ? (\n                          <div className=\"w-12 h-12 rounded-full bg-purple-500 flex items-center justify-center flex-shrink-0\">\n                            <i className=\"ri-mail-line text-xl text-white\"></i>\n                          </div>\n                        ) : (\n                          <div className=\"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0\">\n                            <i className=\"ri-whatsapp-line text-xl text-white\"></i>\n                          </div>\n                        )}\n                        <div>\n                          <h4 className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {entry.template_name}\n                          </h4>\n                          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                            {entry.channel === 'email' ? 'Email' : 'WhatsApp'} ¬∑ {entry.customer_names.length} destinat√°rios\n                          </p>\n                        </div>\n                      </div>\n                      <span className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                        {new Date(entry.sent_at).toLocaleString('pt-PT')}\n                      </span>\n                    </div>\n                    <div className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                      <strong>Destinat√°rios:</strong> {entry.customer_names.join(', ')}\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {history.length === 0 && (\n                <div className=\"text-center py-12\">\n                  <i className=\"ri-history-line text-5xl text-gray-400 mb-3\"></i>\n                  <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                    Ainda n√£o enviaste mensagens\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modal: Enviar Mensagem */}\n      {showMessageModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`}>\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  {selectedChannel === 'email' ? 'üìß Enviar Email' : 'üí¨ Enviar WhatsApp'}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowMessageModal(false);\n                    setSelectedTemplate(null);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"ri-close-line text-2xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-2`}>\n                  Enviar para <strong>{selectedCustomers.size}</strong> cliente(s)\n                </p>\n              </div>\n\n              <div className=\"mb-6\">\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Escolher Template\n                </label>\n                <div className=\"space-y-2\">\n                  {templates\n                    .filter(t => t.channel === selectedChannel)\n                    .map((template) => (\n                      <button\n                        key={template.id}\n                        onClick={() => setSelectedTemplate(template)}\n                        className={`w-full text-left p-4 rounded-lg border-2 transition-all ${\n                          selectedTemplate?.id === template.id\n                            ? 'border-pink-500 bg-pink-50 dark:bg-pink-900/20'\n                            : darkMode\n                            ? 'border-gray-700 bg-gray-700 hover:border-gray-600'\n                            : 'border-gray-200 bg-gray-50 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"font-semibold mb-1\">{template.name}</div>\n                        {template.subject && (\n                          <div className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                            {template.subject}\n                          </div>\n                        )}\n                        <div className=\"text-sm text-gray-500 dark:text-gray-500 line-clamp-2\">\n                          {template.message}\n                        </div>\n                      </button>\n                    ))}\n                </div>\n              </div>\n\n              {selectedTemplate && (\n                <div className={`p-4 rounded-lg mb-6 ${darkMode ? 'bg-gray-700' : 'bg-blue-50'}`}>\n                  <p className={`text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-blue-800'}`}>\n                    <i className=\"ri-information-line mr-1\"></i>\n                    Pr√©-visualiza√ß√£o\n                  </p>\n                  {selectedTemplate.subject && (\n                    <p className={`text-sm font-semibold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedTemplate.subject}\n                    </p>\n                  )}\n                  <p className={`text-sm whitespace-pre-line ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    {selectedTemplate.message.replace(/{{name}}/g, '[Nome do Cliente]')}\n                  </p>\n                </div>\n              )}\n\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => {\n                    setShowMessageModal(false);\n                    setSelectedTemplate(null);\n                  }}\n                  className={`flex-1 px-6 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'border-gray-600 text-gray-300 hover:bg-gray-700'\n                      : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                  } transition-colors whitespace-nowrap`}\n                >\n                  Cancelar\n                </button>\n                <button\n                  onClick={sendMessage}\n                  disabled={!selectedTemplate}\n                  className={`flex-1 px-6 py-3 rounded-lg text-white transition-colors whitespace-nowrap ${\n                    selectedTemplate\n                      ? selectedChannel === 'email'\n                        ? 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600'\n                        : 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'\n                      : 'bg-gray-400 cursor-not-allowed'\n                  }`}\n                >\n                  {selectedChannel === 'email' ? 'üìß Enviar Email' : 'üí¨ Enviar WhatsApp'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modal: Template */}\n      {showTemplateModal && editingTemplate && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`}>\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  {editingTemplate.id ? 'Editar Template' : 'Novo Template'}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowTemplateModal(false);\n                    setEditingTemplate(null);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"ri-close-line text-2xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Nome do Template *\n                </label>\n                <input\n                  type=\"text\"\n                  value={editingTemplate.name}\n                  onChange={(e) => setEditingTemplate({ ...editingTemplate, name: e.target.value })}\n                  placeholder=\"Ex: Promo√ß√£o de Ver√£o\"\n                  className={`w-full px-4 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'bg-gray-700 border-gray-600 text-white'\n                      : 'bg-white border-gray-200 text-gray-800'\n                  } focus:outline-none focus:ring-2 focus:ring-pink-500`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Canal *\n                </label>\n                <select\n                  value={editingTemplate.channel}\n                  onChange={(e) => setEditingTemplate({ ...editingTemplate, channel: e.target.value as 'email' | 'whatsapp' })}\n                  className={`w-full px-4 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'bg-gray-700 border-gray-600 text-white'\n                      : 'bg-white border-gray-200 text-gray-800'\n                  } focus:outline-none focus:ring-2 focus:ring-pink-500`}\n                >\n                  <option value=\"email\">üìß Email</option>\n                  <option value=\"whatsapp\">üí¨ WhatsApp</option>\n                </select>\n              </div>\n\n              {editingTemplate.channel === 'email' && (\n                <div>\n                  <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    Assunto *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={editingTemplate.subject || ''}\n                    onChange={(e) => setEditingTemplate({ ...editingTemplate, subject: e.target.value })}\n                    placeholder=\"Ex: üéÅ Oferta Exclusiva para Ti!\"\n                    className={`w-full px-4 py-3 rounded-lg border ${\n                      darkMode\n                        ? 'bg-gray-700 border-gray-600 text-white'\n                        : 'bg-white border-gray-200 text-gray-800'\n                    } focus:outline-none focus:ring-2 focus:ring-pink-500`}\n                  />\n                </div>\n              )}\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Mensagem *\n                </label>\n                <textarea\n                  value={editingTemplate.message}\n                  onChange={(e) => setEditingTemplate({ ...editingTemplate, message: e.target.value })}\n                  placeholder=\"Escreve a tua mensagem aqui... Usa {{name}} para inserir o nome do cliente automaticamente.\"\n                  rows={8}\n                  className={`w-full px-4 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'bg-gray-700 border-gray-600 text-white'\n                      : 'bg-white border-gray-200 text-gray-800'\n                  } focus:outline-none focus:ring-2 focus:ring-pink-500`}\n                />\n                <p className=\"text-xs text-gray-500 mt-2\">\n                  üí° Usa <code className=\"bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded\">{'{{name}}'}</code> para personalizar com o nome do cliente\n                </p>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowTemplateModal(false);\n                    setEditingTemplate(null);\n                  }}\n                  className={`flex-1 px-6 py-3 rounded-lg border ${\n                    darkMode\n                      ? 'border-gray-600 text-gray-300 hover:bg-gray-700'\n                      : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n                  } transition-colors whitespace-nowrap`}\n                >\n                  Cancelar\n                </button>\n                <button\n                  onClick={saveTemplate}\n                  disabled={!editingTemplate.name || !editingTemplate.message || (editingTemplate.channel === 'email' && !editingTemplate.subject)}\n                  className={`flex-1 px-6 py-3 rounded-lg text-white transition-colors whitespace-nowrap ${\n                    editingTemplate.name && editingTemplate.message && (editingTemplate.channel === 'whatsapp' || editingTemplate.subject)\n                      ? 'bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600'\n                      : 'bg-gray-400 cursor-not-allowed'\n                  }`}\n                >\n                  <i className=\"ri-save-line mr-2\"></i>\n                  Guardar Template\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  import.meta.env.VITE_PUBLIC_SUPABASE_URL,\n  import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY\n);\n\ninterface NewsletterManagementProps {\n  darkMode: boolean;\n}\n\ninterface Subscriber {\n  id: string;\n  name?: string;\n  email: string;\n  phone?: string;\n  country?: string;\n  language?: string;\n  source?: string;\n  status: 'active' | 'cancelled';\n  created_at: string;\n  customer_id?: string;\n  customer?: any;\n}\n\nexport default function NewsletterManagement({ darkMode }: NewsletterManagementProps) {\n  const [subscribers, setSubscribers] = useState<Subscriber[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterType, setFilterType] = useState<'all' | 'active' | 'cancelled' | 'new' | 'with_purchases'>('all');\n  const [selectedSubscriber, setSelectedSubscriber] = useState<Subscriber | null>(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n\n  useEffect(() => {\n    loadSubscribers();\n    \n    // Subscri√ß√£o em tempo real\n    const subscription = supabase\n      .channel('newsletter_changes')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'newsletter_subscribers' }, () => {\n        loadSubscribers();\n      })\n      .subscribe();\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  const loadSubscribers = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('newsletter_subscribers')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      if (data) setSubscribers(data);\n    } catch (error) {\n      console.error('Erro ao carregar subscritores:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const exportSubscribers = () => {\n    const csv = ['Nome,Email,Telefone,Pa√≠s,Idioma,Data de Inscri√ß√£o,Origem,Estado'];\n    filteredSubscribers.forEach(sub => {\n      csv.push(`${sub.name || ''},${sub.email},${sub.phone || ''},${sub.country || ''},${sub.language || ''},${new Date(sub.created_at).toLocaleDateString('pt-PT')},${sub.source || 'Website'},${sub.status === 'active' ? 'Ativo' : 'Cancelado'}`);\n    });\n    \n    const blob = new Blob([csv.join('\\n')], { type: 'text/csv;charset=utf-8;' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `newsletter-subscribers-${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n\n  const cancelSubscription = async (id: string) => {\n    if (!confirm('Tem certeza que deseja cancelar esta inscri√ß√£o?')) return;\n\n    try {\n      const { error } = await supabase\n        .from('newsletter_subscribers')\n        .update({ status: 'cancelled' })\n        .eq('id', id);\n\n      if (error) throw error;\n\n      // Criar notifica√ß√£o\n      await supabase.from('notifications').insert({\n        type: 'newsletter',\n        title: 'Cancelamento de Newsletter',\n        message: `Subscritor cancelou a inscri√ß√£o`,\n        is_read: false,\n        created_at: new Date().toISOString()\n      });\n\n      alert('‚úÖ Inscri√ß√£o cancelada com sucesso!');\n      loadSubscribers();\n    } catch (error) {\n      console.error('Erro ao cancelar inscri√ß√£o:', error);\n      alert('‚ùå Erro ao cancelar inscri√ß√£o');\n    }\n  };\n\n  const reactivateSubscription = async (id: string) => {\n    try {\n      const { error } = await supabase\n        .from('newsletter_subscribers')\n        .update({ status: 'active' })\n        .eq('id', id);\n\n      if (error) throw error;\n\n      alert('‚úÖ Inscri√ß√£o reativada com sucesso!');\n      loadSubscribers();\n    } catch (error) {\n      console.error('Erro ao reativar inscri√ß√£o:', error);\n      alert('‚ùå Erro ao reativar inscri√ß√£o');\n    }\n  };\n\n  const openDetailsModal = (subscriber: Subscriber) => {\n    setSelectedSubscriber(subscriber);\n    setShowDetailsModal(true);\n  };\n\n  const filteredSubscribers = subscribers.filter(sub => {\n    // Filtro de pesquisa\n    const matchesSearch = !searchTerm || \n      sub.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      sub.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      sub.country?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    // Filtro de tipo\n    let matchesType = true;\n    if (filterType === 'active') {\n      matchesType = sub.status === 'active';\n    } else if (filterType === 'cancelled') {\n      matchesType = sub.status === 'cancelled';\n    } else if (filterType === 'new') {\n      const weekAgo = new Date();\n      weekAgo.setDate(weekAgo.getDate() - 7);\n      matchesType = new Date(sub.created_at) >= weekAgo;\n    } else if (filterType === 'with_purchases') {\n      matchesType = false; // Removido temporariamente at√© conectar com customers\n    }\n\n    return matchesSearch && matchesType;\n  });\n\n  const stats = {\n    total: subscribers.length,\n    active: subscribers.filter(s => s.status === 'active').length,\n    cancelled: subscribers.filter(s => s.status === 'cancelled').length,\n    today: subscribers.filter(s => {\n      const date = new Date(s.created_at);\n      const today = new Date();\n      return date.toDateString() === today.toDateString();\n    }).length,\n    week: subscribers.filter(s => {\n      const date = new Date(s.created_at);\n      const weekAgo = new Date();\n      weekAgo.setDate(weekAgo.getDate() - 7);\n      return date >= weekAgo;\n    }).length,\n    withPurchases: 0, // Removido temporariamente at√© conectar com customers\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <i className=\"ri-loader-4-line text-5xl text-pink-500 animate-spin\"></i>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Aviso de Sincroniza√ß√£o */}\n      <div className={`mb-6 ${darkMode ? 'bg-blue-900/30 border-blue-700' : 'bg-blue-50 border-blue-200'} rounded-2xl p-4 border`}>\n        <div className=\"flex items-start gap-3\">\n          <i className={`ri-information-line text-xl ${darkMode ? 'text-blue-300' : 'text-blue-600'}`}></i>\n          <div>\n            <h3 className={`font-semibold mb-1 ${darkMode ? 'text-blue-300' : 'text-blue-800'}`}>\n              ‚úÖ Sistema Sincronizado Automaticamente\n            </h3>\n            <p className={`text-sm ${darkMode ? 'text-blue-200' : 'text-blue-700'}`}>\n              Todas as inscri√ß√µes feitas no site aparecem aqui instantaneamente. Os dados s√£o guardados permanentemente no Supabase e nunca desaparecem.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 className={`text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            Gest√£o de Newsletter\n          </h1>\n          <p className={darkMode ? 'text-gray-400' : 'text-gray-600'}>\n            {subscribers.length} subscritores registados\n          </p>\n        </div>\n        <button\n          onClick={exportSubscribers}\n          className=\"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n        >\n          <i className=\"ri-download-line mr-2\"></i>\n          Exportar Lista (CSV)\n        </button>\n      </div>\n\n      {/* Estat√≠sticas - 6 Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6\">\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-mail-line text-2xl text-blue-600 dark:text-blue-400\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.total}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Total</p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-checkbox-circle-line text-2xl text-green-600 dark:text-green-400\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.active}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Ativos</p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-close-circle-line text-2xl text-red-600 dark:text-red-400\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.cancelled}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Cancelados</p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-calendar-check-line text-2xl text-yellow-600 dark:text-yellow-400\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.today}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Hoje</p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-line-chart-line text-2xl text-purple-600 dark:text-purple-400\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.week}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>√öltimos 7 Dias</p>\n        </div>\n\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 bg-pink-100 dark:bg-pink-900/30 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-shopping-bag-line text-2xl text-pink-600 dark:text-pink-400\"></i>\n            </div>\n          </div>\n          <p className={`text-3xl font-bold mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n            {stats.withPurchases}\n          </p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Com Compras</p>\n        </div>\n      </div>\n\n      {/* Filtros e Pesquisa */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-6 shadow-sm border mb-6`}>\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Pesquisar\n            </label>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder=\"Nome, email ou pa√≠s...\"\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent text-sm`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n              Filtrar por\n            </label>\n            <select\n              value={filterType}\n              onChange={(e) => setFilterType(e.target.value as any)}\n              className={`w-full px-4 py-2 rounded-lg border ${\n                darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-800'\n              } focus:ring-2 focus:ring-pink-400 focus:border-transparent text-sm cursor-pointer`}\n            >\n              <option value=\"all\">Todos os Subscritores</option>\n              <option value=\"active\">Ativos</option>\n              <option value=\"cancelled\">Cancelados</option>\n              <option value=\"new\">Novos (√∫ltimos 7 dias)</option>\n              <option value=\"with_purchases\">Com Compras</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Subscritores */}\n      <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl shadow-sm border overflow-hidden`}>\n        {filteredSubscribers.length === 0 ? (\n          <div className=\"text-center py-16\">\n            <i className={`ri-mail-line text-6xl mb-4 ${darkMode ? 'text-gray-600' : 'text-gray-300'}`}></i>\n            <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n              Nenhum subscritor encontrado\n            </p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} border-b ${darkMode ? 'border-gray-600' : 'border-gray-200'}`}>\n                <tr>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Subscritor\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Contacto\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Pa√≠s / Idioma\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Data de Inscri√ß√£o\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Origem\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Estado\n                  </th>\n                  <th className={`px-6 py-4 text-left text-xs font-semibold uppercase ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    A√ß√µes\n                  </th>\n                </tr>\n              </thead>\n              <tbody className={`divide-y ${darkMode ? 'divide-gray-700' : 'divide-gray-200'}`}>\n                {filteredSubscribers.map((subscriber) => (\n                  <tr key={subscriber.id} className={`${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-50'} transition-colors`}>\n                    <td className={`px-6 py-4`}>\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full flex items-center justify-center text-white font-bold\">\n                          {subscriber.name ? subscriber.name[0].toUpperCase() : subscriber.email[0].toUpperCase()}\n                        </div>\n                        <div>\n                          <p className={`text-sm font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {subscriber.name || 'Sem nome'}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className={`px-6 py-4`}>\n                      <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                        {subscriber.email}\n                      </p>\n                      {subscriber.phone && (\n                        <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                          {subscriber.phone}\n                        </p>\n                      )}\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      <div className=\"flex flex-col gap-1\">\n                        {subscriber.country && (\n                          <span className=\"inline-flex items-center gap-1\">\n                            <i className=\"ri-map-pin-line text-xs\"></i>\n                            {subscriber.country}\n                          </span>\n                        )}\n                        {subscriber.language && (\n                          <span className=\"inline-flex items-center gap-1 text-xs\">\n                            <i className=\"ri-global-line\"></i>\n                            {subscriber.language.toUpperCase()}\n                          </span>\n                        )}\n                      </div>\n                    </td>\n                    <td className={`px-6 py-4 text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      {new Date(subscriber.created_at).toLocaleDateString('pt-PT', {\n                        day: '2-digit',\n                        month: 'short',\n                        year: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                      })}\n                    </td>\n                    <td className={`px-6 py-4`}>\n                      <span className={`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium ${\n                        darkMode ? 'bg-blue-900/30 text-blue-400' : 'bg-blue-100 text-blue-700'\n                      }`}>\n                        <i className=\"ri-window-line\"></i>\n                        {subscriber.source || 'Website'}\n                      </span>\n                    </td>\n                    <td className={`px-6 py-4`}>\n                      {subscriber.status === 'active' ? (\n                        <span className=\"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-medium\">\n                          <i className=\"ri-checkbox-circle-line\"></i>\n                          Ativo\n                        </span>\n                      ) : (\n                        <span className=\"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs font-medium\">\n                          <i className=\"ri-close-circle-line\"></i>\n                          Cancelado\n                        </span>\n                      )}\n                    </td>\n                    <td className={`px-6 py-4`}>\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => openDetailsModal(subscriber)}\n                          className=\"w-8 h-8 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors cursor-pointer\"\n                          title=\"Ver Detalhes\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                        </button>\n                        {subscriber.status === 'active' ? (\n                          <button\n                            onClick={() => cancelSubscription(subscriber.id)}\n                            className=\"w-8 h-8 flex items-center justify-center bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors cursor-pointer\"\n                            title=\"Cancelar Inscri√ß√£o\"\n                          >\n                            <i className=\"ri-close-line\"></i>\n                          </button>\n                        ) : (\n                          <button\n                            onClick={() => reactivateSubscription(subscriber.id)}\n                            className=\"w-8 h-8 flex items-center justify-center bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors cursor-pointer\"\n                            title=\"Reativar Inscri√ß√£o\"\n                          >\n                            <i className=\"ri-refresh-line\"></i>\n                          </button>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Modal de Detalhes */}\n      {showDetailsModal && selectedSubscriber && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`}>\n            {/* Header */}\n            <div className=\"sticky top-0 bg-gradient-to-r from-pink-500 to-rose-500 p-6 rounded-t-2xl\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-2xl font-bold text-white\">Detalhes do Subscritor</h2>\n                <button\n                  onClick={() => setShowDetailsModal(false)}\n                  className=\"w-10 h-10 flex items-center justify-center bg-white/20 hover:bg-white/30 rounded-full transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-2xl text-white\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* Informa√ß√µes Pessoais */}\n              <div>\n                <h3 className={`text-lg font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-user-line text-pink-500\"></i>\n                  Informa√ß√µes Pessoais\n                </h3>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Nome</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.name || 'N√£o fornecido'}\n                    </p>\n                  </div>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Email</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.email}\n                    </p>\n                  </div>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Telefone</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.phone || 'N√£o fornecido'}\n                    </p>\n                  </div>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Pa√≠s</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.country || 'N√£o fornecido'}\n                    </p>\n                  </div>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Idioma Preferido</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.language?.toUpperCase() || 'N√£o fornecido'}\n                    </p>\n                  </div>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Data de Inscri√ß√£o</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {new Date(selectedSubscriber.created_at).toLocaleDateString('pt-PT', {\n                        day: '2-digit',\n                        month: 'long',\n                        year: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                      })}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Informa√ß√µes de Inscri√ß√£o */}\n              <div>\n                <h3 className={`text-lg font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  <i className=\"ri-mail-line text-pink-500\"></i>\n                  Informa√ß√µes de Inscri√ß√£o\n                </h3>\n                <div className=\"grid md:grid-cols-2 gap-4\">\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Origem</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.source || 'Website'}\n                    </p>\n                  </div>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                    <p className={`text-xs font-medium mb-1 ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>Estado</p>\n                    <p className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      {selectedSubscriber.status === 'active' ? (\n                        <span className=\"inline-flex items-center gap-1 text-green-600 dark:text-green-400\">\n                          <i className=\"ri-checkbox-circle-line\"></i>\n                          Ativo\n                        </span>\n                      ) : (\n                        <span className=\"inline-flex items-center gap-1 text-red-600 dark:text-red-400\">\n                          <i className=\"ri-close-circle-line\"></i>\n                          Cancelado\n                        </span>\n                      )}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Informa√ß√µes de Cliente (se existir) */}\n              {selectedSubscriber.customer_id && (\n                <div>\n                  <h3 className={`text-lg font-semibold mb-4 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    <i className=\"ri-shopping-bag-line text-pink-500\"></i>\n                    Cliente Registado\n                  </h3>\n                  <div className={`p-4 rounded-xl ${darkMode ? 'bg-blue-900/20 border-blue-700' : 'bg-blue-50 border-blue-200'} border`}>\n                    <p className={`text-sm ${darkMode ? 'text-blue-300' : 'text-blue-700'}`}>\n                      <i className=\"ri-information-line mr-2\"></i>\n                      Este subscritor tem uma conta de cliente registada na loja.\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* A√ß√µes */}\n              <div className=\"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                {selectedSubscriber.status === 'active' ? (\n                  <button\n                    onClick={() => {\n                      cancelSubscription(selectedSubscriber.id);\n                      setShowDetailsModal(false);\n                    }}\n                    className=\"flex-1 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-close-line mr-2\"></i>\n                    Cancelar Inscri√ß√£o\n                  </button>\n                ) : (\n                  <button\n                    onClick={() => {\n                      reactivateSubscription(selectedSubscriber.id);\n                      setShowDetailsModal(false);\n                    }}\n                    className=\"flex-1 px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition-colors cursor-pointer whitespace-nowrap\"\n                  >\n                    <i className=\"ri-refresh-line mr-2\"></i>\n                    Reativar Inscri√ß√£o\n                  </button>\n                )}\n                <button\n                  onClick={() => setShowDetailsModal(false)}\n                  className={`flex-1 px-6 py-3 ${darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-200 hover:bg-gray-300'} rounded-xl font-medium transition-colors cursor-pointer whitespace-nowrap`}\n                >\n                  Fechar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Dicas de Campanha */}\n      <div className={`mt-6 ${darkMode ? 'bg-blue-900/30 border-blue-700' : 'bg-blue-50 border-blue-200'} rounded-2xl p-6 border`}>\n        <h3 className={`font-semibold mb-3 flex items-center gap-2 ${darkMode ? 'text-blue-300' : 'text-blue-800'}`}>\n          <i className=\"ri-lightbulb-line\"></i>\n          Ideias para Campanhas de Email\n        </h3>\n        <ul className={`space-y-2 text-sm ${darkMode ? 'text-blue-200' : 'text-blue-700'}`}>\n          <li>‚Ä¢ Enviar novidades sobre novos produtos e cole√ß√µes</li>\n          <li>‚Ä¢ Criar campanhas sazonais (Primavera, Ver√£o, Outono, Inverno)</li>\n          <li>‚Ä¢ Oferecer descontos exclusivos para subscritores</li>\n          <li>‚Ä¢ Partilhar dicas de moda e tend√™ncias</li>\n          <li>‚Ä¢ Anunciar promo√ß√µes especiais e vendas flash</li>\n          <li>‚Ä¢ Enviar mensagens personalizadas para clientes com compras</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface Notification {\n  id: string;\n  type: 'order' | 'email' | 'stock_alert' | 'system' | 'contact' | 'customer' | 'newsletter' | 'error' | 'order_new' | 'order_status' | 'order_cancelled';\n  title: string;\n  message: string;\n  read: boolean;\n  created_at: string;\n  customer_email?: string;\n  customer_name?: string;\n  contact_subject?: string;\n  order_id?: string;\n  order_total?: number;\n  order_status?: string;\n  metadata?: any;\n}\n\nexport default function NotificationsManagement() {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filterType, setFilterType] = useState<string>('all');\n  const [filterRead, setFilterRead] = useState<string>('all');\n  const [selectedNotification, setSelectedNotification] = useState<Notification | null>(null);\n\n  useEffect(() => {\n    loadNotifications();\n    \n    // Subscrever para atualiza√ß√µes em tempo real\n    const notificationsChannel = supabase\n      .channel('notifications-changes')\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'notifications' }, () => {\n        loadNotifications();\n      })\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'contact_messages' }, () => {\n        loadNotifications();\n      })\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'orders' }, () => {\n        loadNotifications();\n      })\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'customers' }, () => {\n        loadNotifications();\n      })\n      .on('postgres_changes', { event: '*', schema: 'public', table: 'newsletter_subscribers' }, () => {\n        loadNotifications();\n      })\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(notificationsChannel);\n    };\n  }, []);\n\n  const loadNotifications = async () => {\n    try {\n      setLoading(true);\n      \n      // Carregar notifica√ß√µes do sistema\n      const { data: systemNotifications, error: systemError } = await supabase\n        .from('notifications')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (systemError) throw systemError;\n\n      // Carregar mensagens de contato n√£o lidas\n      const { data: contactMessages, error: contactError } = await supabase\n        .from('contact_messages')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (contactError) throw contactError;\n\n      // Converter mensagens de contato em notifica√ß√µes\n      const contactNotifications = (contactMessages || []).map((msg: any) => ({\n        id: `contact-${msg.id}`,\n        type: 'contact' as const,\n        title: `Nova Mensagem: ${msg.subject}`,\n        message: msg.message,\n        read: msg.status === 'read',\n        created_at: msg.created_at,\n        customer_email: msg.email,\n        customer_name: msg.name,\n        contact_subject: msg.subject,\n        metadata: msg,\n      }));\n\n      // Combinar todas as notifica√ß√µes\n      const allNotifications = [\n        ...(systemNotifications || []),\n        ...contactNotifications,\n      ].sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n\n      setNotifications(allNotifications);\n    } catch (error) {\n      console.error('Erro ao carregar notifica√ß√µes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const markAsRead = async (id: string) => {\n    try {\n      if (id.startsWith('contact-')) {\n        const contactId = id.replace('contact-', '');\n        const { error } = await supabase\n          .from('contact_messages')\n          .update({ status: 'read' })\n          .eq('id', contactId);\n\n        if (error) throw error;\n      } else {\n        const { error } = await supabase\n          .from('notifications')\n          .update({ read: true })\n          .eq('id', id);\n\n        if (error) throw error;\n      }\n      \n      // ‚úÖ Atualizar imediatamente o estado local\n      setNotifications(prev => \n        prev.map(n => n.id === id ? { ...n, read: true } : n)\n      );\n      \n      // Recarregar para garantir sincroniza√ß√£o\n      await loadNotifications();\n    } catch (error) {\n      console.error('Erro ao marcar como lida:', error);\n      alert('‚ùå Erro ao marcar notifica√ß√£o como lida');\n    }\n  };\n\n  const markAllAsRead = async () => {\n    try {\n      // Marcar todas as notifica√ß√µes como lidas\n      const { error: notifError } = await supabase\n        .from('notifications')\n        .update({ read: true })\n        .eq('read', false);\n\n      if (notifError) throw notifError;\n\n      // Marcar todas as mensagens de contato como lidas\n      const { error: contactError } = await supabase\n        .from('contact_messages')\n        .update({ status: 'read' })\n        .neq('status', 'read');\n\n      if (contactError) throw contactError;\n\n      // ‚úÖ Atualizar imediatamente o estado local\n      setNotifications(prev => \n        prev.map(n => ({ ...n, read: true }))\n      );\n\n      alert('‚úÖ Todas as notifica√ß√µes foram marcadas como lidas!');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Erro ao marcar todas como lidas:', error);\n      alert('‚ùå Erro ao marcar notifica√ß√µes como lidas');\n    }\n  };\n\n  const deleteNotification = async (id: string) => {\n    if (!confirm('Tem certeza que deseja eliminar esta notifica√ß√£o?')) return;\n    \n    try {\n      if (id.startsWith('contact-')) {\n        const contactId = id.replace('contact-', '');\n        const { error } = await supabase\n          .from('contact_messages')\n          .delete()\n          .eq('id', contactId);\n\n        if (error) throw error;\n      } else {\n        const { error } = await supabase\n          .from('notifications')\n          .delete()\n          .eq('id', id);\n\n        if (error) throw error;\n      }\n      \n      alert('‚úÖ Notifica√ß√£o eliminada com sucesso!');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Erro ao eliminar notifica√ß√£o:', error);\n      alert('‚ùå Erro ao eliminar notifica√ß√£o');\n    }\n  };\n\n  const deleteAllRead = async () => {\n    if (!confirm('Tem certeza que deseja eliminar TODAS as notifica√ß√µes lidas?')) return;\n    \n    try {\n      // Eliminar notifica√ß√µes lidas\n      const { error: notifError } = await supabase\n        .from('notifications')\n        .delete()\n        .eq('read', true);\n\n      if (notifError) throw notifError;\n\n      // Eliminar mensagens de contato lidas\n      const { error: contactError } = await supabase\n        .from('contact_messages')\n        .delete()\n        .eq('status', 'read');\n\n      if (contactError) throw contactError;\n\n      alert('‚úÖ Todas as notifica√ß√µes lidas foram eliminadas!');\n      await loadNotifications();\n    } catch (error) {\n      console.error('Erro ao eliminar notifica√ß√µes:', error);\n      alert('‚ùå Erro ao eliminar notifica√ß√µes');\n    }\n  };\n\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'order':\n      case 'order_new':\n      case 'order_status':\n      case 'order_cancelled':\n        return 'ri-shopping-bag-line';\n      case 'email': return 'ri-mail-line';\n      case 'contact': return 'ri-message-3-line';\n      case 'customer': return 'ri-user-add-line';\n      case 'newsletter': return 'ri-mail-send-line';\n      case 'stock_alert': return 'ri-alert-line';\n      case 'error': return 'ri-error-warning-line';\n      case 'system': return 'ri-settings-line';\n      default: return 'ri-notification-line';\n    }\n  };\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'order':\n      case 'order_new':\n        return 'text-blue-600 bg-blue-50 dark:text-blue-400 dark:bg-blue-900/30';\n      case 'order_status':\n        return 'text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/30';\n      case 'order_cancelled':\n        return 'text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30';\n      case 'email': \n        return 'text-teal-600 bg-teal-50 dark:text-teal-400 dark:bg-teal-900/30';\n      case 'contact': \n        return 'text-pink-600 bg-pink-50 dark:text-pink-400 dark:bg-pink-900/30';\n      case 'customer': \n        return 'text-indigo-600 bg-indigo-50 dark:text-indigo-400 dark:bg-indigo-900/30';\n      case 'newsletter': \n        return 'text-purple-600 bg-purple-50 dark:text-purple-400 dark:bg-purple-900/30';\n      case 'stock_alert': \n        return 'text-orange-600 bg-orange-50 dark:text-orange-400 dark:bg-orange-900/30';\n      case 'error': \n        return 'text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30';\n      case 'system': \n        return 'text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-900/30';\n      default: \n        return 'text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-900/30';\n    }\n  };\n\n  const getTypeName = (type: string) => {\n    switch (type) {\n      case 'order': return 'Encomenda';\n      case 'order_new': return 'Nova Encomenda';\n      case 'order_status': return 'Estado da Encomenda';\n      case 'order_cancelled': return 'Encomenda Cancelada';\n      case 'email': return 'Email';\n      case 'contact': return 'Mensagem de Contato';\n      case 'customer': return 'Cliente';\n      case 'newsletter': return 'Newsletter';\n      case 'stock_alert': return 'Alerta de Stock';\n      case 'error': return 'Erro';\n      case 'system': return 'Sistema';\n      default: return type;\n    }\n  };\n\n  const filteredNotifications = notifications.filter(n => {\n    if (filterType !== 'all') {\n      // Para o filtro \"order\", incluir todos os tipos de encomenda\n      if (filterType === 'order') {\n        if (!['order', 'order_new', 'order_status', 'order_cancelled'].includes(n.type)) {\n          return false;\n        }\n      } else if (n.type !== filterType) {\n        return false;\n      }\n    }\n    if (filterRead === 'unread' && n.read) return false;\n    if (filterRead === 'read' && !n.read) return false;\n    return true;\n  });\n\n  const stats = {\n    total: notifications.length,\n    unread: notifications.filter(n => !n.read).length,\n    contacts: notifications.filter(n => n.type === 'contact').length,\n    orders: notifications.filter(n => ['order', 'order_new', 'order_status', 'order_cancelled'].includes(n.type)).length,\n    customers: notifications.filter(n => n.type === 'customer').length,\n    newsletter: notifications.filter(n => n.type === 'newsletter').length,\n    errors: notifications.filter(n => n.type === 'error').length,\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Aviso de Persist√™ncia */}\n      <div className=\"bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 p-4 rounded-lg\">\n        <div className=\"flex items-start gap-3\">\n          <i className=\"ri-information-line text-2xl text-blue-600 dark:text-blue-400 flex-shrink-0\"></i>\n          <div>\n            <h3 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-1\">\n              Sistema de Notifica√ß√µes em Tempo Real\n            </h3>\n            <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n              Todas as notifica√ß√µes s√£o guardadas permanentemente na base de dados. Novas notifica√ß√µes aparecem automaticamente quando: clientes enviam mensagens, fazem compras, criam contas, subscrevem newsletter ou ocorrem erros no sistema.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Estat√≠sticas */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4\">\n        <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 rounded-2xl p-4 border border-blue-200 dark:border-blue-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-notification-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-blue-900 dark:text-blue-100\">{stats.total}</p>\n          <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">Total</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 rounded-2xl p-4 border border-orange-200 dark:border-orange-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-mail-unread-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-orange-900 dark:text-orange-100\">{stats.unread}</p>\n          <p className=\"text-xs text-orange-600 dark:text-orange-400 font-medium\">N√£o Lidas</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/30 dark:to-pink-800/30 rounded-2xl p-4 border border-pink-200 dark:border-pink-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-pink-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-message-3-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-pink-900 dark:text-pink-100\">{stats.contacts}</p>\n          <p className=\"text-xs text-pink-600 dark:text-pink-400 font-medium\">Mensagens</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 rounded-2xl p-4 border border-green-200 dark:border-green-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-shopping-bag-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-green-900 dark:text-green-100\">{stats.orders}</p>\n          <p className=\"text-xs text-green-600 dark:text-green-400 font-medium\">Encomendas</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 rounded-2xl p-4 border border-indigo-200 dark:border-indigo-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-indigo-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-user-add-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-indigo-900 dark:text-indigo-100\">{stats.customers}</p>\n          <p className=\"text-xs text-indigo-600 dark:text-indigo-400 font-medium\">Clientes</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 rounded-2xl p-4 border border-purple-200 dark:border-purple-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-mail-send-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-purple-900 dark:text-purple-100\">{stats.newsletter}</p>\n          <p className=\"text-xs text-purple-600 dark:text-purple-400 font-medium\">Newsletter</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/30 dark:to-red-800/30 rounded-2xl p-4 border border-red-200 dark:border-red-700\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"w-10 h-10 bg-red-500 rounded-xl flex items-center justify-center\">\n              <i className=\"ri-error-warning-line text-xl text-white\"></i>\n            </div>\n          </div>\n          <p className=\"text-2xl font-bold text-red-900 dark:text-red-100\">{stats.errors}</p>\n          <p className=\"text-xs text-red-600 dark:text-red-400 font-medium\">Erros</p>\n        </div>\n      </div>\n\n      {/* Filtros e A√ß√µes */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 p-6\">\n        <div className=\"flex flex-col lg:flex-row gap-4\">\n          <div className=\"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Tipo\n              </label>\n              <select\n                value={filterType}\n                onChange={(e) => setFilterType(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent cursor-pointer bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              >\n                <option value=\"all\">Todas</option>\n                <option value=\"contact\">Mensagens de Contato</option>\n                <option value=\"order\">Encomendas</option>\n                <option value=\"customer\">Clientes</option>\n                <option value=\"newsletter\">Newsletter</option>\n                <option value=\"stock_alert\">Alertas de Stock</option>\n                <option value=\"error\">Erros</option>\n                <option value=\"system\">Sistema</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                Estado\n              </label>\n              <select\n                value={filterRead}\n                onChange={(e) => setFilterRead(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-transparent cursor-pointer bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              >\n                <option value=\"all\">Todas</option>\n                <option value=\"unread\">N√£o Lidas</option>\n                <option value=\"read\">Lidas</option>\n              </select>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-2 items-stretch\">\n            <button\n              onClick={markAllAsRead}\n              disabled={stats.unread === 0}\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer flex items-center justify-center gap-2 h-full\"\n            >\n              <i className=\"ri-check-double-line text-lg\"></i>\n              <span className=\"hidden sm:inline\">Marcar Todas como Lidas</span>\n              <span className=\"sm:hidden\">Marcar Lidas</span>\n            </button>\n            <button\n              onClick={deleteAllRead}\n              disabled={stats.total === stats.unread}\n              className=\"px-4 py-2 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer flex items-center justify-center gap-2 h-full\"\n            >\n              <i className=\"ri-delete-bin-line text-lg\"></i>\n              <span className=\"hidden sm:inline\">Eliminar Lidas</span>\n              <span className=\"sm:hidden\">Eliminar</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Lista de Notifica√ß√µes */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden\">\n        {filteredNotifications.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <i className=\"ri-notification-off-line text-6xl text-gray-300 dark:text-gray-600 mb-4\"></i>\n            <p className=\"text-gray-500 dark:text-gray-400\">Nenhuma notifica√ß√£o encontrada</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-100 dark:divide-gray-700\">\n            {filteredNotifications.map((notification) => (\n              <div\n                key={notification.id}\n                className={`p-6 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${\n                  !notification.read ? 'bg-pink-50/30 dark:bg-pink-900/10 border-l-4 border-pink-500' : ''\n                }`}\n              >\n                <div className=\"flex items-start gap-4\">\n                  {/* √çcone do Tipo */}\n                  <div className={`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${getTypeColor(notification.type)}`}>\n                    <i className={`${getTypeIcon(notification.type)} text-2xl`}></i>\n                  </div>\n\n                  {/* Conte√∫do */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between gap-4 mb-2\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h3 className=\"font-semibold text-gray-900 dark:text-white\">\n                            {notification.title}\n                          </h3>\n                          {!notification.read && (\n                            <span className=\"px-2 py-0.5 bg-pink-500 text-white text-xs font-medium rounded-full whitespace-nowrap\">\n                              Nova\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-2\">\n                          {notification.message}\n                        </p>\n                        <div className=\"flex flex-wrap items-center gap-3 text-xs text-gray-500 dark:text-gray-400\">\n                          <span className={`px-2 py-1 rounded-lg font-medium ${getTypeColor(notification.type)}`}>\n                            {getTypeName(notification.type)}\n                          </span>\n                          <span>\n                            <i className=\"ri-time-line mr-1\"></i>\n                            {new Date(notification.created_at).toLocaleString('pt-PT')}\n                          </span>\n                          {notification.customer_name && (\n                            <span>\n                              <i className=\"ri-user-line mr-1\"></i>\n                              {notification.customer_name}\n                            </span>\n                          )}\n                          {notification.customer_email && (\n                            <span>\n                              <i className=\"ri-mail-line mr-1\"></i>\n                              {notification.customer_email}\n                            </span>\n                          )}\n                          {notification.order_id && (\n                            <span>\n                              <i className=\"ri-file-list-line mr-1\"></i>\n                              #{notification.order_id.substring(0, 8)}\n                            </span>\n                          )}\n                          {notification.order_total && (\n                            <span className=\"font-semibold text-green-600 dark:text-green-400\">\n                              <i className=\"ri-money-euro-circle-line mr-1\"></i>\n                              ‚Ç¨{notification.order_total.toFixed(2)}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* A√ß√µes */}\n                      <div className=\"flex items-center gap-2 flex-shrink-0\">\n                        <button\n                          onClick={() => setSelectedNotification(notification)}\n                          className=\"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors cursor-pointer whitespace-nowrap\"\n                          title=\"Ver detalhes\"\n                        >\n                          <i className=\"ri-eye-line text-xl\"></i>\n                        </button>\n                        {!notification.read && (\n                          <button\n                            onClick={() => markAsRead(notification.id)}\n                            className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors cursor-pointer whitespace-nowrap\"\n                            title=\"Marcar como lida\"\n                          >\n                            <i className=\"ri-check-line text-xl\"></i>\n                          </button>\n                        )}\n                        <button\n                          onClick={() => deleteNotification(notification.id)}\n                          className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors cursor-pointer whitespace-nowrap\"\n                          title=\"Eliminar\"\n                        >\n                          <i className=\"ri-delete-bin-line text-xl\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Modal de Detalhes */}\n      {selectedNotification && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-gradient-to-r from-pink-500 to-rose-500 text-white p-6 rounded-t-3xl z-10\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center\">\n                    <i className={`${getTypeIcon(selectedNotification.type)} text-2xl`}></i>\n                  </div>\n                  <div>\n                    <h2 className=\"text-2xl font-bold\">Detalhes da Notifica√ß√£o</h2>\n                    <p className=\"text-sm opacity-90\">{getTypeName(selectedNotification.type)}</p>\n                  </div>\n                </div>\n                <button\n                  onClick={() => setSelectedNotification(null)}\n                  className=\"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-2xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              {/* T√≠tulo e Status */}\n              <div>\n                <div className=\"flex items-start justify-between gap-4 mb-4\">\n                  <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                    {selectedNotification.title}\n                  </h3>\n                  {!selectedNotification.read ? (\n                    <span className=\"px-3 py-1 bg-pink-500 text-white text-sm font-medium rounded-full whitespace-nowrap\">\n                      N√£o Lida\n                    </span>\n                  ) : (\n                    <span className=\"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-full whitespace-nowrap\">\n                      Lida\n                    </span>\n                  )}\n                </div>\n                <p className=\"text-gray-600 dark:text-gray-300 leading-relaxed\">\n                  {selectedNotification.message}\n                </p>\n              </div>\n\n              {/* Informa√ß√µes */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Data e Hora</p>\n                  <p className=\"font-semibold text-gray-900 dark:text-white\">\n                    {new Date(selectedNotification.created_at).toLocaleString('pt-PT', {\n                      dateStyle: 'full',\n                      timeStyle: 'short',\n                    })}\n                  </p>\n                </div>\n\n                {selectedNotification.customer_name && (\n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Cliente</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white\">\n                      {selectedNotification.customer_name}\n                    </p>\n                  </div>\n                )}\n\n                {selectedNotification.customer_email && (\n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Email</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white break-all\">\n                      {selectedNotification.customer_email}\n                    </p>\n                  </div>\n                )}\n\n                {selectedNotification.contact_subject && (\n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Assunto</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white\">\n                      {selectedNotification.contact_subject}\n                    </p>\n                  </div>\n                )}\n\n                {selectedNotification.order_id && (\n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">ID da Encomenda</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white font-mono\">\n                      {selectedNotification.order_id}\n                    </p>\n                  </div>\n                )}\n\n                {selectedNotification.order_total && (\n                  <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl p-4 border border-green-200 dark:border-green-700\">\n                    <p className=\"text-sm text-green-600 dark:text-green-400 mb-1\">Valor Total</p>\n                    <p className=\"text-2xl font-bold text-green-700 dark:text-green-300\">\n                      ‚Ç¨{selectedNotification.order_total.toFixed(2)}\n                    </p>\n                  </div>\n                )}\n\n                {selectedNotification.order_status && (\n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">Estado</p>\n                    <p className=\"font-semibold text-gray-900 dark:text-white\">\n                      {selectedNotification.order_status}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* A√ß√µes */}\n              <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                {!selectedNotification.read && (\n                  <button\n                    onClick={() => {\n                      markAsRead(selectedNotification.id);\n                      setSelectedNotification(null);\n                    }}\n                    className=\"flex-1 px-6 py-3 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors cursor-pointer flex items-center justify-center gap-2\"\n                  >\n                    <i className=\"ri-check-line text-xl\"></i>\n                    Marcar como Lida\n                  </button>\n                )}\n                <button\n                  onClick={() => {\n                    deleteNotification(selectedNotification.id);\n                    setSelectedNotification(null);\n                  }}\n                  className=\"flex-1 px-6 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors cursor-pointer flex items-center justify-center gap-2\"\n                >\n                  <i className=\"ri-delete-bin-line text-xl\"></i>\n                  Eliminar\n                </button>\n                <button\n                  onClick={() => setSelectedNotification(null)}\n                  className=\"flex-1 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors cursor-pointer\"\n                >\n                  Fechar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabase = createClient(\n  import.meta.env.VITE_PUBLIC_SUPABASE_URL,\n  import.meta.env.VITE_PUBLIC_SUPABASE_ANON_KEY\n);\n\ninterface TaxShippingManagementProps {\n  darkMode: boolean;\n}\n\ninterface TaxRate {\n  id: string;\n  country: string;\n  country_code: string;\n  rate: number;\n  enabled: boolean;\n}\n\ninterface ShippingZone {\n  id: string;\n  name: string;\n  countries: string[];\n  cost: number;\n  free_shipping_threshold: number;\n  enabled: boolean;\n}\n\nconst TaxShippingManagement: React.FC<TaxShippingManagementProps> = ({ darkMode }) => {\n  const [activeTab, setActiveTab] = useState<'general' | 'countries' | 'shipping' | 'stripe' | 'legal'>('general');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [showAddCountryModal, setShowAddCountryModal] = useState(false);\n  const [newCountry, setNewCountry] = useState({ country: '', country_code: '', rate: 0 });\n\n  // Estados para configura√ß√µes gerais - PERSISTENTES\n  const [taxEnabled, setTaxEnabled] = useState(true);\n  const [taxCalculation, setTaxCalculation] = useState<'included' | 'checkout'>('included');\n  const [ossEnabled, setOssEnabled] = useState(false);\n  const [legalText, setLegalText] = useState('Os pre√ßos incluem IVA conforme a legisla√ß√£o da Uni√£o Europeia.');\n\n  // Configura√ß√µes Gerais - PERSISTENTES\n  const [generalSettings, setGeneralSettings] = useState({\n    vat_enabled: true,\n    vat_included: true,\n    oss_enabled: false,\n    legal_text: 'Os pre√ßos incluem IVA conforme a legisla√ß√£o da Uni√£o Europeia.',\n  });\n\n  // Taxas por Pa√≠s - TODOS OS PA√çSES DA UE - PERSISTENTES\n  const [taxRates, setTaxRates] = useState<TaxRate[]>([\n    { id: '1', country: 'Luxemburgo', country_code: 'LU', rate: 17, enabled: true },\n    { id: '2', country: 'Portugal', country_code: 'PT', rate: 23, enabled: true },\n    { id: '3', country: 'Espanha', country_code: 'ES', rate: 21, enabled: true },\n    { id: '4', country: 'Fran√ßa', country_code: 'FR', rate: 20, enabled: true },\n    { id: '5', country: 'Alemanha', country_code: 'DE', rate: 19, enabled: true },\n    { id: '6', country: 'It√°lia', country_code: 'IT', rate: 22, enabled: true },\n    { id: '7', country: 'Pa√≠ses Baixos', country_code: 'NL', rate: 21, enabled: true },\n    { id: '8', country: 'B√©lgica', country_code: 'BE', rate: 21, enabled: true },\n    { id: '9', country: '√Åustria', country_code: 'AT', rate: 20, enabled: true },\n    { id: '10', country: 'Gr√©cia', country_code: 'GR', rate: 24, enabled: true },\n    { id: '11', country: 'Irlanda', country_code: 'IE', rate: 23, enabled: true },\n    { id: '12', country: 'Dinamarca', country_code: 'DK', rate: 25, enabled: true },\n    { id: '13', country: 'Su√©cia', country_code: 'SE', rate: 25, enabled: true },\n    { id: '14', country: 'Finl√¢ndia', country_code: 'FI', rate: 24, enabled: true },\n    { id: '15', country: 'Pol√≥nia', country_code: 'PL', rate: 23, enabled: true },\n    { id: '16', country: 'Rep√∫blica Checa', country_code: 'CZ', rate: 21, enabled: true },\n    { id: '17', country: 'Hungria', country_code: 'HU', rate: 27, enabled: true },\n    { id: '18', country: 'Rom√©nia', country_code: 'RO', rate: 19, enabled: true },\n    { id: '19', country: 'Bulg√°ria', country_code: 'BG', rate: 20, enabled: true },\n    { id: '20', country: 'Cro√°cia', country_code: 'HR', rate: 25, enabled: true },\n    { id: '21', country: 'Eslov√°quia', country_code: 'SK', rate: 20, enabled: true },\n    { id: '22', country: 'Eslov√©nia', country_code: 'SI', rate: 22, enabled: true },\n    { id: '23', country: 'Est√≥nia', country_code: 'EE', rate: 20, enabled: true },\n    { id: '24', country: 'Let√≥nia', country_code: 'LV', rate: 21, enabled: true },\n    { id: '25', country: 'Litu√¢nia', country_code: 'LT', rate: 21, enabled: true },\n    { id: '26', country: 'Malta', country_code: 'MT', rate: 18, enabled: true },\n    { id: '27', country: 'Chipre', country_code: 'CY', rate: 19, enabled: true },\n  ]);\n\n  // Zonas de Envio - PERSISTENTES\n  const [shippingZones, setShippingZones] = useState<ShippingZone[]>([\n    {\n      id: '1',\n      name: 'Luxemburgo',\n      countries: ['LU'],\n      cost: 3.99,\n      free_shipping_threshold: 50,\n      enabled: true,\n    },\n    {\n      id: '2',\n      name: 'Uni√£o Europeia',\n      countries: ['PT', 'ES', 'FR', 'DE', 'IT', 'NL', 'BE', 'AT', 'GR', 'IE', 'DK', 'SE', 'FI', 'PL', 'CZ', 'HU', 'RO', 'BG', 'HR', 'SK', 'SI', 'EE', 'LV', 'LT', 'MT', 'CY'],\n      cost: 7.99,\n      free_shipping_threshold: 100,\n      enabled: true,\n    },\n  ]);\n\n  // Country shipping rates - individual configuration per country\n  const [countryShippingRates, setCountryShippingRates] = useState<{\n    code: string;\n    name: string;\n    cost: number;\n    free_threshold: number;\n    enabled: boolean;\n  }[]>([\n    { code: 'PT', name: 'Portugal', cost: 7.99, free_threshold: 50, enabled: true },\n    { code: 'ES', name: 'Espanha', cost: 9.99, free_threshold: 75, enabled: true },\n    { code: 'FR', name: 'Fran√ßa', cost: 12.99, free_threshold: 100, enabled: true },\n    { code: 'DE', name: 'Alemanha', cost: 12.99, free_threshold: 100, enabled: true },\n    { code: 'IT', name: 'It√°lia', cost: 14.99, free_threshold: 100, enabled: true },\n    { code: 'NL', name: 'Pa√≠ses Baixos', cost: 10.99, free_threshold: 75, enabled: true },\n    { code: 'BE', name: 'B√©lgica', cost: 10.99, free_threshold: 75, enabled: true },\n    { code: 'LU', name: 'Luxemburgo', cost: 5.99, free_threshold: 30, enabled: true },\n    { code: 'AT', name: '√Åustria', cost: 13.99, free_threshold: 100, enabled: true },\n    { code: 'GR', name: 'Gr√©cia', cost: 16.99, free_threshold: 120, enabled: true },\n    { code: 'IE', name: 'Irlanda', cost: 14.99, free_threshold: 100, enabled: true },\n    { code: 'DK', name: 'Dinamarca', cost: 12.99, free_threshold: 100, enabled: true },\n    { code: 'SE', name: 'Su√©cia', cost: 14.99, free_threshold: 100, enabled: true },\n    { code: 'FI', name: 'Finl√¢ndia', cost: 16.99, free_threshold: 120, enabled: true },\n    { code: 'PL', name: 'Pol√≥nia', cost: 11.99, free_threshold: 80, enabled: true },\n    { code: 'CZ', name: 'Rep√∫blica Checa', cost: 11.99, free_threshold: 80, enabled: true },\n    { code: 'HU', name: 'Hungria', cost: 12.99, free_threshold: 90, enabled: true },\n    { code: 'RO', name: 'Rom√©nia', cost: 13.99, free_threshold: 100, enabled: true },\n    { code: 'BG', name: 'Bulg√°ria', cost: 14.99, free_threshold: 100, enabled: true },\n    { code: 'HR', name: 'Cro√°cia', cost: 13.99, free_threshold: 100, enabled: true },\n    { code: 'SK', name: 'Eslov√°quia', cost: 12.99, free_threshold: 90, enabled: true },\n    { code: 'SI', name: 'Eslov√©nia', cost: 12.99, free_threshold: 90, enabled: true },\n    { code: 'EE', name: 'Est√≥nia', cost: 15.99, free_threshold: 110, enabled: true },\n    { code: 'LV', name: 'Let√≥nia', cost: 15.99, free_threshold: 110, enabled: true },\n    { code: 'LT', name: 'Litu√¢nia', cost: 15.99, free_threshold: 110, enabled: true },\n    { code: 'MT', name: 'Malta', cost: 18.99, free_threshold: 130, enabled: true },\n    { code: 'CY', name: 'Chipre', cost: 19.99, free_threshold: 150, enabled: true },\n  ]);\n\n  // Save country shipping rates to Supabase\n  const saveCountryShippingRates = async () => {\n    if (!supabase) return;\n\n    setSaving(true);\n    try {\n      const { error } = await supabase\n        .from('site_settings')\n        .upsert({\n          key: 'country_shipping_rates',\n          value: countryShippingRates,\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key',\n          ignoreDuplicates: false,\n        });\n\n      if (error) throw error;\n\n      setSuccess(true);\n      setTimeout(() => setSuccess(false), 3000);\n    } catch (error) {\n      console.error('Error saving country shipping rates:', error);\n      alert('Erro ao guardar configura√ß√µes de envio por pa√≠s');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Load country shipping rates from Supabase\n  useEffect(() => {\n    const loadCountryShippingRates = async () => {\n      if (!supabase) return;\n\n      try {\n        const { data, error } = await supabase\n          .from('site_settings')\n          .select('value')\n          .eq('key', 'country_shipping_rates')\n          .single();\n\n        if (!error && data) {\n          setCountryShippingRates(data.value);\n        }\n      } catch (error) {\n        console.error('Error loading country shipping rates:', error);\n      }\n    };\n\n    loadCountryShippingRates();\n  }, [supabase]);\n\n  // CARREGAR CONFIGURA√á√ïES AO INICIAR - FONTE √öNICA DA VERDADE\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      setLoading(true);\n      console.log('üîÑ A carregar configura√ß√µes do Supabase...');\n      \n      const { data, error } = await supabase\n        .from('site_settings')\n        .select('*')\n        .eq('key', 'tax_shipping_settings')\n        .maybeSingle();\n\n      if (error) {\n        console.error('‚ùå Erro ao carregar:', error);\n        throw error;\n      }\n\n      if (data && data.key === 'tax_shipping_settings' && data.value) {\n        const settings = data.value;\n        \n        if (settings.taxEnabled !== undefined) {\n          setTaxEnabled(settings.taxEnabled);\n          setGeneralSettings(prev => ({ ...prev, vat_enabled: settings.taxEnabled }));\n        }\n        if (settings.taxCalculation) {\n          setTaxCalculation(settings.taxCalculation);\n          setGeneralSettings(prev => ({ ...prev, vat_included: settings.taxCalculation === 'included' }));\n        }\n        if (settings.ossEnabled !== undefined) {\n          setOssEnabled(settings.ossEnabled);\n          setGeneralSettings(prev => ({ ...prev, oss_enabled: settings.ossEnabled }));\n        }\n        if (settings.legalText) {\n          setLegalText(settings.legalText);\n          setGeneralSettings(prev => ({ ...prev, legal_text: settings.legalText }));\n        }\n        if (settings.taxRates) {\n          setTaxRates(settings.taxRates);\n        }\n        if (settings.shippingZones) {\n          setShippingZones(settings.shippingZones);\n        }\n        \n        console.log('‚úÖ Configura√ß√µes carregadas do Supabase:', settings);\n      } else {\n        // PRIMEIRA VEZ - USAR VALORES PADR√ÉO\n        console.log('‚ö†Ô∏è Nenhuma configura√ß√£o encontrada. A usar configura√ß√µes padr√£o...');\n      }\n    } catch (error) {\n      console.error('‚ùå Erro ao carregar configura√ß√µes:', error);\n      alert('‚ùå Erro ao carregar configura√ß√µes. Por favor, recarregue a p√°gina.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const saveSettings = async () => {\n    try {\n      setSaving(true);\n      console.log('üíæ A guardar configura√ß√µes no Supabase...');\n      \n      const settings = {\n        taxEnabled: generalSettings.vat_enabled,\n        taxCalculation: generalSettings.vat_included ? 'included' : 'checkout',\n        ossEnabled: generalSettings.oss_enabled,\n        legalText: generalSettings.legal_text,\n        taxRates,\n        shippingZones,\n      };\n\n      console.log('üì¶ Configura√ß√µes a guardar:', settings);\n\n      // ‚úÖ CORRE√á√ÉO: Usar upsert com onConflict para resolver duplicados\n      const { error } = await supabase\n        .from('site_settings')\n        .upsert({\n          key: 'tax_shipping_settings',\n          value: settings,\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'key', // ‚úÖ Especificar a coluna de conflito\n          ignoreDuplicates: false, // ‚úÖ Atualizar se j√° existir\n        });\n\n      if (error) {\n        console.error('‚ùå Erro ao guardar:', error);\n        throw error;\n      }\n\n      console.log('‚úÖ Configura√ß√µes guardadas com sucesso!');\n      alert('‚úÖ Configura√ß√µes salvas e sincronizadas com o site!\\n\\nüîÑ As mudan√ßas est√£o agora ativas no checkout.');\n      \n      // RECARREGAR PARA CONFIRMAR PERSIST√äNCIA\n      await loadSettings();\n    } catch (error) {\n      console.error('‚ùå Erro ao salvar:', error);\n      alert('‚ùå Erro ao salvar as configura√ß√µes. Por favor, tente novamente.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const addCountry = () => {\n    if (!newCountry.country || !newCountry.country_code || newCountry.rate <= 0) {\n      alert('‚ùå Por favor, preencha todos os campos corretamente');\n      return;\n    }\n\n    const newId = (Math.max(...taxRates.map(t => parseInt(t.id))) + 1).toString();\n    setTaxRates([...taxRates, { ...newCountry, id: newId, enabled: true }]);\n    setNewCountry({ country: '', country_code: '', rate: 0 });\n    setShowAddCountryModal(false);\n    alert('‚úÖ Pa√≠s adicionado! Clique em \"Guardar\" para aplicar no site.');\n  };\n\n  return (\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Tabs */}\n        <div className={`flex gap-2 mb-8 p-2 rounded-2xl ${darkMode ? 'bg-gray-800' : 'bg-white'}`}>\n          <button\n            onClick={() => setActiveTab('general')}\n            className={`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${\n              activeTab === 'general'\n                ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg'\n                : darkMode\n                ? 'text-gray-400 hover:text-white'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            ‚öôÔ∏è Geral\n          </button>\n          <button\n            onClick={() => setActiveTab('countries')}\n            className={`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${\n              activeTab === 'countries'\n                ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg'\n                : darkMode\n                ? 'text-gray-400 hover:text-white'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            üåç IVA por Pa√≠s\n          </button>\n          <button\n            onClick={() => setActiveTab('shipping')}\n            className={`flex-1 px-6 py-3 rounded-xl font-bold transition-all ${\n              activeTab === 'shipping'\n                ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg'\n                : darkMode\n                ? 'text-gray-400 hover:text-white'\n                : 'text-gray-600 hover:text-gray-900'\n            }`}\n          >\n            üì¶ Envio por Pa√≠s\n          </button>\n        </div>\n\n        {/* Conte√∫do das Tabs */}\n        <div className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-100'} rounded-2xl p-8 shadow-sm border`}>\n          {/* Tab: Geral */}\n          {activeTab === 'general' && (\n            <div className=\"space-y-6\">\n              <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                Configura√ß√µes Gerais do IVA\n              </h2>\n\n              {/* Ativar/Desativar IVA */}\n              <div className=\"flex items-center justify-between p-6 rounded-xl bg-gradient-to-r from-pink-50 to-rose-50 dark:from-gray-700 dark:to-gray-700\">\n                <div>\n                  <h3 className={`font-bold text-lg mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    IVA Ativo\n                  </h3>\n                  <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Ativar ou desativar o c√°lculo de IVA em todo o site\n                  </p>\n                </div>\n                <button\n                  onClick={() => setGeneralSettings({ ...generalSettings, vat_enabled: !generalSettings.vat_enabled })}\n                  className={`relative w-16 h-8 rounded-full transition-all cursor-pointer ${\n                    generalSettings.vat_enabled ? 'bg-gradient-to-r from-pink-500 to-rose-500' : 'bg-gray-300'\n                  }`}\n                >\n                  <span\n                    className={`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${\n                      generalSettings.vat_enabled ? 'translate-x-8' : ''\n                    }`}\n                  ></span>\n                </button>\n              </div>\n\n              {/* IVA Inclu√≠do ou Separado */}\n              <div>\n                <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  C√°lculo do IVA\n                </label>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <button\n                    onClick={() => setGeneralSettings({ ...generalSettings, vat_included: true })}\n                    className={`p-6 rounded-xl border-2 transition-all cursor-pointer ${\n                      generalSettings.vat_included\n                        ? 'border-pink-500 bg-pink-50 dark:bg-pink-900/20'\n                        : darkMode\n                        ? 'border-gray-600 bg-gray-700'\n                        : 'border-gray-200 bg-white'\n                    }`}\n                  >\n                    <i className=\"ri-check-double-line text-3xl text-pink-500 mb-3\"></i>\n                    <h4 className={`font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      Inclu√≠do nos Pre√ßos\n                    </h4>\n                    <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      O pre√ßo mostrado j√° inclui o IVA\n                    </p>\n                  </button>\n                  <button\n                    onClick={() => setGeneralSettings({ ...generalSettings, vat_included: false })}\n                    className={`p-6 rounded-xl border-2 transition-all cursor-pointer ${\n                      !generalSettings.vat_included\n                        ? 'border-pink-500 bg-pink-50 dark:bg-pink-900/20'\n                        : darkMode\n                        ? 'border-gray-600 bg-gray-700'\n                        : 'border-gray-200 bg-white'\n                    }`}\n                  >\n                    <i className=\"ri-add-circle-line text-3xl text-blue-500 mb-3\"></i>\n                    <h4 className={`font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      Calculado no Checkout\n                    </h4>\n                    <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                      O IVA √© adicionado no checkout\n                    </p>\n                  </button>\n                </div>\n              </div>\n\n              {/* OSS */}\n              <div className=\"flex items-center justify-between p-6 rounded-xl bg-blue-50 dark:bg-blue-900/20\">\n                <div>\n                  <h3 className={`font-bold text-lg mb-1 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    Modo OSS (One Stop Shop)\n                  </h3>\n                  <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Para vendas na Uni√£o Europeia - IVA aplicado conforme pa√≠s do cliente\n                  </p>\n                </div>\n                <button\n                  onClick={() => setGeneralSettings({ ...generalSettings, oss_enabled: !generalSettings.oss_enabled })}\n                  className={`relative w-16 h-8 rounded-full transition-all cursor-pointer ${\n                    generalSettings.oss_enabled ? 'bg-gradient-to-r from-blue-500 to-indigo-600' : 'bg-gray-300'\n                  }`}\n                >\n                  <span\n                    className={`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${\n                      generalSettings.oss_enabled ? 'translate-x-8' : ''\n                    }`}\n                  ></span>\n                </button>\n              </div>\n\n              {/* Explica√ß√£o OSS */}\n              {generalSettings.oss_enabled && (\n                <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-700\">\n                  <h4 className={`font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    ‚ÑπÔ∏è Como funciona o OSS:\n                  </h4>\n                  <ul className={`text-sm space-y-1 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                    <li>‚úì O IVA √© aplicado conforme o <strong>pa√≠s do cliente</strong> (entrega)</li>\n                    <li>‚úì Cada pa√≠s tem sua pr√≥pria taxa de IVA</li>\n                    <li>‚úì Cliente na It√°lia ‚Üí IVA da It√°lia (22%)</li>\n                    <li>‚úì Cliente em Fran√ßa ‚Üí IVA de Fran√ßa (20%)</li>\n                    <li>‚úì O sistema calcula automaticamente no checkout</li>\n                  </ul>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Tab: IVA por Pa√≠s */}\n          {activeTab === 'countries' && (\n            <div>\n              <div className=\"flex items-center justify-between mb-6\">\n                <div>\n                  <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                    Taxas de IVA por Pa√≠s\n                  </h2>\n                  <p className={`text-sm mt-1 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                    Configure as taxas de IVA para cada pa√≠s. As altera√ß√µes aplicam-se imediatamente no checkout.\n                  </p>\n                </div>\n                <button\n                  onClick={() => setShowAddCountryModal(true)}\n                  className=\"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-semibold hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>\n                  Adicionar Pa√≠s\n                </button>\n              </div>\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className={darkMode ? 'bg-gray-700' : 'bg-gray-50'}>\n                      <th className={`px-6 py-4 text-left text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-700'}`}>\n                        Pa√≠s\n                      </th>\n                      <th className={`px-6 py-4 text-left text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-700'}`}>\n                        C√≥digo\n                      </th>\n                      <th className={`px-6 py-4 text-left text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-700'}`}>\n                        Taxa IVA (%)\n                      </th>\n                      <th className={`px-6 py-4 text-left text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-700'}`}>\n                        Estado\n                      </th>\n                      <th className={`px-6 py-4 text-left text-sm font-bold ${darkMode ? 'text-white' : 'text-gray-700'}`}>\n                        A√ß√µes\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {taxRates.map((rate) => (\n                      <tr key={rate.id} className={`border-b ${darkMode ? 'border-gray-700' : 'border-gray-100'}`}>\n                        <td className={`px-6 py-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                          {rate.country}\n                        </td>\n                        <td className={`px-6 py-4 ${darkMode ? 'text-white' : 'text-gray-600'}`}>\n                          {rate.country_code}\n                        </td>\n                        <td className={`px-6 py-4`}>\n                          <input\n                            type=\"number\"\n                            value={rate.rate}\n                            onChange={(e) => {\n                              const updated = taxRates.map(t => \n                                t.id === rate.id ? { ...t, rate: parseFloat(e.target.value) || 0 } : t\n                              );\n                              setTaxRates(updated);\n                            }}\n                            className={`w-24 px-3 py-2 rounded-lg border ${\n                              darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'\n                            }`}\n                            step=\"0.1\"\n                            min=\"0\"\n                            max=\"100\"\n                          />\n                        </td>\n                        <td className={`px-6 py-4`}>\n                          <button\n                            onClick={() => {\n                              const updated = taxRates.map(t => \n                                t.id === rate.id ? { ...t, enabled: !t.enabled } : t\n                              );\n                              setTaxRates(updated);\n                            }}\n                            className={`px-4 py-2 rounded-lg font-medium cursor-pointer whitespace-nowrap ${\n                              rate.enabled\n                                ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                                : 'bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400'\n                            }`}\n                          >\n                            {rate.enabled ? '‚úì Ativo' : '‚úó Inativo'}\n                          </button>\n                        </td>\n                        <td className={`px-6 py-4`}>\n                          <button \n                            onClick={() => {\n                              if (confirm(`Tem certeza que deseja eliminar ${rate.country}?`)) {\n                                setTaxRates(taxRates.filter(t => t.id !== rate.id));\n                                alert('‚úÖ Pa√≠s eliminado! Clique em \"Guardar\" para aplicar.');\n                              }\n                            }}\n                            className=\"text-red-500 hover:text-red-600 cursor-pointer\"\n                          >\n                            <i className=\"ri-delete-bin-line text-xl\"></i>\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n\n          {/* Shipping by Country Tab */}\n          {activeTab === 'shipping' && (\n            <div>\n              <h2 className={`text-2xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                üì¶ Configura√ß√£o de Envio por Pa√≠s\n              </h2>\n              <p className={`text-sm mb-6 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                Configure os custos de envio individualmente para cada pa√≠s da Uni√£o Europeia. \n                As altera√ß√µes aplicam-se imediatamente no checkout.\n              </p>\n\n              {/* Search and filters */}\n              <div className=\"mb-6\">\n                <input\n                  type=\"text\"\n                  placeholder=\"üîç Pesquisar pa√≠s...\"\n                  className={`w-full px-4 py-3 rounded-xl border ${\n                    darkMode\n                      ? 'bg-gray-800 border-gray-700 text-white placeholder-gray-400'\n                      : 'bg-white border-gray-200 text-gray-900 placeholder-gray-500'\n                  }`}\n                  onChange={(e) => {\n                    const search = e.target.value.toLowerCase();\n                    if (!search) {\n                      // Reset to all countries\n                      return;\n                    }\n                    // Filter functionality can be added here\n                  }}\n                />\n              </div>\n\n              {/* Countries Grid */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {countryShippingRates.map((country) => (\n                  <div\n                    key={country.code}\n                    className={`p-5 rounded-2xl border-2 transition-all ${\n                      country.enabled\n                        ? 'border-pink-500 bg-pink-50 dark:bg-pink-900/20'\n                        : darkMode\n                        ? 'border-gray-700 bg-gray-800'\n                        : 'border-gray-200 bg-white'\n                    }`}\n                  >\n                    {/* Country Header */}\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div>\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <span className=\"text-2xl\">{country.code === 'PT' ? 'üáµüáπ' : country.code === 'ES' ? 'üá™üá∏' : country.code === 'FR' ? 'üá´üá∑' : country.code === 'DE' ? 'üá©üá™' : country.code === 'IT' ? 'üáÆüáπ' : country.code === 'NL' ? 'üá≥üá±' : country.code === 'BE' ? 'üáßüá™' : country.code === 'LU' ? 'üá±üá∫' : country.code === 'AT' ? 'üá¶üáπ' : country.code === 'GR' ? 'üá¨üá∑' : country.code === 'IE' ? 'üáÆüá™' : country.code === 'DK' ? 'üá©üá∞' : country.code === 'SE' ? 'üá∏üá™' : country.code === 'FI' ? 'üá´üáÆ' : country.code === 'PL' ? 'üáµüá±' : country.code === 'CZ' ? 'üá®üáø' : country.code === 'HU' ? 'üá≠üá∫' : country.code === 'RO' ? 'üá∑üá¥' : country.code === 'BG' ? 'üáßüá¨' : country.code === 'HR' ? 'üá≠üá∑' : country.code === 'SK' ? 'üá∏üá∞' : country.code === 'SI' ? 'üá∏üáÆ' : country.code === 'EE' ? 'üá™üá™' : country.code === 'LV' ? 'üá±üáª' : country.code === 'LT' ? 'üá±üáπ' : country.code === 'MT' ? 'üá≤üáπ' : country.code === 'CY' ? 'üá®üáæ' : 'üåç'}</span>\n                          <h3 className={`text-lg font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                            {country.name}\n                          </h3>\n                        </div>\n                        <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-500'}`}>\n                          {country.code}\n                        </p>\n                      </div>\n                      \n                      {/* Enable/Disable Toggle */}\n                      <button\n                        onClick={() => {\n                          const updated = countryShippingRates.map(c =>\n                            c.code === country.code ? { ...c, enabled: !c.enabled } : c\n                          );\n                          setCountryShippingRates(updated);\n                        }}\n                        className={`relative w-12 h-6 rounded-full transition-all cursor-pointer ${\n                          country.enabled ? 'bg-gradient-to-r from-pink-500 to-rose-500' : 'bg-gray-300'\n                        }`}\n                      >\n                        <span\n                          className={`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${\n                            country.enabled ? 'translate-x-6' : ''\n                          }`}\n                        />\n                      </button>\n                    </div>\n\n                    {/* Shipping Cost */}\n                    <div className=\"space-y-3\">\n                      <div>\n                        <label className={`text-xs font-medium mb-1 block ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                          üí∞ Custo de Envio (‚Ç¨)\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={country.cost}\n                          onChange={(e) => {\n                            const updated = countryShippingRates.map(c =>\n                              c.code === country.code ? { ...c, cost: parseFloat(e.target.value) || 0 } : c\n                            );\n                            setCountryShippingRates(updated);\n                          }}\n                          className={`w-full px-3 py-2 rounded-lg border text-right font-bold text-lg ${\n                            darkMode\n                              ? 'bg-gray-700 border-gray-600 text-white'\n                              : 'bg-white border-gray-300 text-gray-900'\n                          }`}\n                          step=\"0.01\"\n                          min=\"0\"\n                          disabled={!country.enabled}\n                        />\n                      </div>\n\n                      {/* Free Shipping Threshold */}\n                      <div>\n                        <label className={`text-xs font-medium mb-1 block ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>\n                          üéÅ Envio Gr√°tis Acima de (‚Ç¨)\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={country.free_threshold}\n                          onChange={(e) => {\n                            const updated = countryShippingRates.map(c =>\n                              c.code === country.code ? { ...c, free_threshold: parseFloat(e.target.value) || 0 } : c\n                            );\n                            setCountryShippingRates(updated);\n                          }}\n                          className={`w-full px-3 py-2 rounded-lg border text-right font-bold text-lg text-green-600 ${\n                            darkMode\n                              ? 'bg-gray-700 border-gray-600'\n                              : 'bg-white border-gray-300'\n                          }`}\n                          step=\"0.01\"\n                          min=\"0\"\n                          disabled={!country.enabled}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Status Badge */}\n                    <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\n                      <span\n                        className={`inline-block px-2 py-1 rounded-lg text-xs font-bold ${\n                          country.enabled\n                            ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'\n                            : 'bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400'\n                        }`}\n                      >\n                        {country.enabled ? '‚úì Ativo' : '‚úó Desativado'}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Save Button */}\n              <div className=\"mt-8 flex justify-end\">\n                <button\n                  onClick={saveCountryShippingRates}\n                  disabled={saving}\n                  className={`px-8 py-4 rounded-xl font-bold text-white shadow-lg transition-all ${\n                    saving\n                      ? 'bg-gray-400 cursor-not-allowed'\n                      : 'bg-gradient-to-r from-pink-500 to-rose-500 hover:shadow-xl hover:scale-105'\n                  }`}\n                >\n                  {saving ? 'üíæ A Guardar...' : success ? '‚úÖ Guardado!' : 'üíæ Guardar Configura√ß√µes de Envio'}\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Tab: Stripe */}\n        {activeTab === 'stripe' && (\n          <div>\n            <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              Integra√ß√£o com Stripe\n            </h2>\n            <div className=\"space-y-6\">\n              <div className=\"p-6 rounded-xl bg-green-50 dark:bg-green-900/20 border-2 border-green-500\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <div className=\"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center\">\n                    <i className=\"ri-check-line text-2xl text-white\"></i>\n                  </div>\n                  <div>\n                    <h3 className={`font-bold text-lg ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      Stripe Conectado\n                    </h3>\n                    <p className={`text-sm ${darkMode ? 'text-white' : 'text-gray-600'}`}>\n                      A integra√ß√£o est√° ativa e funcional\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-bold text-lg mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  Configura√ß√µes de IVA no Stripe\n                </h3>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className={darkMode ? 'text-white' : 'text-gray-600'}>\n                      C√°lculo Autom√°tico de IVA\n                    </span>\n                    <span className=\"px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium\">\n                      Ativo\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className={darkMode ? 'text-white' : 'text-gray-600'}>\n                      Tipo de Produto\n                    </span>\n                    <span className={`font-medium ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                      Bens F√≠sicos\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <span className={darkMode ? 'text-white' : 'text-gray-600'}>\n                      Sincroniza√ß√£o de Pre√ßos\n                    </span>\n                    <span className=\"px-4 py-2 bg-green-100 text-green-700 rounded-lg font-medium\">\n                      Sincronizado\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              <a\n                href=\"https://dashboard.stripe.com\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"block w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap text-center\"\n              >\n                <i className=\"ri-external-link-line mr-2\"></i>\n                Abrir Dashboard do Stripe\n              </a>\n            </div>\n          </div>\n        )}\n\n        {/* Tab: Textos Legais */}\n        {activeTab === 'legal' && (\n          <div>\n            <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              Textos Legais\n            </h2>\n            <div className=\"space-y-6\">\n              <div>\n                <label className={`block text-sm font-medium mb-3 ${darkMode ? 'text-white' : 'text-gray-700'}`}>\n                  Texto Legal sobre IVA (Rodap√© e Checkout)\n                </label>\n                <textarea\n                  value={generalSettings.legal_text}\n                  onChange={(e) => setGeneralSettings({ ...generalSettings, legal_text: e.target.value })}\n                  rows={4}\n                  className={`w-full px-4 py-3 rounded-xl border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'\n                  } focus:ring-2 focus:ring-pink-500`}\n                  placeholder=\"Ex: Os pre√ßos incluem IVA conforme a legisla√ß√£o da Uni√£o Europeia.\"\n                />\n              </div>\n\n              <div className={`p-6 rounded-xl ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}>\n                <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n                  Pr√©-visualiza√ß√£o\n                </h3>\n                <p className={`text-sm ${darkMode ? 'text-white' : 'text-gray-600'}`}>\n                  {generalSettings.legal_text}\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Bot√£o de Salvar - SEMPRE VIS√çVEL */}\n      <div className=\"mt-8 flex justify-end\">\n        <button\n          onClick={saveSettings}\n          disabled={loading}\n          className=\"px-8 py-4 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all cursor-pointer whitespace-nowrap disabled:opacity-50\"\n        >\n          {loading ? (\n            <>\n              <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n              A Guardar...\n            </>\n          ) : (\n            <>\n              <i className=\"ri-save-line mr-2\"></i>\n              üíæ Guardar e Sincronizar com o Site\n            </>\n          )}\n        </button>\n      </div>\n\n      {/* Modal Adicionar Pa√≠s */}\n      {showAddCountryModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\n          <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl shadow-2xl max-w-md w-full p-6`}>\n            <h2 className={`text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}`}>\n              Adicionar Novo Pa√≠s\n            </h2>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Nome do Pa√≠s\n                </label>\n                <input\n                  type=\"text\"\n                  value={newCountry.country}\n                  onChange={(e) => setNewCountry({ ...newCountry, country: e.target.value })}\n                  placeholder=\"Ex: Su√≠√ßa\"\n                  className={`w-full px-4 py-3 rounded-xl border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'\n                  } focus:ring-2 focus:ring-pink-500`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  C√≥digo do Pa√≠s (ISO)\n                </label>\n                <input\n                  type=\"text\"\n                  value={newCountry.country_code}\n                  onChange={(e) => setNewCountry({ ...newCountry, country_code: e.target.value.toUpperCase() })}\n                  placeholder=\"Ex: CH\"\n                  maxLength={2}\n                  className={`w-full px-4 py-3 rounded-xl border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'\n                  } focus:ring-2 focus:ring-pink-500`}\n                />\n              </div>\n\n              <div>\n                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\n                  Taxa de IVA (%)\n                </label>\n                <input\n                  type=\"number\"\n                  value={newCountry.rate}\n                  onChange={(e) => setNewCountry({ ...newCountry, rate: parseFloat(e.target.value) || 0 })}\n                  placeholder=\"Ex: 7.7\"\n                  step=\"0.1\"\n                  className={`w-full px-4 py-3 rounded-xl border ${\n                    darkMode ? 'bg-gray-700 border-gray-600 text-white' : 'bg-white border-gray-300 text-gray-900'\n                  } focus:ring-2 focus:ring-pink-500`}\n                />\n              </div>\n            </div>\n\n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={() => {\n                  setShowAddCountryModal(false);\n                  setNewCountry({ country: '', country_code: '', rate: 0 });\n                }}\n                className={`flex-1 px-6 py-3 rounded-xl font-medium transition-all cursor-pointer whitespace-nowrap ${\n                  darkMode ? 'bg-gray-700 text-white hover:bg-gray-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                Cancelar\n              </button>\n              <button\n                onClick={addCountry}\n                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl font-medium hover:shadow-lg transition-all cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-add-line mr-2\"></i>\n                Adicionar\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TaxShippingManagement;","import { useState, useEffect } from 'react';\nimport { supabase } from '../../../lib/supabase';\n\ninterface WooCommerceManagementProps {\n  darkMode: boolean;\n}\n\nexport default function WooCommerceManagement({ darkMode }: WooCommerceManagementProps) {\n  const [loading, setLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('config');\n  \n  // Configura√ß√µes\n  const [wooUrl, setWooUrl] = useState('');\n  const [consumerKey, setConsumerKey] = useState('');\n  const [consumerSecret, setConsumerSecret] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  \n  // Produtos importados\n  const [importedProducts, setImportedProducts] = useState<any[]>([]);\n  const [syncHistory, setSyncHistory] = useState<any[]>([]);\n\n  useEffect(() => {\n    loadSettings();\n    loadImportedProducts();\n    loadSyncHistory();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const { data } = await supabase\n        .from('site_settings')\n        .select('*')\n        .eq('key', 'woocommerce_settings')\n        .single();\n\n      if (data?.value) {\n        setWooUrl(data.value.url || '');\n        setConsumerKey(data.value.consumerKey || '');\n        setConsumerSecret(data.value.consumerSecret || '');\n        setIsConnected(data.value.isConnected || false);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar configura√ß√µes:', error);\n    }\n  };\n\n  const loadImportedProducts = async () => {\n    try {\n      const { data } = await supabase\n        .from('products')\n        .select('*')\n        .eq('source', 'woocommerce')\n        .order('created_at', { ascending: false });\n\n      if (data) setImportedProducts(data);\n    } catch (error) {\n      console.error('Erro ao carregar produtos:', error);\n    }\n  };\n\n  const loadSyncHistory = async () => {\n    try {\n      const { data } = await supabase\n        .from('admin_logs')\n        .select('*')\n        .eq('action_type', 'woocommerce_sync')\n        .order('created_at', { ascending: false })\n        .limit(20);\n\n      if (data) setSyncHistory(data);\n    } catch (error) {\n      console.error('Erro ao carregar hist√≥rico:', error);\n    }\n  };\n\n  const saveSettings = async () => {\n    setLoading(true);\n    try {\n      const settings = {\n        url: wooUrl,\n        consumerKey,\n        consumerSecret,\n        isConnected,\n        updatedAt: new Date().toISOString(),\n      };\n\n      const { error } = await supabase\n        .from('site_settings')\n        .upsert({\n          key: 'woocommerce_settings',\n          value: settings,\n          updated_at: new Date().toISOString(),\n        });\n\n      if (error) throw error;\n\n      alert('‚úÖ Configura√ß√µes do WooCommerce salvas com sucesso!');\n    } catch (error) {\n      console.error('Erro ao salvar:', error);\n      alert('‚ùå Erro ao salvar configura√ß√µes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const testConnection = async () => {\n    if (!wooUrl || !consumerKey || !consumerSecret) {\n      alert('‚ùå Por favor, preencha todos os campos');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // Aqui voc√™ implementaria a chamada real √† API do WooCommerce\n      // Por enquanto, vamos simular\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      setIsConnected(true);\n      alert('‚úÖ Conex√£o com WooCommerce estabelecida com sucesso!');\n      \n      // Salvar automaticamente\n      await saveSettings();\n    } catch (error) {\n      console.error('Erro ao testar conex√£o:', error);\n      alert('‚ùå Erro ao conectar com WooCommerce');\n      setIsConnected(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const syncProducts = async () => {\n    if (!isConnected) {\n      alert('‚ùå Por favor, conecte-se ao WooCommerce primeiro');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // Aqui voc√™ implementaria a sincroniza√ß√£o real\n      // Por enquanto, vamos simular\n      await new Promise(resolve => setTimeout(resolve, 3000));\n      \n      // Registrar no hist√≥rico\n      await supabase.from('admin_logs').insert({\n        action_type: 'woocommerce_sync',\n        description: 'Sincroniza√ß√£o de produtos do WooCommerce',\n        details: {\n          productsImported: 0,\n          productsUpdated: 0,\n          timestamp: new Date().toISOString(),\n        },\n      });\n\n      alert('‚úÖ Produtos sincronizados com sucesso!');\n      loadImportedProducts();\n      loadSyncHistory();\n    } catch (error) {\n      console.error('Erro ao sincronizar:', error);\n      alert('‚ùå Erro ao sincronizar produtos');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className={`text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n            Integra√ß√£o WooCommerce\n          </h2>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mt-1`}>\n            Gerencie produtos importados do WooCommerce\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          {isConnected && (\n            <div className=\"flex items-center gap-2 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg\">\n              <i className=\"ri-checkbox-circle-fill\"></i>\n              <span className=\"font-semibold\">Conectado</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex gap-2 overflow-x-auto\">\n        {['config', 'products', 'history'].map((tab) => (\n          <button\n            key={tab}\n            onClick={() => setActiveTab(tab)}\n            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap cursor-pointer transition-colors ${\n              activeTab === tab\n                ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white'\n                : darkMode\n                ? 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            {tab === 'config' && '‚öôÔ∏è Configura√ß√£o'}\n            {tab === 'products' && 'üì¶ Produtos Importados'}\n            {tab === 'history' && 'üìä Hist√≥rico de Sincroniza√ß√£o'}\n          </button>\n        ))}\n      </div>\n\n      {/* Configura√ß√£o */}\n      {activeTab === 'config' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg space-y-6`}>\n          <div>\n            <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-4`}>\n              Configura√ß√µes da API\n            </h3>\n            <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mb-6`}>\n              Configure as credenciais da API REST do WooCommerce para importar produtos automaticamente.\n            </p>\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              URL da Loja WooCommerce\n            </label>\n            <input\n              type=\"url\"\n              value={wooUrl}\n              onChange={(e) => setWooUrl(e.target.value)}\n              placeholder=\"https://sua-loja.com\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                  : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Consumer Key\n            </label>\n            <input\n              type=\"text\"\n              value={consumerKey}\n              onChange={(e) => setConsumerKey(e.target.value)}\n              placeholder=\"ck_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                  : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div>\n            <label className={`block text-sm font-semibold ${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-2`}>\n              Consumer Secret\n            </label>\n            <input\n              type=\"password\"\n              value={consumerSecret}\n              onChange={(e) => setConsumerSecret(e.target.value)}\n              placeholder=\"cs_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n              className={`w-full px-4 py-3 rounded-lg border ${\n                darkMode\n                  ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400'\n                  : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'\n              } focus:ring-2 focus:ring-pink-500 focus:border-transparent`}\n            />\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={testConnection}\n              disabled={loading}\n              className=\"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50\"\n            >\n              {loading ? 'A Testar...' : 'üîå Testar Conex√£o'}\n            </button>\n            <button\n              onClick={saveSettings}\n              disabled={loading}\n              className=\"flex-1 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50\"\n            >\n              {loading ? 'A Guardar...' : 'üíæ Guardar Configura√ß√µes'}\n            </button>\n          </div>\n\n          {isConnected && (\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <button\n                onClick={syncProducts}\n                disabled={loading}\n                className=\"w-full px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg cursor-pointer disabled:opacity-50 flex items-center justify-center gap-2\"\n              >\n                <i className=\"ri-refresh-line text-xl\"></i>\n                {loading ? 'A Sincronizar...' : 'Sincronizar Produtos Agora'}\n              </button>\n            </div>\n          )}\n\n          <div className={`mt-6 p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-blue-50'}`}>\n            <h4 className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'} mb-2`}>\n              üìö Como Obter as Credenciais da API\n            </h4>\n            <ol className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'} space-y-2 list-decimal list-inside`}>\n              <li>Aceda ao painel de administra√ß√£o do WooCommerce</li>\n              <li>V√° em WooCommerce ‚Üí Configura√ß√µes ‚Üí Avan√ßado ‚Üí REST API</li>\n              <li>Clique em \"Adicionar chave\"</li>\n              <li>Defina as permiss√µes como \"Leitura/Escrita\"</li>\n              <li>Copie a Consumer Key e Consumer Secret</li>\n              <li>Cole aqui e teste a conex√£o</li>\n            </ol>\n          </div>\n        </div>\n      )}\n\n      {/* Produtos Importados */}\n      {activeTab === 'products' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg`}>\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n              Produtos Importados ({importedProducts.length})\n            </h3>\n            {isConnected && (\n              <button\n                onClick={syncProducts}\n                disabled={loading}\n                className=\"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold cursor-pointer disabled:opacity-50 flex items-center gap-2\"\n              >\n                <i className=\"ri-refresh-line\"></i>\n                Sincronizar\n              </button>\n            )}\n          </div>\n\n          {importedProducts.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-shopping-bag-line text-6xl text-gray-400 mb-4\"></i>\n              <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Nenhum produto importado ainda\n              </p>\n              <p className={`text-sm ${darkMode ? 'text-gray-500' : 'text-gray-500'} mt-2`}>\n                Configure a conex√£o e sincronize para importar produtos\n              </p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {importedProducts.map((product) => (\n                <div\n                  key={product.id}\n                  className={`rounded-lg overflow-hidden ${\n                    darkMode ? 'bg-gray-700' : 'bg-gray-50'\n                  } hover:shadow-lg transition-shadow`}\n                >\n                  <img\n                    src={product.images?.[0] || product.image_url}\n                    alt={product.name}\n                    className=\"w-full h-48 object-cover\"\n                  />\n                  <div className=\"p-4\">\n                    <h4 className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'} mb-2`}>\n                      {product.name}\n                    </h4>\n                    <p className=\"text-pink-500 font-bold mb-2\">‚Ç¨{product.price.toFixed(2)}</p>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <span className={`px-2 py-1 rounded ${\n                        product.stock > 0\n                          ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400'\n                          : 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400'\n                      }`}>\n                        Stock: {product.stock}\n                      </span>\n                      <span className={`px-2 py-1 rounded ${\n                        darkMode ? 'bg-gray-600 text-gray-300' : 'bg-gray-200 text-gray-700'\n                      }`}>\n                        WooCommerce\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Hist√≥rico */}\n      {activeTab === 'history' && (\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-6 shadow-lg`}>\n          <h3 className={`text-xl font-bold ${darkMode ? 'text-white' : 'text-gray-900'} mb-6`}>\n            Hist√≥rico de Sincroniza√ß√£o\n          </h3>\n\n          {syncHistory.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-history-line text-6xl text-gray-400 mb-4\"></i>\n              <p className={`text-lg ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>\n                Nenhuma sincroniza√ß√£o realizada ainda\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {syncHistory.map((log) => (\n                <div\n                  key={log.id}\n                  className={`p-4 rounded-lg ${darkMode ? 'bg-gray-700' : 'bg-gray-50'}`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div>\n                      <p className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>\n                        {log.description}\n                      </p>\n                      <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'} mt-1`}>\n                        {new Date(log.created_at).toLocaleString('pt-PT')}\n                      </p>\n                    </div>\n                    <i className=\"ri-check-circle-fill text-green-500 text-xl\"></i>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase } from '../../lib/supabase';\nimport OverviewDashboard from './components/OverviewDashboard';\nimport ProductsManagement from './components/ProductsManagement';\nimport CategoriesManagement from './components/CategoriesManagement';\nimport OrdersManagement from './components/OrdersManagement';\nimport CustomersManagement from './components/CustomersManagement';\nimport HomePageManagement from './components/HomePageManagement';\nimport LooksManagement from './components/LooksManagement';\nimport MarketingManagement from './components/MarketingManagement';\nimport MarketingAdvanced from './components/MarketingAdvanced';\nimport NewsletterManagement from './components/NewsletterManagement';\nimport NotificationsManagement from './components/NotificationsManagement';\nimport SiteConfigManagement from './components/SiteConfigManagement';\nimport TaxShippingManagement from './components/TaxShippingManagement';\nimport PopupsManagement from './components/PopupsManagement';\nimport BannersManagement from './components/BannersManagement';\nimport DiscountCodesManagement from './components/DiscountCodesManagement';\nimport WooCommerceManagement from './components/WooCommerceManagement';\n\nexport default function AdminPage() {\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState('overview');\n  const [darkMode, setDarkMode] = useState(() => {\n    const saved = localStorage.getItem('darkMode');\n    return saved ? JSON.parse(saved) : false;\n  });\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n    }\n  }, [user, navigate]);\n\n  useEffect(() => {\n    localStorage.setItem('darkMode', JSON.stringify(darkMode));\n    if (darkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [darkMode]);\n\n  return (\n    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} transition-colors duration-300`}>\n      {/* Top Bar - Bot√µes Voltar ao Site e Dark Mode */}\n      <div className={`fixed top-0 right-0 left-0 h-16 ${darkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'} border-b z-40 flex items-center justify-end px-6 gap-3`}>\n        <button\n          onClick={() => navigate('/')}\n          className={`px-4 py-2 rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap flex items-center gap-2 ${\n            darkMode ? 'bg-gray-800 text-white hover:bg-gray-700' : 'bg-gray-100 text-gray-800 hover:bg-gray-200'\n          }`}\n        >\n          <i className=\"ri-home-line text-lg\"></i>\n          Voltar ao Site\n        </button>\n        <button\n          onClick={() => setDarkMode(!darkMode)}\n          className={`px-4 py-2 rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap flex items-center gap-2 ${\n            darkMode ? 'bg-yellow-500 text-gray-900 hover:bg-yellow-400' : 'bg-gray-800 text-white hover:bg-gray-700'\n          }`}\n        >\n          <i className={`${darkMode ? 'ri-sun-line' : 'ri-moon-line'} text-lg`}></i>\n          {darkMode ? 'Light Mode' : 'Dark Mode'}\n        </button>\n      </div>\n\n      <div className=\"flex pt-16\">\n        {/* Sidebar */}\n        <aside\n          className={`fixed left-0 top-16 h-[calc(100vh-4rem)] ${\n            sidebarOpen ? 'w-72' : 'w-20'\n          } ${\n            darkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'\n          } border-r transition-all duration-300 z-50 overflow-y-auto`}\n        >\n          {/* Logo */}\n          <div className=\"h-20 flex items-center justify-center border-b border-gray-200 dark:border-gray-700\">\n            {sidebarOpen ? (\n              <h1 className=\"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent\">\n                MARISOL\n              </h1>\n            ) : (\n              <i className=\"ri-store-2-line text-3xl text-pink-500\"></i>\n            )}\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"p-4 space-y-2\">\n            {[\n              { id: 'overview', icon: 'ri-dashboard-line', label: 'Vis√£o Geral' },\n              { id: 'homepage', icon: 'ri-home-line', label: 'P√°gina Inicial' },\n              { id: 'products', icon: 'ri-shirt-line', label: 'Produtos' },\n              { id: 'categories', icon: 'ri-folder-line', label: 'Categorias' },\n              { id: 'orders', icon: 'ri-shopping-bag-line', label: 'Encomendas' },\n              { id: 'customers', icon: 'ri-user-line', label: 'Clientes' },\n              { id: 'marketing-advanced', icon: 'ri-megaphone-line', label: 'Marketing' },\n              { id: 'tax-shipping', icon: 'ri-truck-line', label: 'IVA & Envio' },\n              { id: 'woocommerce', icon: 'ri-shopping-cart-line', label: 'WooCommerce' },\n              { id: 'newsletter', icon: 'ri-mail-line', label: 'Newsletter' },\n              { id: 'notifications', icon: 'ri-notification-line', label: 'Notifica√ß√µes' },\n            ].map((item) => (\n              <button\n                key={item.id}\n                onClick={() => setActiveTab(item.id)}\n                className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all cursor-pointer whitespace-nowrap ${\n                  activeTab === item.id\n                    ? 'bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg'\n                    : darkMode\n                    ? 'text-gray-300 hover:bg-gray-800'\n                    : 'text-gray-700 hover:bg-gray-100'\n                }`}\n              >\n                <i className={`${item.icon} text-xl`}></i>\n                {sidebarOpen && <span className=\"font-medium\">{item.label}</span>}\n              </button>\n            ))}\n\n            {/* Logout */}\n            <button\n              onClick={() => {\n                localStorage.removeItem('user');\n                navigate('/login');\n              }}\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all cursor-pointer whitespace-nowrap ${\n                darkMode ? 'text-red-400 hover:bg-gray-700' : 'text-red-600 hover:bg-red-50'\n              }`}\n            >\n              <i className=\"ri-logout-box-line text-xl\"></i>\n              {sidebarOpen && <span className=\"font-medium\">Sair</span>}\n            </button>\n          </nav>\n        </aside>\n\n        {/* Main Content */}\n        <main\n          className={`flex-1 ${sidebarOpen ? 'ml-72' : 'ml-20'} transition-all duration-300 p-8`}\n        >\n          {activeTab === 'overview' && <OverviewDashboard darkMode={darkMode} />}\n          {activeTab === 'homepage' && <HomePageManagement darkMode={darkMode} />}\n          {activeTab === 'products' && <ProductsManagement darkMode={darkMode} />}\n          {activeTab === 'categories' && <CategoriesManagement darkMode={darkMode} />}\n          {activeTab === 'orders' && <OrdersManagement darkMode={darkMode} />}\n          {activeTab === 'customers' && <CustomersManagement darkMode={darkMode} />}\n          {activeTab === 'marketing-advanced' && <MarketingAdvanced darkMode={darkMode} />}\n          {activeTab === 'tax-shipping' && <TaxShippingManagement darkMode={darkMode} />}\n          {activeTab === 'woocommerce' && <WooCommerceManagement darkMode={darkMode} />}\n          {activeTab === 'newsletter' && <NewsletterManagement darkMode={darkMode} />}\n          {activeTab === 'notifications' && <NotificationsManagement darkMode={darkMode} />}\n        </main>\n      </div>\n    </div>\n  );\n}\n"],"names":["OverviewDashboard","darkMode","loading","setLoading","useState","stats","setStats","recentCustomers","setRecentCustomers","bestSellingProducts","setBestSellingProducts","stockAlerts","setStockAlerts","useEffect","loadDashboardData","orders","supabase","now","today","weekAgo","monthAgo","lastWeekAgo","lastMonthAgo","salesToday","o","sum","salesWeek","salesMonth","salesLastWeek","salesLastMonth","revenueTotal","ordersTotal","ordersLastMonth","averageTicket","pendingOrders","processingOrders","shippedOrders","deliveredOrders","cancelledOrders","customers","totalCustomers","newCustomersToday","c","newCustomersWeek","newCustomersMonth","products","totalProducts","p","outOfStockProducts","lowStockProducts","promotionProducts","alerts","newsletter","newsletterSubscribers","newSubscribersWeek","n","notifications","unreadMessages","settings","ivaActive","freeShippingActive","ivaCollected","error","jsx","StatCard","icon","title","value","change","color","jsxs","customer","alert","product","index","createClient","ProductsManagement","setProducts","categories","setCategories","subcategories","setSubcategories","availableColors","setAvailableColors","availableSizes","setAvailableSizes","showAddModal","setShowAddModal","editingProduct","setEditingProduct","searchTerm","setSearchTerm","filterCategory","setFilterCategory","filterStatus","setFilterStatus","saving","setSaving","selectedProducts","setSelectedProducts","formData","setFormData","colorInput","setColorInput","sizeInput","setSizeInput","imageInput","setImageInput","loadData","loadFiltersData","productsData","categoriesData","subcategoriesData","colorsSet","sizesSet","size","handleSaveProduct","productData","insertData","resetForm","handleDeleteProduct","id","handleDeleteSelected","handleBulkActivate","handleBulkDeactivate","handleDuplicateProduct","newProduct","toggleSelectProduct","productId","selectAllProducts","filteredProducts","openEditModal","addColor","removeColor","addSize","removeSize","s","addImage","removeImage","url","img","matchesSearch","matchesCategory","matchesStatus","availableSubcategories","sub","activeProducts","outOfStock","onSale","lowStock","Fragment","e","cat","categoryName","subcategoryName","salePrice","originalPrice","discount","CategoriesManagement","showAddCategoryModal","setShowAddCategoryModal","showAddSubcategoryModal","setShowAddSubcategoryModal","editingCategory","setEditingCategory","editingSubcategory","setEditingSubcategory","viewMode","setViewMode","selectedCategoryFilter","setSelectedCategoryFilter","categoryForm","setCategoryForm","subcategoryForm","setSubcategoryForm","handleSaveCategory","slug","categoryData","resetCategoryForm","handleSaveSubcategory","existingSlugs","slugNumbers","match","nextNumber","subcategoryData","resetSubcategoryForm","handleDeleteCategory","productsError","subcategoriesError","categoryError","handleDeleteSubcategory","subcategoryError","openEditCategoryModal","category","openEditSubcategoryModal","subcategory","getSubcategoryCount","categoryId","groupedSubcategories","catSubcategories","OrdersManagement","setOrders","selectedOrder","setSelectedOrder","showDetailsModal","setShowDetailsModal","trackingNumber","setTrackingNumber","trackingUrl","setTrackingUrl","orderNotes","setOrderNotes","showCreateTestOrderModal","setShowCreateTestOrderModal","creatingTestOrders","setCreatingTestOrders","loadOrders","data","createTestOrders","testCustomerId","existingCustomer","newCustomer","customerError","realProducts","testProducts","testOrdersData","createdOrders","testOrder","totalAmount","taxAmount","orderNumber","order","orderError","orderItems","itemsError","deleteTestOrders","testOrders","orderIds","ordersError","updateOrderStatus","orderId","newStatus","updateTrackingInfo","viewOrderDetails","filteredOrders","getStatusColor","status","getStatusLabel","getPaymentStatusLabel","stat","item","CustomersManagement","setCustomers","filterType","setFilterType","selectedCustomer","setSelectedCustomer","customerNotes","setCustomerNotes","savingNotes","setSavingNotes","expandedOrders","setExpandedOrders","selectedCustomers","setSelectedCustomers","showDeleteConfirm","setShowDeleteConfirm","deleting","setDeleting","loadCustomers","customersWithStats","totalSpent","orderCount","lastPurchase","customerType","viewCustomerDetails","ordersData","favoritesData","addressesData","newsletterData","saveCustomerNotes","toggleOrderExpanded","newExpanded","selectAllCustomers","filteredCustomers","allIds","toggleCustomerSelection","customerId","newSelected","deleteSelectedCustomers","customerIds","getCustomerTypeBadge","type","badges","badge","matchesFilter","address","fav","HomePageManagement","activeTab","setActiveTab","looks","setLooks","showCreateLookModal","setShowCreateLookModal","selectedLookProducts","setSelectedLookProducts","lookTitle","setLookTitle","heroTitle","setHeroTitle","heroSubtitle","setHeroSubtitle","heroDescription","setHeroDescription","heroButtonText","setHeroButtonText","heroButtonLink","setHeroButtonLink","heroBackgroundImage","setHeroBackgroundImage","showArrowDown","setShowArrowDown","featuredProducts","setFeaturedProducts","featuredTitle","setFeaturedTitle","featuredSubtitle","setFeaturedSubtitle","featuredMode","setFeaturedMode","aboutTitle","setAboutTitle","aboutDescription","setAboutDescription","aboutButtonText","setAboutButtonText","aboutImage","setAboutImage","newsletterTitle","setNewsletterTitle","newsletterDescription","setNewsletterDescription","newsletterButtonText","setNewsletterButtonText","newsletterIncentive","setNewsletterIncentive","looksData","looksError","settingsData","config","handleSave","toggleFeaturedProduct","toggleLookProduct","handleCreateLook","handleDeleteLook","lookId","getSelectedProducts","tab","look","MarketingAdvanced","templates","setTemplates","history","setHistory","searchQuery","setSearchQuery","showMessageModal","setShowMessageModal","showTemplateModal","setShowTemplateModal","selectedChannel","setSelectedChannel","selectedTemplate","setSelectedTemplate","editingTemplate","setEditingTemplate","loadTemplates","loadHistory","defaultTemplates","getFilteredCustomers","filtered","query","toggleCustomer","toggleAll","handleSendMessage","channel","sendMessage","selectedCustomersList","emails","subject","body","message","phone","updatedHistory","saveTemplate","updatedTemplates","t","newTemplate","deleteTemplate","templateId","template","entry","NewsletterManagement","subscribers","setSubscribers","selectedSubscriber","setSelectedSubscriber","loadSubscribers","subscription","exportSubscribers","csv","filteredSubscribers","blob","a","cancelSubscription","reactivateSubscription","openDetailsModal","subscriber","matchesType","date","NotificationsManagement","setNotifications","filterRead","setFilterRead","selectedNotification","setSelectedNotification","loadNotifications","notificationsChannel","systemNotifications","systemError","contactMessages","contactError","contactNotifications","msg","allNotifications","b","markAsRead","contactId","prev","markAllAsRead","notifError","deleteNotification","deleteAllRead","getTypeIcon","getTypeColor","getTypeName","filteredNotifications","notification","TaxShippingManagement","success","setSuccess","showAddCountryModal","setShowAddCountryModal","newCountry","setNewCountry","taxEnabled","setTaxEnabled","taxCalculation","setTaxCalculation","ossEnabled","setOssEnabled","legalText","setLegalText","generalSettings","setGeneralSettings","taxRates","setTaxRates","shippingZones","setShippingZones","countryShippingRates","setCountryShippingRates","saveCountryShippingRates","loadSettings","saveSettings","addCountry","newId","rate","updated","country","WooCommerceManagement","wooUrl","setWooUrl","consumerKey","setConsumerKey","consumerSecret","setConsumerSecret","isConnected","setIsConnected","importedProducts","setImportedProducts","syncHistory","setSyncHistory","loadImportedProducts","loadSyncHistory","testConnection","resolve","syncProducts","log","AdminPage","navigate","useNavigate","user","useAuth","setDarkMode","saved","sidebarOpen","setSidebarOpen"],"mappings":"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"}