import{e as V,a as G,b as K,u as Q,r as l,f as W,j as e,L as X}from"./index-DlD1gmTD.js";import{H as Y,F as Z}from"./Footer-B2vMGxQd.js";const c=W("https://sgfwwldumrsyvviajdqp.supabase.co","sb_publishable_-UTFc4fjudJdbMS51kcweg_KCzprCDd");function be(){const{user:s,loading:v,isAdmin:T,refreshUser:E}=V(),{items:ee,removeFromCart:te}=G(),{favorites:ae,removeFromFavorites:re}=K(),C=Q(),[n,p]=l.useState("profile"),[se,le]=l.useState("orders"),[g,x]=l.useState(!1),[b,h]=l.useState(!1),[ie,de]=l.useState(!1),[ne,oe]=l.useState(!1),[O,L]=l.useState([]),[d,f]=l.useState({full_name:"",phone:"",date_of_birth:""}),[k,S]=l.useState(""),[m,A]=l.useState(""),[y,P]=l.useState(""),[u,U]=l.useState([]),[M,q]=l.useState([]),[ce,z]=l.useState(!1),[a,o]=l.useState({label:"Casa",address_type:"shipping",street:"",city:"",postal_code:"",country:"LU",phone:"",is_default:!1}),[xe,me]=l.useState(!1),[pe,ge]=l.useState(null);l.useEffect(()=>{if(!v){if(!s){C("/login?redirect=/account");return}N()}},[s,v,C]);const N=async()=>{if(s){x(!0);try{const{data:t}=await c.from("customers").select("*").eq("id",s.id).single();t&&f({full_name:t.full_name||t.name||"",phone:t.phone||"",date_of_birth:t.date_of_birth||""});const{data:r}=await c.from("orders").select("*").eq("customer_id",s.id).order("created_at",{ascending:!1});U(r||[]);const{data:i}=await c.from("addresses").select("*").eq("customer_id",s.id).order("is_default",{ascending:!1});i&&q(i),L([])}catch(t){console.error("Erro ao carregar dados:",t)}finally{x(!1)}}},I=async()=>{if(s){h(!0);try{const{error:t}=await c.from("customers").update({full_name:d.full_name,name:d.full_name,phone:d.phone,date_of_birth:d.date_of_birth||null}).eq("id",s.id);if(t)throw t;await E();const r=document.createElement("div");r.className="fixed top-24 right-6 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl shadow-2xl z-50 flex items-center gap-2 animate-bounce",r.innerHTML='<i class="ri-check-line text-xl"></i><span>Perfil atualizado com sucesso!</span>',document.body.appendChild(r),setTimeout(()=>r.remove(),3e3),await N()}catch(t){console.error("Erro ao atualizar perfil:",t),alert("Erro ao atualizar perfil. Tente novamente.")}finally{h(!1)}}},$=async()=>{if(!(!s||!k)){x(!0);try{const{error:t}=await c.auth.updateUser({email:k});if(t)throw t;alert("Email atualizado com sucesso! Verifique o seu novo email para confirmar a altera√ß√£o."),S(""),await E()}catch(t){console.error("Erro ao alterar email:",t),alert(t.message||"Erro ao alterar email. Tente novamente.")}finally{x(!1)}}},R=async()=>{if(!(!s||!m||!y)){if(m!==y){alert("As passwords n√£o coincidem!");return}if(m.length<6){alert("A password deve ter pelo menos 6 caracteres!");return}x(!0);try{const{error:t}=await c.auth.updateUser({password:m});if(t)throw t;alert("Password alterada com sucesso!"),A(""),P("")}catch(t){console.error("Erro ao alterar password:",t),alert(t.message||"Erro ao alterar password. Tente novamente.")}finally{x(!1)}}},J=async()=>{if(!s){alert("Por favor, fa√ßa login primeiro");return}if(!a.street||!a.city||!a.postal_code||!a.country){alert("Por favor, preencha todos os campos obrigat√≥rios");return}h(!0);try{if(console.log("üîÑ Iniciando processo de guardar endere√ßo..."),console.log("üë§ User ID:",s.id),a.is_default){console.log("üîÑ Removendo padr√£o dos outros endere√ßos...");const{error:F}=await c.from("addresses").update({is_default:!1}).eq("customer_id",s.id);F&&console.error("‚ö†Ô∏è Erro ao atualizar endere√ßos padr√£o:",F)}console.log("üîÑ Inserindo novo endere√ßo...");const t={customer_id:s.id,address_type:a.address_type||"shipping",street:a.street,city:a.city,postal_code:a.postal_code,country:a.country,is_default:a.is_default,created_at:new Date().toISOString()};console.log("üì¶ Dados do endere√ßo a inserir:",t);const{data:r,error:i}=await c.from("addresses").insert(t).select().single();if(i){console.error("‚ùå Erro ao inserir endere√ßo:",i),i.code==="23503"?alert("Erro: O seu perfil ainda n√£o est√° completamente configurado. Por favor, fa√ßa logout e login novamente."):alert("Erro ao adicionar endere√ßo. Por favor, tente novamente."),h(!1);return}console.log("‚úÖ Endere√ßo inserido com sucesso:",r),await N(),z(!1),o({label:"Casa",address_type:"shipping",street:"",city:"",postal_code:"",country:"LU",phone:"",is_default:!1});const j=document.createElement("div");j.className="fixed top-24 right-6 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-4 rounded-xl shadow-2xl z-50 flex items-center gap-2 animate-bounce",j.innerHTML='<i class="ri-check-line text-xl"></i><span>Endere√ßo adicionado com sucesso!</span>',document.body.appendChild(j),setTimeout(()=>j.remove(),3e3)}catch(t){console.error("‚ùå Erro ao guardar endere√ßo:",t),alert("Erro ao guardar endere√ßo. Por favor, tente novamente.")}finally{h(!1)}},D=O.filter(t=>!t.is_read).length,w=t=>new Date(t).toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric"}),H=t=>{const r={pending:{label:"Pendente",icon:"ri-time-line",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"},processing:{label:"Em Processamento",icon:"ri-loader-4-line",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"},shipped:{label:"Enviado",icon:"ri-truck-line",color:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"},delivered:{label:"Entregue",icon:"ri-check-double-line",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"},cancelled:{label:"Cancelado",icon:"ri-close-line",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}},i=r[t]||r.pending;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold ${i.color}`,children:[e.jsx("i",{className:i.icon}),i.label]})},[_,B]=l.useState(null);return v||g?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-pink-50/30 to-rose-50/30 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"ri-loader-4-line text-5xl text-pink-500 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"A carregar..."})]})}):s?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-rose-50/30 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[e.jsx(Y,{}),e.jsx("div",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-pink-400 to-rose-400 rounded-full flex items-center justify-center text-white text-2xl sm:text-3xl font-bold flex-shrink-0",children:s.full_name?s.full_name.charAt(0).toUpperCase():s.email.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:s.full_name||"Minha Conta"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base break-all",children:s.email}),T&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-400 rounded-full text-xs font-medium mt-2",children:[e.jsx("i",{className:"ri-vip-crown-line"}),"Administrador"]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-2 shadow-sm border border-gray-100 dark:border-slate-700 mb-6 sm:mb-8 overflow-x-auto",children:e.jsxs("div",{className:"flex gap-2 min-w-max",children:[e.jsxs("button",{onClick:()=>p("profile"),className:`px-4 sm:px-6 py-3 rounded-xl font-medium text-sm transition-all whitespace-nowrap cursor-pointer ${n==="profile"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-200 dark:shadow-pink-900/50":"text-gray-600 dark:text-gray-400 hover:text-pink-500 dark:hover:text-pink-400"}`,children:[e.jsx("i",{className:"ri-user-line mr-2"}),"Perfil"]}),e.jsxs("button",{onClick:()=>p("orders"),className:`px-4 sm:px-6 py-3 rounded-xl font-medium text-sm transition-all whitespace-nowrap cursor-pointer ${n==="orders"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-200 dark:shadow-pink-900/50":"text-gray-600 dark:text-gray-400 hover:text-pink-500 dark:hover:text-pink-400"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line mr-2"}),"Pedidos (",u.length,")"]}),e.jsxs("button",{onClick:()=>p("addresses"),className:`px-4 sm:px-6 py-3 rounded-xl font-medium text-sm transition-all whitespace-nowrap cursor-pointer ${n==="addresses"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-200 dark:shadow-pink-900/50":"text-gray-600 dark:text-gray-400 hover:text-pink-500 dark:hover:text-pink-400"}`,children:[e.jsx("i",{className:"ri-map-pin-line mr-2"}),"Endere√ßos (",M.length,")"]}),e.jsxs("button",{onClick:()=>p("notifications"),className:`px-4 sm:px-6 py-3 rounded-xl font-medium text-sm transition-all whitespace-nowrap cursor-pointer relative ${n==="notifications"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-200 dark:shadow-pink-900/50":"text-gray-600 dark:text-gray-400 hover:text-pink-500 dark:hover:text-pink-400"}`,children:[e.jsx("i",{className:"ri-notification-line mr-2"}),"Notifica√ß√µes",D>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full",children:D})]}),e.jsxs("button",{onClick:()=>p("security"),className:`px-4 sm:px-6 py-3 rounded-xl font-medium text-sm transition-all whitespace-nowrap cursor-pointer ${n==="security"?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-200 dark:shadow-pink-900/50":"text-gray-600 dark:text-gray-400 hover:text-pink-500 dark:hover:text-pink-400"}`,children:[e.jsx("i",{className:"ri-lock-line mr-2"}),"Seguran√ßa"]})]})}),e.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl p-8 border border-pink-100 dark:border-slate-700",children:[n==="profile"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Informa√ß√µes Pessoais"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Nome Completo"}),e.jsx("input",{type:"text",value:d.full_name,onChange:t=>f({...d,full_name:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Email"}),e.jsx("input",{type:"email",value:s?.email||"",disabled:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-slate-600 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-600 dark:text-gray-400 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Para alterar o email, use a sec√ß√£o de Seguran√ßa"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:d.phone,onChange:t=>f({...d,phone:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"+351 912 345 678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Data de Nascimento"}),e.jsx("input",{type:"date",value:d.date_of_birth,onChange:t=>f({...d,date_of_birth:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300"})]}),e.jsx("button",{onClick:I,disabled:b,className:"w-full px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:b?"A guardar...":"Guardar Altera√ß√µes"})]})]}),n==="security"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Seguran√ßa"}),e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-mail-line text-blue-600 dark:text-blue-400"}),"Alterar Email"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Email Atual"}),e.jsx("input",{type:"email",value:s?.email||"",disabled:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-600 dark:text-gray-400 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Novo Email"}),e.jsx("input",{type:"email",value:k,onChange:t=>S(t.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300",placeholder:"novo@email.com"})]}),e.jsx("button",{onClick:$,disabled:g||!k,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:g?"A alterar...":"Alterar Email"})]})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-900/20 dark:to-rose-900/20 rounded-2xl border border-pink-200 dark:border-pink-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-lock-line text-pink-600 dark:text-pink-400"}),"Alterar Password"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Nova Password"}),e.jsx("input",{type:"password",value:m,onChange:t=>A(t.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"M√≠nimo 6 caracteres"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Confirmar Nova Password"}),e.jsx("input",{type:"password",value:y,onChange:t=>P(t.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"Repita a nova password"})]}),e.jsx("button",{onClick:R,disabled:g||!m||!y,className:"w-full px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:g?"A alterar...":"Alterar Password"})]})]})]}),n==="orders"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Meus Pedidos"}),e.jsxs("span",{className:"px-4 py-2 bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-400 rounded-full text-sm font-bold",children:[u.length," ",u.length===1?"Pedido":"Pedidos"]})]}),u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-shopping-bag-line text-5xl text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Ainda n√£o fez nenhum pedido"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Explore a nossa cole√ß√£o e fa√ßa a sua primeira compra!"}),e.jsxs(X,{to:"/products",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 whitespace-nowrap",children:[e.jsx("i",{className:"ri-shopping-bag-line"}),"Ver Produtos"]})]}):e.jsx("div",{className:"space-y-4",children:u.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-700 rounded-2xl border-2 border-gray-100 dark:border-slate-600 overflow-hidden hover:border-pink-200 dark:hover:border-pink-800 transition-all duration-300",children:[e.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-600/50 transition-all duration-300",onClick:()=>B(_===t.id?null:t.id),children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["Pedido #",t.order_number]}),H(t.status)]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-calendar-line"}),w(t.created_at)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-shopping-bag-line"}),Array.isArray(t.items)?t.items.length:JSON.parse(t.items||"[]").length," ",Array.isArray(t.items)?t.items.length===1?"item":"itens":JSON.parse(t.items||"[]").length===1?"item":"itens"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"ri-bank-card-line"}),t.payment_method]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-rose-600 bg-clip-text text-transparent",children:["‚Ç¨",t.total_amount.toFixed(2)]})]}),e.jsx("button",{className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-pink-500 transition-all duration-300",children:e.jsx("i",{className:`${_===t.id?"ri-arrow-up-s-line":"ri-arrow-down-s-line"} text-2xl`})})]})]})}),_===t.id&&e.jsx("div",{className:"border-t border-gray-100 dark:border-slate-600 bg-gray-50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-shopping-bag-line text-pink-500"}),"Produtos"]}),e.jsx("div",{className:"space-y-3",children:(Array.isArray(t.items)?t.items:JSON.parse(t.items||"[]")).map((r,i)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-slate-700 rounded-xl border border-gray-100 dark:border-slate-600",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-slate-600 rounded-lg overflow-hidden flex-shrink-0",children:r.image&&e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"font-bold text-gray-900 dark:text-white truncate",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Quantidade: ",r.quantity]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["‚Ç¨",(r.price*r.quantity).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["‚Ç¨",r.price.toFixed(2)," cada"]})]})]},i))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-money-euro-circle-line text-pink-500"}),"Resumo do Pedido"]}),e.jsxs("div",{className:"bg-white dark:bg-slate-700 rounded-xl p-4 border border-gray-100 dark:border-slate-600 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["‚Ç¨",t.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Envio"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["‚Ç¨",t.shipping_cost.toFixed(2)]})]}),t.tax_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"IVA"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["‚Ç¨",t.tax_amount.toFixed(2)]})]}),t.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Desconto"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:["-‚Ç¨",t.discount_amount.toFixed(2)]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-slate-600 flex justify-between",children:[e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Total"}),e.jsxs("span",{className:"text-xl font-bold bg-gradient-to-r from-pink-500 to-rose-600 bg-clip-text text-transparent",children:["‚Ç¨",t.total_amount.toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-map-pin-line text-pink-500"}),"Endere√ßo de Envio"]}),e.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl p-4 border border-gray-100 dark:border-slate-600",children:typeof t.shipping_address=="string"?(()=>{try{const r=JSON.parse(t.shipping_address);return e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white mb-1",children:r.street}),e.jsxs("p",{children:[r.postal_code," ",r.city]}),e.jsx("p",{children:r.country})]})}catch{return e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.shipping_address})}})():e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white mb-1",children:t.shipping_address?.street}),e.jsxs("p",{children:[t.shipping_address?.postal_code," ",t.shipping_address?.city]}),e.jsx("p",{children:t.shipping_address?.country})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"ri-truck-line text-pink-500"}),"Tracking do Pedido"]}),e.jsx("div",{className:"bg-white dark:bg-slate-700 rounded-xl p-6 border border-gray-100 dark:border-slate-600",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-check-line text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Pedido Criado"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w(t.created_at)})]})]}),["processing","shipped","delivered"].includes(t.status)&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-check-line text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Em Processamento"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"O seu pedido est√° a ser preparado"})]})]}),["shipped","delivered"].includes(t.status)&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-check-line text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Enviado"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.shipped_at?w(t.shipped_at):"O seu pedido foi enviado"})]})]}),t.status==="delivered"&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-check-line text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Entregue"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.delivered_at?w(t.delivered_at):"O seu pedido foi entregue"})]})]}),t.status==="cancelled"&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"ri-close-line text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Cancelado"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"O pedido foi cancelado"})]})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.status==="delivered"&&e.jsxs("button",{className:"flex-1 min-w-[200px] px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 whitespace-nowrap",children:[e.jsx("i",{className:"ri-arrow-go-back-line mr-2"}),"Solicitar Devolu√ß√£o"]}),e.jsxs("button",{className:"flex-1 min-w-[200px] px-6 py-3 bg-white dark:bg-slate-700 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-slate-600 rounded-xl font-bold hover:border-pink-500 dark:hover:border-pink-500 transition-all duration-300 whitespace-nowrap",children:[e.jsx("i",{className:"ri-customer-service-line mr-2"}),"Contactar Suporte"]})]})]})})]},t.id))})]}),n==="addresses"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Endere√ßos"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Adicionar Novo Endere√ßo"}),e.jsx("input",{type:"text",value:a.label,onChange:t=>o({...a,label:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"Ex: Casa, Trabalho"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Tipo de Endere√ßo"}),e.jsxs("select",{value:a.address_type,onChange:t=>o({...a,address_type:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",children:[e.jsx("option",{value:"shipping",children:"Envio"}),e.jsx("option",{value:"billing",children:"Fatura√ß√£o"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Endere√ßo"}),e.jsx("input",{type:"text",value:a.street,onChange:t=>o({...a,street:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"Rua, n√∫mero, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Cidade"}),e.jsx("input",{type:"text",value:a.city,onChange:t=>o({...a,city:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"Cidade"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"C√≥digo Postal"}),e.jsx("input",{type:"text",value:a.postal_code,onChange:t=>o({...a,postal_code:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"Ex: 1234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Pa√≠s"}),e.jsxs("select",{value:a.country,onChange:t=>o({...a,country:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",children:[e.jsx("option",{value:"LU",children:"Luxemburgo"}),e.jsx("option",{value:"DE",children:"Alemanha"}),e.jsx("option",{value:"FR",children:"Fran√ßa"}),e.jsx("option",{value:"BE",children:"B√©lgica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:a.phone,onChange:t=>o({...a,phone:t.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300",placeholder:"+351 912 345 678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 dark:text-white mb-2",children:"Definir como Padr√£o"}),e.jsx("input",{type:"checkbox",checked:a.is_default,onChange:t=>o({...a,is_default:t.target.checked}),className:"w-4 h-4 text-pink-500 bg-gray-100 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded focus:ring-pink-500 focus:ring-2"})]}),e.jsx("button",{onClick:J,disabled:b,className:"w-full px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:b?"A guardar...":"Guardar Endere√ßo"})]})]})]})]})}),e.jsx(Z,{})]}):null}export{be as default};
//# sourceMappingURL=page-CgHcjWAI.js.map
