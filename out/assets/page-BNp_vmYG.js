import{a as P,e as z,u as A,r,s as g,j as e,L as n}from"./index-DlD1gmTD.js";import{u as R,H as m,F as h}from"./Footer-B2vMGxQd.js";function G(){const{t:T}=R("common"),{items:l,removeFromCart:p,updateQuantity:c,total:a}=P(),{user:Z}=z(),u=A(),[b,M]=r.useState(!1),[V,j]=r.useState(null),[D,y]=r.useState(null),[L,f]=r.useState(5),[$,k]=r.useState(50),[I,N]=r.useState(0),[O,v]=r.useState(!1),[H,w]=r.useState(!0),[x,S]=r.useState([]);r.useEffect(()=>{_(),C()},[a]);const _=async()=>{try{const{data:t,error:i}=await g.from("site_settings").select("*").eq("key","tax_shipping_settings").maybeSingle();if(t&&t.value){const s=t.value;if(s.shippingZones&&s.shippingZones.length>0){const o=s.shippingZones.find(q=>q.enabled)||s.shippingZones[0];f(o.cost||5),k(o.free_shipping_threshold||50)}s.taxEnabled!==void 0&&(v(s.taxEnabled),w(s.taxCalculation==="included"),s.taxEnabled&&s.taxCalculation!=="included"&&N(a*.17)),j(s),y(s)}}catch(t){console.error("Erro ao carregar configura√ß√µes:",t)}},C=async()=>{try{const{data:t,error:i}=await g.from("products").select("*").eq("is_active",!0).limit(4);t&&!i&&S(t)}catch(t){console.error("Erro ao carregar produtos recomendados:",t)}};l.reduce((t,i)=>t+i.quantity,0);const d=50,F=Math.max(0,d-a),E=Math.min(a/d*100,100);return l.length===0?e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(m,{}),e.jsx("div",{className:"pt-32 pb-20 px-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"w-24 h-24 flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-shopping-cart-line text-8xl text-gray-300 dark:text-gray-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-4",children:"O seu carrinho est√° vazio ü§ç"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Descubra os nossos produtos e encontre algo especial para si."}),e.jsx(n,{to:"/products",className:"inline-block px-8 py-4 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-colors text-base font-semibold whitespace-nowrap cursor-pointer",children:"Ir para Produtos"})]})}),e.jsx(h,{})]}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(m,{}),e.jsx("div",{className:"pt-32 pb-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-gray-800 dark:to-gray-700 rounded-3xl p-12 mb-8 shadow-lg",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-400 to-rose-400 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-shopping-cart-line text-4xl text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-rose-400 bg-clip-text text-transparent text-center mb-2",children:"O Meu Carrinho"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-center",children:[l.length," ",l.length===1?"produto":"produtos"," no carrinho"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"space-y-4",children:l.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 flex gap-5 hover:shadow-md transition-shadow",children:[e.jsx(n,{to:`/product/${t.id.split(/[A-Z]/)[0]}`,className:"cursor-pointer flex-shrink-0",children:e.jsx("div",{className:"w-28 h-28",children:e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover object-top rounded-lg"})})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx(n,{to:`/product/${t.id.split(/[A-Z]/)[0]}`,className:"cursor-pointer",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 hover:text-pink-500 transition-colors",children:t.name})}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-3",children:[t.size&&e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:["Tamanho: ",e.jsx("strong",{children:t.size})]}),t.color&&e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:["Cor: ",e.jsx("strong",{children:t.color})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-2xl font-bold text-pink-500 dark:text-pink-400",children:["‚Ç¨",(t.price*t.quantity).toFixed(2)]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>c(t.id,t.quantity-1,t.size,t.color),disabled:t.quantity<=1,className:"w-9 h-9 flex items-center justify-center hover:bg-white dark:hover:bg-gray-600 rounded-md transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Diminuir quantidade",children:e.jsx("i",{className:"ri-subtract-line text-lg text-gray-700 dark:text-gray-300"})}),e.jsx("span",{className:"text-base font-semibold w-10 text-center text-gray-800 dark:text-white",children:t.quantity}),e.jsx("button",{onClick:()=>c(t.id,t.quantity+1,t.size,t.color),className:"w-9 h-9 flex items-center justify-center hover:bg-white dark:hover:bg-gray-600 rounded-md transition-colors cursor-pointer","aria-label":"Aumentar quantidade",children:e.jsx("i",{className:"ri-add-line text-lg text-gray-700 dark:text-gray-300"})})]}),e.jsx("button",{onClick:()=>p(t.id,t.size,t.color),className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors cursor-pointer","aria-label":"Remover produto",title:"Remover produto",children:e.jsx("i",{className:"ri-delete-bin-line text-xl"})})]})]})]})]},t.id))}),x.length>0&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Talvez tamb√©m goste"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:x.map(t=>{const i=t.is_on_sale&&t.sale_price?t.sale_price:t.price,s=t.is_on_sale&&t.sale_price&&t.sale_price<t.price;return e.jsxs(n,{to:`/product/${t.id}`,className:"group cursor-pointer",children:[e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden mb-3 aspect-square relative",children:[e.jsx("img",{src:t.images?.[0]||t.image_url||"https://readdy.ai/api/search-image?query=elegant%20feminine%20fashion%20product%20simple%20white%20background%20luxury%20style%20modern%20aesthetic%20soft%20lighting&width=300&height=300&seq=suggest1&orientation=squarish",alt:t.name_pt||t.name,className:"w-full h-full object-cover object-top group-hover:scale-105 transition-transform duration-300"}),s&&t.discount_percentage>0&&e.jsxs("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-rose-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:["-",t.discount_percentage,"%"]})]}),e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white mb-1 line-clamp-2",children:t.name_pt||t.name}),e.jsx("div",{className:"flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-base font-bold text-pink-500 dark:text-pink-400",children:["‚Ç¨",i.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400 line-through",children:["‚Ç¨",t.price.toFixed(2)]})]}):e.jsxs("p",{className:"text-base font-bold text-pink-500 dark:text-pink-400",children:["‚Ç¨",i.toFixed(2)]})})]},t.id)})})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 border border-pink-100 dark:border-gray-700 sticky top-32",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Resumo da Encomenda"}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-4 mb-6 border border-pink-200 dark:border-gray-600",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("i",{className:"ri-truck-line text-2xl text-pink-500 dark:text-pink-400"})}),e.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:a>=d?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"üéâ Envio gratuito!"}):e.jsxs("span",{children:["Faltam ",e.jsxs("span",{className:"text-pink-500 dark:text-pink-400 font-bold",children:["‚Ç¨",F.toFixed(2)]})," at√© envio gr√°tis"]})})]})}),e.jsx("div",{className:"relative w-full h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-pink-400 to-rose-400 transition-all duration-500 ease-out rounded-full",style:{width:`${E}%`}})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-base",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold text-gray-800 dark:text-white",children:["‚Ç¨",a.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-base",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Envio"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Calculado no checkout"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-information-line text-blue-600 dark:text-blue-400 mr-2 mt-0.5"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"O custo de envio ser√° calculado ap√≥s inserir o endere√ßo de entrega no checkout"})]})}),e.jsxs("div",{className:"border-t border-pink-200 dark:border-gray-600 pt-4 flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Total Estimado"}),e.jsxs("span",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:["‚Ç¨",a.toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"+ envio (a calcular no checkout)"})]}),b&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-300 text-center",children:"Para finalizar a compra, √© necess√°rio iniciar sess√£o ou criar uma conta."})}),e.jsx("button",{onClick:()=>u("/checkout"),disabled:l.length===0,className:"w-full px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl hover:from-blue-600 hover:to-cyan-600 hover:shadow-2xl hover:scale-105 transition-all duration-300 font-bold text-lg whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 shadow-lg transform active:scale-95",children:"Finalizar Compra"}),e.jsx(n,{to:"/products",className:"block w-full px-6 py-3 mt-4 border-2 border-pink-400 dark:border-pink-500 text-pink-500 dark:text-pink-400 text-center rounded-xl hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-colors text-base font-semibold whitespace-nowrap cursor-pointer",children:"Continuar a Comprar"}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-pink-200 dark:border-gray-600",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-800 dark:text-white mb-4 text-center",children:"M√©todos de Pagamento Aceites"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6 flex-wrap",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("i",{className:"ri-visa-line text-2xl text-blue-600"})}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("i",{className:"ri-mastercard-line text-2xl text-orange-600"})}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("i",{className:"ri-google-line text-2xl text-red-600"})}),e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("i",{className:"ri-apple-line text-2xl text-gray-800 dark:text-white"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("i",{className:"ri-shield-check-line text-xl text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Pagamento seguro"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("i",{className:"ri-truck-line text-xl text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Envio r√°pido"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx("i",{className:"ri-arrow-left-right-line text-xl text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Devolu√ß√µes simples"})]})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center mt-4",children:"A sua compra est√° protegida."})]})]})})]})]})}),e.jsx(h,{})]})}export{G as default};
//# sourceMappingURL=page-BNp_vmYG.js.map
