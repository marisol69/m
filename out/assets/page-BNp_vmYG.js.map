{"version":3,"file":"page-BNp_vmYG.js","sources":["../../src/pages/cart/page.tsx"],"sourcesContent":["import { Header } from '../../components/base/Header';\nimport { Footer } from '../../components/base/Footer';\nimport { useTranslation } from 'react-i18next';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useCart } from '../../contexts/CartContext';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../../lib/supabase';\n\nexport default function CartPage() {\n  const { t } = useTranslation('common');\n  const { items, removeFromCart, updateQuantity, total } = useCart();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [showLoginMessage, setShowLoginMessage] = useState(false);\n\n  // üî• CARREGAR CONFIGURA√á√ïES DE ENVIO E IVA DO DATABASE\n  const [shippingSettings, setShippingSettings] = useState<any>(null);\n  const [vatSettings, setVatSettings] = useState<any>(null);\n  const [shippingCost, setShippingCost] = useState(5);\n  const [freeShippingThreshold, setFreeShippingThreshold] = useState(50);\n  const [vatAmount, setVatAmount] = useState(0);\n  const [vatEnabled, setVatEnabled] = useState(false);\n  const [vatIncluded, setVatIncluded] = useState(true);\n\n  // üî• PRODUTOS RECOMENDADOS DO DATABASE\n  const [recommendedProducts, setRecommendedProducts] = useState<any[]>([]);\n\n  useEffect(() => {\n    loadShippingAndVatSettings();\n    loadRecommendedProducts();\n  }, [total]);\n\n  const loadShippingAndVatSettings = async () => {\n    try {\n      // Carregar configura√ß√µes de IVA & Envio\n      const { data, error } = await supabase\n        .from('site_settings')\n        .select('*')\n        .eq('key', 'tax_shipping_settings')\n        .maybeSingle();\n\n      if (data && data.value) {\n        const settings = data.value;\n        \n        // Configura√ß√µes de Envio\n        if (settings.shippingZones && settings.shippingZones.length > 0) {\n          // Usar primeira zona ativa (Luxemburgo por padr√£o)\n          const defaultZone = settings.shippingZones.find((z: any) => z.enabled) || settings.shippingZones[0];\n          setShippingCost(defaultZone.cost || 5);\n          setFreeShippingThreshold(defaultZone.free_shipping_threshold || 50);\n        }\n\n        // Configura√ß√µes de IVA\n        if (settings.taxEnabled !== undefined) {\n          setVatEnabled(settings.taxEnabled);\n          setVatIncluded(settings.taxCalculation === 'included');\n          \n          // Se IVA est√° inclu√≠do, mostrar apenas informa√ß√£o\n          // Se IVA √© calculado no checkout, calcular aqui (para pr√©-visualiza√ß√£o)\n          if (settings.taxEnabled && settings.taxCalculation !== 'included') {\n            // Taxa padr√£o Luxemburgo: 17%\n            const defaultRate = 0.17;\n            setVatAmount(total * defaultRate);\n          }\n        }\n\n        setShippingSettings(settings);\n        setVatSettings(settings);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar configura√ß√µes:', error);\n    }\n  };\n\n  const loadRecommendedProducts = async () => {\n    try {\n      // Carregar 4 produtos aleat√≥rios ativos\n      const { data, error } = await supabase\n        .from('products')\n        .select('*')\n        .eq('is_active', true)\n        .limit(4);\n\n      if (data && !error) {\n        setRecommendedProducts(data);\n      }\n    } catch (error) {\n      console.error('Erro ao carregar produtos recomendados:', error);\n    }\n  };\n\n  const totalQuantity = items.reduce((acc, item) => acc + item.quantity, 0);\n  const subtotal = total;\n  \n  // ‚ùå REMOVIDO: C√°lculo de envio no carrinho\n  // O envio s√≥ ser√° calculado no checkout ap√≥s o cliente inserir o endere√ßo\n  \n  // Calcular quanto falta para envio gr√°tis (baseado nos limites m√≠nimos conhecidos)\n  const minFreeShipping = 50; // M√≠nimo para envio gr√°tis (Luxemburgo)\n  const amountUntilFreeShipping = Math.max(0, minFreeShipping - subtotal);\n  const hasReachedFreeShipping = subtotal >= minFreeShipping;\n\n  // üî• CORRIGIDO: Total estimado √© APENAS o subtotal dos produtos\n  // Envio e IVA ser√£o calculados no checkout\n  const finalTotal = total;\n  // ‚úÖ FIXO: Limite de envio gr√°tis √© ‚Ç¨50 para todos os pa√≠ses\n  const actualFreeShippingThreshold = 50;\n  const remainingForFreeShipping = Math.max(0, actualFreeShippingThreshold - total);\n  const progressPercentage = Math.min((total / actualFreeShippingThreshold) * 100, 100);\n\n  const handleCheckout = () => {\n    if (!user) {\n      setShowLoginMessage(true);\n      setTimeout(() => {\n        navigate('/login?redirect=/checkout');\n      }, 2000);\n    } else {\n      navigate('/checkout');\n    }\n  };\n\n  if (items.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300\">\n        <Header />\n        <div className=\"pt-32 pb-20 px-6\">\n          <div className=\"max-w-4xl mx-auto text-center\">\n            <div className=\"w-24 h-24 flex items-center justify-center mx-auto mb-6\">\n              <i className=\"ri-shopping-cart-line text-8xl text-gray-300 dark:text-gray-600\"></i>\n            </div>\n            <h1 className=\"text-3xl font-bold text-gray-800 dark:text-white mb-4\">\n              O seu carrinho est√° vazio ü§ç\n            </h1>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n              Descubra os nossos produtos e encontre algo especial para si.\n            </p>\n            <Link\n              to=\"/products\"\n              className=\"inline-block px-8 py-4 bg-pink-500 text-white rounded-full hover:bg-pink-600 transition-colors text-base font-semibold whitespace-nowrap cursor-pointer\"\n            >\n              Ir para Produtos\n            </Link>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300\">\n      <Header />\n\n      <div className=\"pt-32 pb-20 px-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-gray-800 dark:to-gray-700 rounded-3xl p-12 mb-8 shadow-lg\">\n            <div className=\"w-20 h-20 bg-gradient-to-br from-pink-400 to-rose-400 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <i className=\"ri-shopping-cart-line text-4xl text-white\"></i>\n            </div>\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-pink-400 to-rose-400 bg-clip-text text-transparent text-center mb-2\">O Meu Carrinho</h1>\n            <p className=\"text-gray-600 dark:text-gray-300 text-center\">{items.length} {items.length === 1 ? 'produto' : 'produtos'} no carrinho</p>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            {/* Coluna Esquerda - Produtos */}\n            <div className=\"lg:col-span-2\">\n              {/* Lista de Produtos */}\n              <div className=\"space-y-4\">\n                {items.map((item) => (\n                  <div\n                    key={item.id}\n                    className=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 flex gap-5 hover:shadow-md transition-shadow\"\n                  >\n                    <Link to={`/product/${item.id.split(/[A-Z]/)[0]}`} className=\"cursor-pointer flex-shrink-0\">\n                      <div className=\"w-28 h-28\">\n                        <img\n                          src={item.image}\n                          alt={item.name}\n                          className=\"w-full h-full object-cover object-top rounded-lg\"\n                        />\n                      </div>\n                    </Link>\n\n                    <div className=\"flex-1 flex flex-col justify-between\">\n                      <div>\n                        <Link to={`/product/${item.id.split(/[A-Z]/)[0]}`} className=\"cursor-pointer\">\n                          <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white mb-2 hover:text-pink-500 transition-colors\">\n                            {item.name}\n                          </h3>\n                        </Link>\n                        <div className=\"flex flex-wrap gap-3 mb-3\">\n                          {item.size && (\n                            <span className=\"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full\">\n                              Tamanho: <strong>{item.size}</strong>\n                            </span>\n                          )}\n                          {item.color && (\n                            <span className=\"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full\">\n                              Cor: <strong>{item.color}</strong>\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center justify-between\">\n                        <p className=\"text-2xl font-bold text-pink-500 dark:text-pink-400\">\n                          ‚Ç¨{(item.price * item.quantity).toFixed(2)}\n                        </p>\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 rounded-lg p-1\">\n                            <button\n                              onClick={() => updateQuantity(item.id, item.quantity - 1, item.size, item.color)}\n                              disabled={item.quantity <= 1}\n                              className=\"w-9 h-9 flex items-center justify-center hover:bg-white dark:hover:bg-gray-600 rounded-md transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                              aria-label=\"Diminuir quantidade\"\n                            >\n                              <i className=\"ri-subtract-line text-lg text-gray-700 dark:text-gray-300\"></i>\n                            </button>\n                            <span className=\"text-base font-semibold w-10 text-center text-gray-800 dark:text-white\">\n                              {item.quantity}\n                            </span>\n                            <button\n                              onClick={() => updateQuantity(item.id, item.quantity + 1, item.size, item.color)}\n                              className=\"w-9 h-9 flex items-center justify-center hover:bg-white dark:hover:bg-gray-600 rounded-md transition-colors cursor-pointer\"\n                              aria-label=\"Aumentar quantidade\"\n                            >\n                              <i className=\"ri-add-line text-lg text-gray-700 dark:text-gray-300\"></i>\n                            </button>\n                          </div>\n                          <button\n                            onClick={() => removeFromCart(item.id, item.size, item.color)}\n                            className=\"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors cursor-pointer\"\n                            aria-label=\"Remover produto\"\n                            title=\"Remover produto\"\n                          >\n                            <i className=\"ri-delete-bin-line text-xl\"></i>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Sugest√µes de Produtos - DO DATABASE */}\n              {recommendedProducts.length > 0 && (\n                <div className=\"mt-10\">\n                  <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-6\">Talvez tamb√©m goste</h2>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    {recommendedProducts.map((product) => {\n                      const productPrice = product.is_on_sale && product.sale_price ? product.sale_price : product.price;\n                      const hasDiscount = product.is_on_sale && product.sale_price && product.sale_price < product.price;\n                      \n                      return (\n                        <Link\n                          key={product.id}\n                          to={`/product/${product.id}`}\n                          className=\"group cursor-pointer\"\n                        >\n                          <div className=\"bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden mb-3 aspect-square relative\">\n                            <img\n                              src={product.images?.[0] || product.image_url || 'https://readdy.ai/api/search-image?query=elegant%20feminine%20fashion%20product%20simple%20white%20background%20luxury%20style%20modern%20aesthetic%20soft%20lighting&width=300&height=300&seq=suggest1&orientation=squarish'}\n                              alt={product.name_pt || product.name}\n                              className=\"w-full h-full object-cover object-top group-hover:scale-105 transition-transform duration-300\"\n                            />\n                            {hasDiscount && product.discount_percentage > 0 && (\n                              <div className=\"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-rose-500 text-white px-2 py-1 rounded-full text-xs font-bold\">\n                                -{product.discount_percentage}%\n                              </div>\n                            )}\n                          </div>\n                          <p className=\"text-sm font-medium text-gray-800 dark:text-white mb-1 line-clamp-2\">\n                            {product.name_pt || product.name}\n                          </p>\n                          <div className=\"flex items-center gap-2\">\n                            {hasDiscount ? (\n                              <>\n                                <p className=\"text-base font-bold text-pink-500 dark:text-pink-400\">\n                                  ‚Ç¨{productPrice.toFixed(2)}\n                                </p>\n                                <p className=\"text-xs text-gray-400 line-through\">\n                                  ‚Ç¨{product.price.toFixed(2)}\n                                </p>\n                              </>\n                            ) : (\n                              <p className=\"text-base font-bold text-pink-500 dark:text-pink-400\">\n                                ‚Ç¨{productPrice.toFixed(2)}\n                              </p>\n                            )}\n                          </div>\n                        </Link>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Coluna Direita - Resumo */}\n            <div className=\"lg:col-span-1\">\n              <div className=\"bg-gradient-to-br from-pink-50 to-rose-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 border border-pink-100 dark:border-gray-700 sticky top-32\">\n                <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-6\">\n                  Resumo da Encomenda\n                </h2>\n\n                {/* Barra de Progresso - Envio Gr√°tis */}\n                <div className=\"bg-white dark:bg-gray-900 rounded-xl p-4 mb-6 border border-pink-200 dark:border-gray-600\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-8 h-8 flex items-center justify-center\">\n                        <i className=\"ri-truck-line text-2xl text-pink-500 dark:text-pink-400\"></i>\n                      </div>\n                      <span className=\"text-sm font-semibold text-gray-800 dark:text-white\">\n                        {total >= actualFreeShippingThreshold ? (\n                          <span className=\"text-green-600 dark:text-green-400\">üéâ Envio gratuito!</span>\n                        ) : (\n                          <span>\n                            Faltam <span className=\"text-pink-500 dark:text-pink-400 font-bold\">‚Ç¨{remainingForFreeShipping.toFixed(2)}</span> at√© envio gr√°tis\n                          </span>\n                        )}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"relative w-full h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden\">\n                    <div\n                      className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-pink-400 to-rose-400 transition-all duration-500 ease-out rounded-full\"\n                      style={{ width: `${progressPercentage}%` }}\n                    ></div>\n                  </div>\n                </div>\n\n                <div className=\"space-y-4 mb-6\">\n                  <div className=\"flex justify-between text-base\">\n                    <span className=\"text-gray-700 dark:text-gray-300\">Subtotal</span>\n                    <span className=\"font-semibold text-gray-800 dark:text-white\">\n                      ‚Ç¨{total.toFixed(2)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between text-base\">\n                    <span className=\"text-gray-700 dark:text-gray-300\">Envio</span>\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400 italic\">\n                      Calculado no checkout\n                    </span>\n                  </div>\n                  \n                  {/* Aviso informativo sobre envio */}\n                  <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n                    <div className=\"flex items-start\">\n                      <i className=\"ri-information-line text-blue-600 dark:text-blue-400 mr-2 mt-0.5\"></i>\n                      <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                        O custo de envio ser√° calculado ap√≥s inserir o endere√ßo de entrega no checkout\n                      </p>\n                    </div>\n                  </div>\n                  \n                  {/* üî• IVA - N√ÉO MOSTRAR NO CARRINHO */}\n                  {/* O IVA ser√° mostrado apenas no checkout */}\n                  \n                  <div className=\"border-t border-pink-200 dark:border-gray-600 pt-4 flex justify-between items-center\">\n                    <span className=\"text-lg font-bold text-gray-800 dark:text-white\">\n                      Total Estimado\n                    </span>\n                    <span className=\"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent\">\n                      ‚Ç¨{total.toFixed(2)}\n                    </span>\n                  </div>\n                  \n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center\">\n                    + envio (a calcular no checkout)\n                  </p>\n                </div>\n\n                {showLoginMessage && (\n                  <div className=\"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg\">\n                    <p className=\"text-sm text-yellow-800 dark:text-yellow-300 text-center\">\n                      Para finalizar a compra, √© necess√°rio iniciar sess√£o ou criar uma conta.\n                    </p>\n                  </div>\n                )}\n\n                <button\n                  onClick={() => navigate('/checkout')}\n                  disabled={items.length === 0}\n                  className=\"w-full px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-xl hover:from-blue-600 hover:to-cyan-600 hover:shadow-2xl hover:scale-105 transition-all duration-300 font-bold text-lg whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed disabled:scale-100 shadow-lg transform active:scale-95\"\n                >\n                  Finalizar Compra\n                </button>\n\n                <Link\n                  to=\"/products\"\n                  className=\"block w-full px-6 py-3 mt-4 border-2 border-pink-400 dark:border-pink-500 text-pink-500 dark:text-pink-400 text-center rounded-xl hover:bg-pink-50 dark:hover:bg-pink-900/20 transition-colors text-base font-semibold whitespace-nowrap cursor-pointer\"\n                >\n                  Continuar a Comprar\n                </Link>\n\n                {/* Garantias de Confian√ßa */}\n                <div className=\"mt-8 pt-6 border-t border-pink-200 dark:border-gray-600\">\n                  <h3 className=\"text-sm font-bold text-gray-800 dark:text-white mb-4 text-center\">M√©todos de Pagamento Aceites</h3>\n                  <div className=\"flex items-center justify-center gap-3 mb-6 flex-wrap\">\n                    <div className=\"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n                      <i className=\"ri-visa-line text-2xl text-blue-600\"></i>\n                    </div>\n                    <div className=\"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n                      <i className=\"ri-mastercard-line text-2xl text-orange-600\"></i>\n                    </div>\n                    <div className=\"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n                      <i className=\"ri-google-line text-2xl text-red-600\"></i>\n                    </div>\n                    <div className=\"w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n                      <i className=\"ri-apple-line text-2xl text-gray-800 dark:text-white\"></i>\n                    </div>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 flex items-center justify-center\">\n                        <i className=\"ri-shield-check-line text-xl text-green-600 dark:text-green-400\"></i>\n                      </div>\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Pagamento seguro</span>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 flex items-center justify-center\">\n                        <i className=\"ri-truck-line text-xl text-blue-600 dark:text-blue-400\"></i>\n                      </div>\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Envio r√°pido</span>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 flex items-center justify-center\">\n                        <i className=\"ri-arrow-left-right-line text-xl text-purple-600 dark:text-purple-400\"></i>\n                      </div>\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Devolu√ß√µes simples</span>\n                    </div>\n                  </div>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400 text-center mt-4\">\n                    A sua compra est√° protegida.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["CartPage","t","useTranslation","items","removeFromCart","updateQuantity","total","useCart","user","useAuth","navigate","useNavigate","showLoginMessage","setShowLoginMessage","useState","shippingSettings","setShippingSettings","vatSettings","setVatSettings","shippingCost","setShippingCost","freeShippingThreshold","setFreeShippingThreshold","vatAmount","setVatAmount","vatEnabled","setVatEnabled","vatIncluded","setVatIncluded","recommendedProducts","setRecommendedProducts","useEffect","loadShippingAndVatSettings","loadRecommendedProducts","data","error","supabase","settings","defaultZone","z","acc","item","actualFreeShippingThreshold","remainingForFreeShipping","progressPercentage","jsxs","jsx","Header","Link","Footer","product","productPrice","hasDiscount","Fragment"],"mappings":"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"}