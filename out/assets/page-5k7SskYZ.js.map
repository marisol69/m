{"version":3,"file":"page-5k7SskYZ.js","sources":["../../src/pages/products/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Header } from '../../components/base/Header';\nimport { Footer } from '../../components/base/Footer';\nimport { supabase } from '../../lib/supabase';\nimport { Link, useNavigate, useSearchParams } from 'react-router-dom';\nimport { useCart } from '../../contexts/CartContext';\nimport { useFavorites } from '../../contexts/FavoritesContext';\n\ninterface Category {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  image_url: string;\n}\n\ninterface Subcategory {\n  id: string;\n  category_id: string;\n  name: string;\n  description: string;\n  image_url: string;\n}\n\ninterface Product {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  discount_price: number | null;\n  image_url: string;\n  category_id: string;\n  subcategory_id: string;\n  colors: string[];\n  sizes: string[];\n  stock: number;\n}\n\nexport default function ProductsPage() {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [subcategories, setSubcategories] = useState<Subcategory[]>([]);\n  const [products, setProducts] = useState<Product[]>([]);\n  const [filteredProducts, setFilteredProducts] = useState<Product[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [selectedSubcategory, setSelectedSubcategory] = useState<string | null>(null);\n  const [expandedCategories, setExpandedCategories] = useState<string[]>([]);\n  const [showFilters, setShowFilters] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const productsPerPage = 12;\n  \n  const { addToCart } = useCart();\n  const { addToFavorites, removeFromFavorites, isFavorite } = useFavorites();\n  const [notification, setNotification] = useState<{ type: 'cart' | 'favorite'; show: boolean }>({ type: 'cart', show: false });\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n\n  // Filtros\n  const [selectedColors, setSelectedColors] = useState<string[]>([]);\n  const [selectedSizes, setSelectedSizes] = useState<string[]>([]);\n  const [priceRange, setPriceRange] = useState<[number, number]>([0, 200]);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  // ｧ PALAVRAS-CHAVE INTELIGENTES - Mesmo sistema do SearchBar\n  const smartKeywords: Record<string, string[]> = {\n    'vestido': ['vestido', 'dress', 'robe', 'kleid'],\n    'vestidos': ['vestido', 'dress', 'robe', 'kleid'],\n    'mala': ['mala', 'bolsa', 'bag', 'sac', 'tasche'],\n    'malas': ['mala', 'bolsa', 'bag', 'sac', 'tasche'],\n    'bolsa': ['mala', 'bolsa', 'bag', 'sac', 'tasche'],\n    'bolsas': ['mala', 'bolsa', 'bag', 'sac', 'tasche'],\n    'sapato': ['sapato', 'shoe', 'chaussure', 'schuh', 'tﾃｩnis', 'bota'],\n    'sapatos': ['sapato', 'shoe', 'chaussure', 'schuh', 'tﾃｩnis', 'bota'],\n    'tﾃｩnis': ['tﾃｩnis', 'sneaker', 'sapato', 'shoe'],\n    'bota': ['bota', 'boot', 'sapato'],\n    'botas': ['bota', 'boot', 'sapato'],\n    'perfume': ['perfume', 'fragrance', 'parfum'],\n    'perfumes': ['perfume', 'fragrance', 'parfum'],\n    'maquilhagem': ['maquilhagem', 'makeup', 'maquillage', 'cosmetic'],\n    'makeup': ['maquilhagem', 'makeup', 'maquillage', 'cosmetic'],\n    'cosmﾃｩtico': ['maquilhagem', 'makeup', 'cosmetic', 'beauty'],\n    'acessﾃｳrio': ['acessﾃｳrio', 'accessory', 'bijuteria', 'joia'],\n    'acessﾃｳrios': ['acessﾃｳrio', 'accessory', 'bijuteria', 'joia'],\n    'joia': ['joia', 'jewelry', 'acessﾃｳrio', 'bijuteria'],\n    'joias': ['joia', 'jewelry', 'acessﾃｳrio', 'bijuteria'],\n    'colar': ['colar', 'necklace', 'joia', 'acessﾃｳrio'],\n    'brinco': ['brinco', 'earring', 'joia', 'acessﾃｳrio'],\n    'brincos': ['brinco', 'earring', 'joia', 'acessﾃｳrio'],\n    'anel': ['anel', 'ring', 'joia', 'acessﾃｳrio'],\n    'anﾃｩis': ['anel', 'ring', 'joia', 'acessﾃｳrio'],\n    'pulseira': ['pulseira', 'bracelet', 'joia', 'acessﾃｳrio'],\n    'camisa': ['camisa', 'shirt', 'blusa', 'top'],\n    'camisas': ['camisa', 'shirt', 'blusa', 'top'],\n    'blusa': ['blusa', 'top', 'camisa', 'shirt'],\n    'blusas': ['blusa', 'top', 'camisa', 'shirt'],\n    'top': ['top', 'blusa', 'camisa'],\n    'calﾃｧa': ['calﾃｧa', 'pants', 'jean', 'trouser'],\n    'calﾃｧas': ['calﾃｧa', 'pants', 'jean', 'trouser'],\n    'jean': ['jean', 'calﾃｧa', 'denim', 'pants'],\n    'jeans': ['jean', 'calﾃｧa', 'denim', 'pants'],\n    'saia': ['saia', 'skirt', 'jupe'],\n    'saias': ['saia', 'skirt', 'jupe'],\n    'casaco': ['casaco', 'jacket', 'coat', 'veste'],\n    'casacos': ['casaco', 'jacket', 'coat', 'veste'],\n    'jacket': ['casaco', 'jacket', 'coat'],\n  };\n\n  useEffect(() => {\n    fetchCategories();\n    fetchSubcategories();\n    loadProducts();\n  }, []);\n\n  useEffect(() => {\n    // Obter termo de pesquisa da URL\n    const search = searchParams.get('search');\n    if (search) {\n      setSearchQuery(search);\n    } else {\n      setSearchQuery('');\n    }\n    \n    // Obter categoria da URL\n    const categoryParam = searchParams.get('category');\n    if (categoryParam && categories.length > 0) {\n      const cat = categories.find(c => \n        c.name.toLowerCase() === categoryParam.toLowerCase() ||\n        c.slug?.toLowerCase() === categoryParam.toLowerCase()\n      );\n      if (cat) {\n        setSelectedCategory(cat.id);\n        setExpandedCategories([cat.id]);\n      } else {\n        setSelectedCategory(null);\n      }\n    } else {\n      setSelectedCategory(null);\n    }\n  }, [searchParams, categories]);\n\n  useEffect(() => {\n    applyFilters();\n  }, [products, selectedCategory, selectedSubcategory, selectedColors, selectedSizes, priceRange, searchQuery]);\n\n  const fetchCategories = async () => {\n    const { data, error } = await supabase\n      .from('categories')\n      .select('*')\n      .order('name');\n    \n    if (!error && data) {\n      setCategories(data);\n    }\n  };\n\n  const fetchSubcategories = async () => {\n    const { data, error } = await supabase\n      .from('subcategories')\n      .select('*')\n      .order('name');\n    \n    if (!error && data) {\n      setSubcategories(data);\n    }\n  };\n\n  const loadProducts = async () => {\n    try {\n      setLoading(true);\n      \n      // 櫨 CARREGAR TODOS OS PRODUTOS ATIVOS\n      const { data, error } = await supabase\n        .from('products')\n        .select('*')\n        .eq('is_active', true);\n\n      if (error) throw error;\n\n      // Formatar produtos com nome correto baseado no idioma\n      const formattedProducts = data?.map((product: any) => ({\n        ...product,\n        name: product.name_pt || product.name_en || product.name_fr || product.name_de || 'Produto',\n        description: product.description_pt || product.description_en || product.description_fr || product.description_de || '',\n        image: product.images?.[0] || '',\n      })) || [];\n\n      setProducts(formattedProducts);\n      setLoading(false);\n    } catch (error) {\n      console.error('Erro ao carregar produtos:', error);\n      setLoading(false);\n    }\n  };\n\n  const applyFilters = () => {\n    let filtered = [...products];\n\n    // 櫨 FILTRO DE PESQUISA INTELIGENTE COM SISTEMA DE PONTUAﾃﾃグ\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n      \n      // Sistema de pontuaﾃｧﾃ｣o para relevﾃ｢ncia\n      const scoredProducts = filtered\n        .map(product => {\n          const name = (product.name || '').toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n          const description = (product.description || '').toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n          let score = 0;\n\n          // 識 PONTUAﾃﾃグ POR CORRESPONDﾃ劾CIA EXATA NO NOME\n          if (name === query) {\n            score = 1000;\n          }\n          // 識 PONTUAﾃﾃグ POR INﾃ垢IO DO NOME\n          else if (name.startsWith(query)) {\n            score = 500;\n          }\n          // 識 PONTUAﾃﾃグ POR INCLUSﾃグ NO NOME\n          else if (name.includes(query)) {\n            score = 100;\n          }\n          // 識 PONTUAﾃﾃグ POR INCLUSﾃグ NA DESCRIﾃﾃグ\n          else if (description.includes(query)) {\n            score = 50;\n          }\n          // ｧ PONTUAﾃﾃグ POR PALAVRAS-CHAVE INTELIGENTES\n          else {\n            const keywords = smartKeywords[query] || [];\n            for (const keyword of keywords) {\n              const normalizedKeyword = keyword.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n              if (name.includes(normalizedKeyword)) {\n                score = 80; // Palavra-chave no nome\n                break;\n              } else if (description.includes(normalizedKeyword)) {\n                score = 40; // Palavra-chave na descriﾃｧﾃ｣o\n                break;\n              }\n            }\n          }\n\n          // 識 PONTUAﾃﾃグ ADICIONAL POR SIMILARIDADE DE PALAVRAS\n          if (score === 0) {\n            const queryWords = query.split(' ');\n            const nameWords = name.split(' ');\n            \n            for (const qWord of queryWords) {\n              if (qWord.length >= 3) {\n                for (const nWord of nameWords) {\n                  // Verifica se palavras compartilham 70%+ dos caracteres\n                  if (nWord.includes(qWord.substring(0, Math.ceil(qWord.length * 0.7)))) {\n                    score = 30;\n                    break;\n                  }\n                }\n              }\n            }\n          }\n\n          return { product, score };\n        })\n        .filter(item => item.score > 0) // Apenas produtos com alguma relevﾃ｢ncia\n        .sort((a, b) => b.score - a.score) // Ordenar por relevﾃ｢ncia\n        .map(item => item.product);\n\n      filtered = scoredProducts;\n    }\n\n    // FILTRO DE CATEGORIA\n    if (selectedCategory) {\n      filtered = filtered.filter(p => p.category_id === selectedCategory);\n    }\n\n    // FILTRO DE SUBCATEGORIA\n    if (selectedSubcategory) {\n      filtered = filtered.filter(p => p.subcategory_id === selectedSubcategory);\n    }\n\n    // FILTRO DE CORES\n    if (selectedColors.length > 0) {\n      filtered = filtered.filter(p => \n        p.colors && p.colors.some(c => selectedColors.includes(c))\n      );\n    }\n\n    // FILTRO DE TAMANHOS\n    if (selectedSizes.length > 0) {\n      filtered = filtered.filter(p => \n        p.sizes && p.sizes.some(s => selectedSizes.includes(s))\n      );\n    }\n\n    // FILTRO DE PREﾃ⑯\n    filtered = filtered.filter(p => {\n      const price = p.sale_price || p.discount_price || p.price;\n      return price >= priceRange[0] && price <= priceRange[1];\n    });\n\n    setFilteredProducts(filtered);\n    setCurrentPage(1);\n  };\n\n  const toggleCategory = (categoryId: string) => {\n    if (expandedCategories.includes(categoryId)) {\n      setExpandedCategories(expandedCategories.filter(id => id !== categoryId));\n    } else {\n      setExpandedCategories([...expandedCategories, categoryId]);\n    }\n  };\n\n  const handleCategoryClick = (categoryId: string) => {\n    setSelectedCategory(categoryId);\n    setSelectedSubcategory(null);\n    setSearchQuery(''); // Limpar pesquisa ao selecionar categoria\n    navigate('/products?category=' + categories.find(c => c.id === categoryId)?.slug || categoryId);\n    \n    if (!expandedCategories.includes(categoryId)) {\n      setExpandedCategories([...expandedCategories, categoryId]);\n    }\n  };\n\n  const handleSubcategoryClick = (subcategoryId: string) => {\n    setSelectedSubcategory(subcategoryId);\n  };\n\n  const clearFilters = () => {\n    setSelectedCategory(null);\n    setSelectedSubcategory(null);\n    setSelectedColors([]);\n    setSelectedSizes([]);\n    setPriceRange([0, 200]);\n    setExpandedCategories([]);\n    setSearchQuery('');\n    navigate('/products');\n  };\n\n  const handleAddToCart = (product: any) => {\n    // Usar preﾃｧo promocional se existir, senﾃ｣o usar preﾃｧo normal\n    const finalPrice = product.sale_price || product.discount_price || product.price;\n    \n    addToCart({\n      id: product.id,\n      name: product.name,\n      price: finalPrice,\n      image: product.images?.[0] || product.image_url || 'https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait',\n      quantity: 1,\n    });\n    setNotification({ type: 'cart', show: true });\n    setTimeout(() => setNotification({ type: 'cart', show: false }), 3000);\n  };\n\n  const handleBuyNow = (product: any) => {\n    // Usar preﾃｧo promocional se existir, senﾃ｣o usar preﾃｧo normal\n    const finalPrice = product.sale_price || product.discount_price || product.price;\n    \n    addToCart({\n      id: product.id,\n      name: product.name,\n      price: finalPrice,\n      image: product.images?.[0] || product.image_url || 'https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait',\n      quantity: 1,\n    });\n    navigate('/checkout');\n  };\n\n  const toggleFavorite = (product: any) => {\n    if (isFavorite(product.id)) {\n      removeFromFavorites(product.id);\n    } else {\n      addToFavorites({\n        id: product.id,\n        name: product.name,\n        price: product.price,\n        image: product.images?.[0] || product.image_url || 'https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait',\n      });\n      setNotification({ type: 'favorite', show: true });\n      setTimeout(() => setNotification({ type: 'favorite', show: false }), 3000);\n    }\n  };\n\n  // Paginaﾃｧﾃ｣o\n  const indexOfLastProduct = currentPage * productsPerPage;\n  const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\n  const currentProducts = filteredProducts.slice(indexOfFirstProduct, indexOfLastProduct);\n  const totalPages = Math.ceil(filteredProducts.length / productsPerPage);\n\n  const allColors = ['Preto', 'Branco', 'Vermelho', 'Rosa', 'Azul', 'Verde', 'Amarelo', 'Laranja', 'Roxo', 'Cinza', 'Bege', 'Castanho'];\n  const allSizes = ['XS', 'S', 'M', 'L', 'XL', 'ﾃ嗜ico'];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-rose-50/30 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950\">\n      <Header />\n\n      {/* Notification */}\n      {notification.show && (\n        <div className=\"fixed top-24 right-4 z-50 animate-slide-up\">\n          <div className=\"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-4 flex items-center gap-3 border border-pink-200 dark:border-pink-900\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full flex items-center justify-center\">\n              <i className={`${notification.type === 'cart' ? 'ri-shopping-cart-line' : 'ri-heart-line'} text-white text-xl`}></i>\n            </div>\n            <div>\n              <p className=\"text-sm font-bold text-gray-900 dark:text-white\">\n                {notification.type === 'cart' ? 'Adicionado ao Carrinho!' : 'Adicionado aos Favoritos!'}\n              </p>\n              <p className=\"text-xs text-gray-600 dark:text-gray-400\">Produto adicionado com sucesso</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"pt-32 pb-20 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            {/* Sidebar - Categorias - STICKY */}\n            <div className=\"lg:w-64 flex-shrink-0\">\n              <div className=\"lg:sticky lg:top-32 lg:max-h-[calc(100vh-8rem)] lg:overflow-y-auto\">\n                {/* Mobile Filter Button */}\n                <button\n                  onClick={() => setShowFilters(!showFilters)}\n                  className=\"lg:hidden w-full mb-4 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2\"\n                >\n                  <i className=\"ri-filter-3-line text-xl\"></i>\n                  {showFilters ? 'Ocultar Filtros' : 'Mostrar Filtros'}\n                </button>\n\n                <div className={`${showFilters ? 'block' : 'hidden'} lg:block bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl p-6 border border-pink-100 dark:border-slate-700`}>\n                  <div className=\"flex items-center justify-between mb-6\">\n                    <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">Categorias</h2>\n                    {(selectedCategory || selectedSubcategory || selectedColors.length > 0 || selectedSizes.length > 0) && (\n                      <button\n                        onClick={clearFilters}\n                        className=\"text-xs text-pink-600 dark:text-pink-400 hover:underline\"\n                      >\n                        Limpar\n                      </button>\n                    )}\n                  </div>\n\n                  {/* Categorias */}\n                  <div className=\"space-y-2 mb-6\">\n                    {categories.map((category) => {\n                      const categorySubcategories = subcategories.filter(s => s.category_id === category.id);\n                      const isExpanded = expandedCategories.includes(category.id);\n                      \n                      return (\n                        <div key={category.id}>\n                          <button\n                            onClick={() => handleCategoryClick(category.id)}\n                            className={`w-full text-left px-4 py-3 rounded-xl transition-all duration-300 flex items-center justify-between ${\n                              selectedCategory === category.id\n                                ? 'bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg'\n                                : 'bg-gray-50 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-600'\n                            }`}\n                          >\n                            <span className=\"font-semibold text-sm\">{category.name}</span>\n                            <i className={`ri-arrow-${isExpanded ? 'up' : 'down'}-s-line text-lg`}></i>\n                          </button>\n\n                          {/* Subcategorias */}\n                          {isExpanded && categorySubcategories.length > 0 && (\n                            <div className=\"ml-4 mt-2 space-y-1\">\n                              {categorySubcategories.map((subcategory) => (\n                                <button\n                                  key={subcategory.id}\n                                  onClick={() => handleSubcategoryClick(subcategory.id)}\n                                  className={`w-full text-left px-3 py-2 rounded-lg text-sm transition-all duration-300 ${\n                                    selectedSubcategory === subcategory.id\n                                      ? 'bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 font-semibold'\n                                      : 'text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-600'\n                                  }`}\n                                >\n                                  {subcategory.name}\n                                </button>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      );\n                    })}\n                  </div>\n\n                  {/* Filtro de Cores */}\n                  <div className=\"mb-6 pb-6 border-b border-gray-200 dark:border-slate-700\">\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white mb-3\">Cores</h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {allColors.map((color) => (\n                        <button\n                          key={color}\n                          onClick={() => {\n                            if (selectedColors.includes(color)) {\n                              setSelectedColors(selectedColors.filter(c => c !== color));\n                            } else {\n                              setSelectedColors([...selectedColors, color]);\n                            }\n                          }}\n                          className={`px-3 py-1 rounded-full text-xs font-semibold transition-all duration-300 ${\n                            selectedColors.includes(color)\n                              ? 'bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg'\n                              : 'bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-600'\n                          }`}\n                        >\n                          {color}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Filtro de Tamanhos */}\n                  <div className=\"mb-6 pb-6 border-b border-gray-200 dark:border-slate-700\">\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white mb-3\">Tamanhos</h3>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {allSizes.map((size) => (\n                        <button\n                          key={size}\n                          onClick={() => {\n                            if (selectedSizes.includes(size)) {\n                              setSelectedSizes(selectedSizes.filter(s => s !== size));\n                            } else {\n                              setSelectedSizes([...selectedSizes, size]);\n                            }\n                          }}\n                          className={`px-3 py-1 rounded-full text-xs font-semibold transition-all duration-300 ${\n                            selectedSizes.includes(size)\n                              ? 'bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg'\n                              : 'bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-600'\n                          }`}\n                        >\n                          {size}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Filtro de Preﾃｧo */}\n                  <div>\n                    <h3 className=\"text-sm font-bold text-gray-900 dark:text-white mb-3\">Preﾃｧo</h3>\n                    <div className=\"space-y-3\">\n                      <input\n                        type=\"range\"\n                        min=\"0\"\n                        max=\"200\"\n                        value={priceRange[1]}\n                        onChange={(e) => setPriceRange([0, parseInt(e.target.value)])}\n                        className=\"w-full accent-pink-500\"\n                      />\n                      <div className=\"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400\">\n                        <span>0竄ｬ</span>\n                        <span className=\"font-bold text-pink-600 dark:text-pink-400\">{priceRange[1]}竄ｬ</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Produtos */}\n            <div className=\"flex-1\">\n              <div className=\"mb-8\">\n                <h1 className=\"text-4xl font-bold text-gray-900 dark:text-white mb-2\">\n                  {searchQuery \n                    ? `Resultados para \"${searchQuery}\"`\n                    : selectedSubcategory \n                    ? subcategories.find(s => s.id === selectedSubcategory)?.name\n                    : selectedCategory\n                    ? categories.find(c => c.id === selectedCategory)?.name\n                    : 'Todos os Produtos'}\n                </h1>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  {filteredProducts.length} {filteredProducts.length === 1 ? 'produto encontrado' : 'produtos encontrados'}\n                </p>\n              </div>\n\n              {loading ? (\n                <div className=\"text-center py-20\">\n                  <div className=\"w-16 h-16 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto\"></div>\n                  <p className=\"text-gray-600 dark:text-gray-400 mt-4\">A carregar produtos...</p>\n                </div>\n              ) : currentProducts.length === 0 ? (\n                <div className=\"text-center py-20\">\n                  <div className=\"w-24 h-24 bg-gradient-to-br from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6\">\n                    <i className=\"ri-shopping-bag-line text-5xl text-pink-600 dark:text-pink-400\"></i>\n                  </div>\n                  <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">Nenhum produto encontrado</h3>\n                  <p className=\"text-gray-600 dark:text-gray-400 mb-6\">Tente ajustar os filtros</p>\n                  <button\n                    onClick={clearFilters}\n                    className=\"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300\"\n                  >\n                    Limpar Filtros\n                  </button>\n                </div>\n              ) : (\n                <>\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mb-8\">\n                    {currentProducts.map((product) => {\n                      // Calcular desconto se houver preﾃｧo promocional\n                      const hasDiscount = product.sale_price || product.discount_price;\n                      const discountPrice = product.sale_price || product.discount_price;\n                      const discountPercentage = hasDiscount && product.price > 0\n                        ? Math.round(((product.price - discountPrice) / product.price) * 100)\n                        : product.discount_percentage || 0;\n                      \n                      return (\n                        <div\n                          key={product.id}\n                          className=\"group bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-pink-100 dark:border-slate-700\"\n                        >\n                          <Link to={`/product/${product.id}`} className=\"block relative overflow-hidden\">\n                            <div className=\"relative w-full h-48 sm:h-56 lg:h-64 overflow-hidden\">\n                              <img\n                                src={product.images?.[0] || product.image_url || 'https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait'}\n                                alt={product.name}\n                                className=\"w-full h-full object-cover object-top group-hover:scale-105 transition-transform duration-300\"\n                                onError={(e) => {\n                                  const target = e.target as HTMLImageElement;\n                                  target.src = 'https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait';\n                                }}\n                              />\n                            </div>\n                            {hasDiscount && discountPercentage > 0 && (\n                              <div className=\"absolute top-3 left-3 bg-gradient-to-r from-red-500 to-rose-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg\">\n                                -{discountPercentage}%\n                              </div>\n                            )}\n                          </Link>\n\n                          <div className=\"p-3 sm:p-4\">\n                            <h3 className=\"text-sm sm:text-base font-semibold text-gray-800 dark:text-white mb-2 line-clamp-2\">\n                              {product.name}\n                            </h3>\n                            \n                            {/* Preﾃｧos - Mostrar preﾃｧo promocional se existir */}\n                            <div className=\"mb-3\">\n                              {hasDiscount ? (\n                                <div className=\"flex items-center gap-2 flex-wrap\">\n                                  <p className=\"text-base sm:text-lg font-bold text-pink-500 dark:text-pink-400\">\n                                    竄ｬ{discountPrice.toFixed(2)}\n                                  </p>\n                                  <p className=\"text-xs sm:text-sm text-gray-500 dark:text-gray-400 line-through\">\n                                    竄ｬ{product.price.toFixed(2)}\n                                  </p>\n                                </div>\n                              ) : (\n                                <p className=\"text-base sm:text-lg font-bold text-pink-500 dark:text-pink-400\">\n                                  竄ｬ{product.price.toFixed(2)}\n                                </p>\n                              )}\n                            </div>\n                            \n                            {/* Botﾃｵes de Aﾃｧﾃ｣o */}\n                            <div className=\"flex items-center gap-2\">\n                              <button\n                                onClick={(e) => {\n                                  e.preventDefault();\n                                  handleAddToCart(product);\n                                }}\n                                disabled={product.stock === 0}\n                                className=\"flex-1 px-3 py-2 bg-gradient-to-r from-pink-400 to-rose-400 dark:from-pink-500 dark:to-rose-500 text-white rounded-lg hover:from-pink-500 hover:to-rose-500 dark:hover:from-pink-600 dark:hover:to-rose-600 transition-all duration-300 font-semibold text-sm whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1\"\n                              >\n                                <i className=\"ri-shopping-cart-line\"></i>\n                                Carrinho\n                              </button>\n                              \n                              <button\n                                onClick={(e) => {\n                                  e.preventDefault();\n                                  handleBuyNow(product);\n                                }}\n                                disabled={product.stock === 0}\n                                className=\"flex-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-600 dark:to-cyan-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 dark:hover:from-blue-700 dark:hover:to-cyan-700 transition-all duration-300 font-semibold text-sm whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1\"\n                              >\n                                <i className=\"ri-flashlight-line\"></i>\n                                Comprar\n                              </button>\n                              \n                              <button\n                                onClick={(e) => {\n                                  e.preventDefault();\n                                  toggleFavorite(product);\n                                }}\n                                className=\"w-10 h-10 flex items-center justify-center border border-gray-300 dark:border-gray-600 rounded-lg hover:border-pink-400 dark:hover:border-pink-300 transition-colors cursor-pointer flex-shrink-0\"\n                              >\n                                <i\n                                  className={`text-lg ${\n                                    isFavorite(product.id)\n                                      ? 'ri-heart-fill text-pink-400 dark:text-pink-300'\n                                      : 'ri-heart-line text-gray-700 dark:text-gray-300'\n                                  }`}\n                                ></i>\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n\n                  {/* Paginaﾃｧﾃ｣o */}\n                  {totalPages > 1 && (\n                    <div className=\"flex items-center justify-center gap-2\">\n                      <button\n                        onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n                        disabled={currentPage === 1}\n                        className=\"px-4 py-2 rounded-xl bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pink-50 dark:hover:bg-slate-700 transition-all duration-300\"\n                      >\n                        <i className=\"ri-arrow-left-s-line\"></i>\n                      </button>\n\n                      {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                        <button\n                          key={page}\n                          onClick={() => setCurrentPage(page)}\n                          className={`px-4 py-2 rounded-xl font-bold transition-all duration-300 ${\n                            currentPage === page\n                              ? 'bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg'\n                              : 'bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-700'\n                          }`}\n                        >\n                          {page}\n                        </button>\n                      ))}\n\n                      <button\n                        onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n                        disabled={currentPage === totalPages}\n                        className=\"px-4 py-2 rounded-xl bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pink-50 dark:hover:bg-slate-700 transition-all duration-300\"\n                      >\n                        <i className=\"ri-arrow-right-s-line\"></i>\n                      </button>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["ProductsPage","categories","setCategories","useState","subcategories","setSubcategories","products","setProducts","filteredProducts","setFilteredProducts","selectedCategory","setSelectedCategory","selectedSubcategory","setSelectedSubcategory","expandedCategories","setExpandedCategories","showFilters","setShowFilters","currentPage","setCurrentPage","loading","setLoading","productsPerPage","addToCart","useCart","addToFavorites","removeFromFavorites","isFavorite","useFavorites","notification","setNotification","navigate","useNavigate","searchParams","useSearchParams","selectedColors","setSelectedColors","selectedSizes","setSelectedSizes","priceRange","setPriceRange","searchQuery","setSearchQuery","smartKeywords","useEffect","fetchCategories","fetchSubcategories","loadProducts","search","categoryParam","cat","c","applyFilters","data","error","supabase","formattedProducts","product","filtered","query","name","description","score","keywords","keyword","normalizedKeyword","queryWords","nameWords","qWord","nWord","item","a","b","p","s","price","handleCategoryClick","categoryId","handleSubcategoryClick","subcategoryId","clearFilters","handleAddToCart","finalPrice","handleBuyNow","toggleFavorite","indexOfLastProduct","indexOfFirstProduct","currentProducts","totalPages","allColors","allSizes","jsxs","jsx","Header","category","categorySubcategories","isExpanded","subcategory","color","size","Fragment","hasDiscount","discountPrice","discountPercentage","Link","e","target","prev","_","i","page","Footer"],"mappings":"gJAsCA,SAAwBA,IAAe,CACrC,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EACrD,CAACC,EAAeC,CAAgB,EAAIF,EAAAA,SAAwB,CAAA,CAAE,EAC9D,CAACG,EAAUC,CAAW,EAAIJ,EAAAA,SAAoB,CAAA,CAAE,EAChD,CAACK,EAAkBC,CAAmB,EAAIN,EAAAA,SAAoB,CAAA,CAAE,EAChE,CAACO,EAAkBC,CAAmB,EAAIR,EAAAA,SAAwB,IAAI,EACtE,CAACS,EAAqBC,CAAsB,EAAIV,EAAAA,SAAwB,IAAI,EAC5E,CAACW,EAAoBC,CAAqB,EAAIZ,EAAAA,SAAmB,CAAA,CAAE,EACnE,CAACa,EAAaC,CAAc,EAAId,EAAAA,SAAS,EAAK,EAC9C,CAACe,EAAaC,CAAc,EAAIhB,EAAAA,SAAS,CAAC,EAC1C,CAACiB,EAASC,CAAU,EAAIlB,EAAAA,SAAS,EAAI,EACrCmB,EAAkB,GAElB,CAAE,UAAAC,CAAA,EAAcC,GAAA,EAChB,CAAE,eAAAC,EAAgB,oBAAAC,EAAqB,WAAAC,CAAA,EAAeC,GAAA,EACtD,CAACC,EAAcC,CAAe,EAAI3B,EAAAA,SAAuD,CAAE,KAAM,OAAQ,KAAM,GAAO,EACtH4B,EAAWC,GAAA,EACX,CAACC,CAAY,EAAIC,GAAA,EAGjB,CAACC,EAAgBC,CAAiB,EAAIjC,EAAAA,SAAmB,CAAA,CAAE,EAC3D,CAACkC,EAAeC,CAAgB,EAAInC,EAAAA,SAAmB,CAAA,CAAE,EACzD,CAACoC,EAAYC,CAAa,EAAIrC,EAAAA,SAA2B,CAAC,EAAG,GAAG,CAAC,EACjE,CAACsC,EAAaC,CAAc,EAAIvC,EAAAA,SAAiB,EAAE,EAGnDwC,GAA0C,CAC9C,QAAW,CAAC,UAAW,QAAS,OAAQ,OAAO,EAC/C,SAAY,CAAC,UAAW,QAAS,OAAQ,OAAO,EAChD,KAAQ,CAAC,OAAQ,QAAS,MAAO,MAAO,QAAQ,EAChD,MAAS,CAAC,OAAQ,QAAS,MAAO,MAAO,QAAQ,EACjD,MAAS,CAAC,OAAQ,QAAS,MAAO,MAAO,QAAQ,EACjD,OAAU,CAAC,OAAQ,QAAS,MAAO,MAAO,QAAQ,EAClD,OAAU,CAAC,SAAU,OAAQ,YAAa,QAAS,QAAS,MAAM,EAClE,QAAW,CAAC,SAAU,OAAQ,YAAa,QAAS,QAAS,MAAM,EACnE,MAAS,CAAC,QAAS,UAAW,SAAU,MAAM,EAC9C,KAAQ,CAAC,OAAQ,OAAQ,QAAQ,EACjC,MAAS,CAAC,OAAQ,OAAQ,QAAQ,EAClC,QAAW,CAAC,UAAW,YAAa,QAAQ,EAC5C,SAAY,CAAC,UAAW,YAAa,QAAQ,EAC7C,YAAe,CAAC,cAAe,SAAU,aAAc,UAAU,EACjE,OAAU,CAAC,cAAe,SAAU,aAAc,UAAU,EAC5D,UAAa,CAAC,cAAe,SAAU,WAAY,QAAQ,EAC3D,UAAa,CAAC,YAAa,YAAa,YAAa,MAAM,EAC3D,WAAc,CAAC,YAAa,YAAa,YAAa,MAAM,EAC5D,KAAQ,CAAC,OAAQ,UAAW,YAAa,WAAW,EACpD,MAAS,CAAC,OAAQ,UAAW,YAAa,WAAW,EACrD,MAAS,CAAC,QAAS,WAAY,OAAQ,WAAW,EAClD,OAAU,CAAC,SAAU,UAAW,OAAQ,WAAW,EACnD,QAAW,CAAC,SAAU,UAAW,OAAQ,WAAW,EACpD,KAAQ,CAAC,OAAQ,OAAQ,OAAQ,WAAW,EAC5C,MAAS,CAAC,OAAQ,OAAQ,OAAQ,WAAW,EAC7C,SAAY,CAAC,WAAY,WAAY,OAAQ,WAAW,EACxD,OAAU,CAAC,SAAU,QAAS,QAAS,KAAK,EAC5C,QAAW,CAAC,SAAU,QAAS,QAAS,KAAK,EAC7C,MAAS,CAAC,QAAS,MAAO,SAAU,OAAO,EAC3C,OAAU,CAAC,QAAS,MAAO,SAAU,OAAO,EAC5C,IAAO,CAAC,MAAO,QAAS,QAAQ,EAChC,MAAS,CAAC,QAAS,QAAS,OAAQ,SAAS,EAC7C,OAAU,CAAC,QAAS,QAAS,OAAQ,SAAS,EAC9C,KAAQ,CAAC,OAAQ,QAAS,QAAS,OAAO,EAC1C,MAAS,CAAC,OAAQ,QAAS,QAAS,OAAO,EAC3C,KAAQ,CAAC,OAAQ,QAAS,MAAM,EAChC,MAAS,CAAC,OAAQ,QAAS,MAAM,EACjC,OAAU,CAAC,SAAU,SAAU,OAAQ,OAAO,EAC9C,QAAW,CAAC,SAAU,SAAU,OAAQ,OAAO,EAC/C,OAAU,CAAC,SAAU,SAAU,MAAM,CAAA,EAGvCC,EAAAA,UAAU,IAAM,CACdC,GAAA,EACAC,GAAA,EACAC,GAAA,CACF,EAAG,CAAA,CAAE,EAELH,EAAAA,UAAU,IAAM,CAEd,MAAMI,EAASf,EAAa,IAAI,QAAQ,EAEtCS,EADEM,GAGa,EAFM,EAMvB,MAAMC,EAAgBhB,EAAa,IAAI,UAAU,EACjD,GAAIgB,GAAiBhD,EAAW,OAAS,EAAG,CAC1C,MAAMiD,EAAMjD,EAAW,KAAKkD,GAC1BA,EAAE,KAAK,YAAA,IAAkBF,EAAc,YAAA,GACvCE,EAAE,MAAM,YAAA,IAAkBF,EAAc,YAAA,CAAY,EAElDC,GACFvC,EAAoBuC,EAAI,EAAE,EAC1BnC,EAAsB,CAACmC,EAAI,EAAE,CAAC,GAE9BvC,EAAoB,IAAI,CAE5B,MACEA,EAAoB,IAAI,CAE5B,EAAG,CAACsB,EAAchC,CAAU,CAAC,EAE7B2C,EAAAA,UAAU,IAAM,CACdQ,GAAA,CACF,EAAG,CAAC9C,EAAUI,EAAkBE,EAAqBuB,EAAgBE,EAAeE,EAAYE,CAAW,CAAC,EAE5G,MAAMI,GAAkB,SAAY,CAClC,KAAM,CAAE,KAAAQ,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,YAAY,EACjB,OAAO,GAAG,EACV,MAAM,MAAM,EAEX,CAACD,GAASD,GACZnD,EAAcmD,CAAI,CAEtB,EAEMP,GAAqB,SAAY,CACrC,KAAM,CAAE,KAAAO,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,eAAe,EACpB,OAAO,GAAG,EACV,MAAM,MAAM,EAEX,CAACD,GAASD,GACZhD,EAAiBgD,CAAI,CAEzB,EAEMN,GAAe,SAAY,CAC/B,GAAI,CACF1B,EAAW,EAAI,EAGf,KAAM,CAAE,KAAAgC,EAAM,MAAAC,GAAU,MAAMC,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,YAAa,EAAI,EAEvB,GAAID,EAAO,MAAMA,EAGjB,MAAME,EAAoBH,GAAM,IAAKI,IAAkB,CACrD,GAAGA,EACH,KAAMA,EAAQ,SAAWA,EAAQ,SAAWA,EAAQ,SAAWA,EAAQ,SAAW,UAClF,YAAaA,EAAQ,gBAAkBA,EAAQ,gBAAkBA,EAAQ,gBAAkBA,EAAQ,gBAAkB,GACrH,MAAOA,EAAQ,SAAS,CAAC,GAAK,EAAA,EAC9B,GAAK,CAAA,EAEPlD,EAAYiD,CAAiB,EAC7BnC,EAAW,EAAK,CAClB,OAASiC,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDjC,EAAW,EAAK,CAClB,CACF,EAEM+B,GAAe,IAAM,CACzB,IAAIM,EAAW,CAAC,GAAGpD,CAAQ,EAG3B,GAAImC,EAAY,OAAQ,CACtB,MAAMkB,EAAQlB,EAAY,cAAc,UAAU,KAAK,EAAE,QAAQ,mBAAoB,EAAE,EAgEvFiB,EA7DuBA,EACpB,IAAID,GAAW,CACd,MAAMG,GAAQH,EAAQ,MAAQ,IAAI,cAAc,UAAU,KAAK,EAAE,QAAQ,mBAAoB,EAAE,EACzFI,GAAeJ,EAAQ,aAAe,IAAI,cAAc,UAAU,KAAK,EAAE,QAAQ,mBAAoB,EAAE,EAC7G,IAAIK,EAAQ,EAGZ,GAAIF,IAASD,EACXG,EAAQ,YAGDF,EAAK,WAAWD,CAAK,EAC5BG,EAAQ,YAGDF,EAAK,SAASD,CAAK,EAC1BG,EAAQ,YAGDD,EAAY,SAASF,CAAK,EACjCG,EAAQ,OAGL,CACH,MAAMC,EAAWpB,GAAcgB,CAAK,GAAK,CAAA,EACzC,UAAWK,KAAWD,EAAU,CAC9B,MAAME,EAAoBD,EAAQ,cAAc,UAAU,KAAK,EAAE,QAAQ,mBAAoB,EAAE,EAC/F,GAAIJ,EAAK,SAASK,CAAiB,EAAG,CACpCH,EAAQ,GACR,KACF,SAAWD,EAAY,SAASI,CAAiB,EAAG,CAClDH,EAAQ,GACR,KACF,CACF,CACF,CAGA,GAAIA,IAAU,EAAG,CACf,MAAMI,EAAaP,EAAM,MAAM,GAAG,EAC5BQ,EAAYP,EAAK,MAAM,GAAG,EAEhC,UAAWQ,KAASF,EAClB,GAAIE,EAAM,QAAU,GAClB,UAAWC,MAASF,EAElB,GAAIE,GAAM,SAASD,EAAM,UAAU,EAAG,KAAK,KAAKA,EAAM,OAAS,EAAG,CAAC,CAAC,EAAG,CACrEN,EAAQ,GACR,KACF,EAIR,CAEA,MAAO,CAAE,QAAAL,EAAS,MAAAK,CAAA,CACpB,CAAC,EACA,OAAOQ,GAAQA,EAAK,MAAQ,CAAC,EAC7B,KAAK,CAACC,EAAGC,IAAMA,EAAE,MAAQD,EAAE,KAAK,EAChC,IAAID,GAAQA,EAAK,OAAO,CAG7B,CAGI5D,IACFgD,EAAWA,EAAS,OAAOe,GAAKA,EAAE,cAAgB/D,CAAgB,GAIhEE,IACF8C,EAAWA,EAAS,OAAOe,GAAKA,EAAE,iBAAmB7D,CAAmB,GAItEuB,EAAe,OAAS,IAC1BuB,EAAWA,EAAS,OAAOe,GACzBA,EAAE,QAAUA,EAAE,OAAO,KAAKtB,GAAKhB,EAAe,SAASgB,CAAC,CAAC,CAAA,GAKzDd,EAAc,OAAS,IACzBqB,EAAWA,EAAS,OAAOe,GACzBA,EAAE,OAASA,EAAE,MAAM,KAAKC,GAAKrC,EAAc,SAASqC,CAAC,CAAC,CAAA,GAK1DhB,EAAWA,EAAS,OAAOe,GAAK,CAC9B,MAAME,EAAQF,EAAE,YAAcA,EAAE,gBAAkBA,EAAE,MACpD,OAAOE,GAASpC,EAAW,CAAC,GAAKoC,GAASpC,EAAW,CAAC,CACxD,CAAC,EAED9B,EAAoBiD,CAAQ,EAC5BvC,EAAe,CAAC,CAClB,EAUMyD,GAAuBC,GAAuB,CAClDlE,EAAoBkE,CAAU,EAC9BhE,EAAuB,IAAI,EAC3B6B,EAAe,EAAE,EACjBX,EAAS,sBAAwB9B,EAAW,KAAKkD,GAAKA,EAAE,KAAO0B,CAAU,GAAG,MAAQA,CAAU,EAEzF/D,EAAmB,SAAS+D,CAAU,GACzC9D,EAAsB,CAAC,GAAGD,EAAoB+D,CAAU,CAAC,CAE7D,EAEMC,GAA0BC,GAA0B,CACxDlE,EAAuBkE,CAAa,CACtC,EAEMC,EAAe,IAAM,CACzBrE,EAAoB,IAAI,EACxBE,EAAuB,IAAI,EAC3BuB,EAAkB,CAAA,CAAE,EACpBE,EAAiB,CAAA,CAAE,EACnBE,EAAc,CAAC,EAAG,GAAG,CAAC,EACtBzB,EAAsB,CAAA,CAAE,EACxB2B,EAAe,EAAE,EACjBX,EAAS,WAAW,CACtB,EAEMkD,GAAmBxB,GAAiB,CAExC,MAAMyB,EAAazB,EAAQ,YAAcA,EAAQ,gBAAkBA,EAAQ,MAE3ElC,EAAU,CACR,GAAIkC,EAAQ,GACZ,KAAMA,EAAQ,KACd,MAAOyB,EACP,MAAOzB,EAAQ,SAAS,CAAC,GAAKA,EAAQ,WAAa,iQACnD,SAAU,CAAA,CACX,EACD3B,EAAgB,CAAE,KAAM,OAAQ,KAAM,GAAM,EAC5C,WAAW,IAAMA,EAAgB,CAAE,KAAM,OAAQ,KAAM,GAAO,EAAG,GAAI,CACvE,EAEMqD,GAAgB1B,GAAiB,CAErC,MAAMyB,EAAazB,EAAQ,YAAcA,EAAQ,gBAAkBA,EAAQ,MAE3ElC,EAAU,CACR,GAAIkC,EAAQ,GACZ,KAAMA,EAAQ,KACd,MAAOyB,EACP,MAAOzB,EAAQ,SAAS,CAAC,GAAKA,EAAQ,WAAa,iQACnD,SAAU,CAAA,CACX,EACD1B,EAAS,WAAW,CACtB,EAEMqD,GAAkB3B,GAAiB,CACnC9B,EAAW8B,EAAQ,EAAE,EACvB/B,EAAoB+B,EAAQ,EAAE,GAE9BhC,EAAe,CACb,GAAIgC,EAAQ,GACZ,KAAMA,EAAQ,KACd,MAAOA,EAAQ,MACf,MAAOA,EAAQ,SAAS,CAAC,GAAKA,EAAQ,WAAa,gQAAA,CACpD,EACD3B,EAAgB,CAAE,KAAM,WAAY,KAAM,GAAM,EAChD,WAAW,IAAMA,EAAgB,CAAE,KAAM,WAAY,KAAM,GAAO,EAAG,GAAI,EAE7E,EAGMuD,EAAqBnE,EAAcI,EACnCgE,GAAsBD,EAAqB/D,EAC3CiE,EAAkB/E,EAAiB,MAAM8E,GAAqBD,CAAkB,EAChFG,EAAa,KAAK,KAAKhF,EAAiB,OAASc,CAAe,EAEhEmE,GAAY,CAAC,QAAS,SAAU,WAAY,OAAQ,OAAQ,QAAS,UAAW,UAAW,OAAQ,QAAS,OAAQ,UAAU,EAC9HC,GAAW,CAAC,KAAM,IAAK,IAAK,IAAK,KAAM,OAAO,EAEpD,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAU,qIACb,SAAA,CAAAC,EAAAA,IAACC,GAAA,EAAO,EAGPhE,EAAa,MACZ+D,EAAAA,IAAC,MAAA,CAAI,UAAU,6CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,4HACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,sGACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAW,GAAG/D,EAAa,OAAS,OAAS,wBAA0B,eAAe,sBAAuB,EAClH,SACC,MAAA,CACC,SAAA,CAAA+D,EAAAA,IAAC,KAAE,UAAU,kDACV,WAAa,OAAS,OAAS,0BAA4B,2BAAA,CAC9D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,gCAAA,CAA8B,CAAA,CAAA,CACxF,CAAA,CAAA,CACF,CAAA,CACF,EAGFA,EAAAA,IAAC,MAAA,CAAI,UAAU,mCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAD,OAAC,MAAA,CAAI,UAAU,kCAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,wBACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,qEAEb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM1E,EAAe,CAACD,CAAW,EAC1C,UAAU,gMAEV,SAAA,CAAA4E,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAAA,CAA2B,EACvC5E,EAAc,kBAAoB,iBAAA,CAAA,CAAA,SAGpC,MAAA,CAAI,UAAW,GAAGA,EAAc,QAAU,QAAQ,qIACjD,SAAA,CAAA2E,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kDAAkD,SAAA,aAAU,GACxElF,GAAoBE,GAAuBuB,EAAe,OAAS,GAAKE,EAAc,OAAS,IAC/FuD,EAAAA,IAAC,SAAA,CACC,QAASZ,EACT,UAAU,2DACX,SAAA,QAAA,CAAA,CAED,EAEJ,QAGC,MAAA,CAAI,UAAU,iBACZ,SAAA/E,EAAW,IAAK6F,GAAa,CAC5B,MAAMC,EAAwB3F,EAAc,UAAY,EAAE,cAAgB0F,EAAS,EAAE,EAC/EE,EAAalF,EAAmB,SAASgF,EAAS,EAAE,EAE1D,cACG,MAAA,CACC,SAAA,CAAAH,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMf,GAAoBkB,EAAS,EAAE,EAC9C,UAAW,uGACTpF,IAAqBoF,EAAS,GAC1B,kEACA,wGACN,GAEA,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAyB,SAAAE,EAAS,KAAK,QACtD,IAAA,CAAE,UAAW,YAAYE,EAAa,KAAO,MAAM,iBAAA,CAAmB,CAAA,CAAA,CAAA,EAIxEA,GAAcD,EAAsB,OAAS,GAC5CH,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACZ,SAAAG,EAAsB,IAAKE,GAC1BL,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMd,GAAuBmB,EAAY,EAAE,EACpD,UAAW,6EACTrF,IAAwBqF,EAAY,GAChC,iFACA,4EACN,GAEC,SAAAA,EAAY,IAAA,EARRA,EAAY,EAAA,CAUpB,CAAA,CACH,CAAA,CAAA,EA7BMH,EAAS,EA+BnB,CAEJ,CAAC,CAAA,CACH,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uDAAuD,SAAA,QAAK,QACzE,MAAA,CAAI,UAAU,uBACZ,SAAAH,GAAU,IAAKS,GACdN,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAM,CACTzD,EAAe,SAAS+D,CAAK,EAC/B9D,EAAkBD,EAAe,OAAOgB,GAAKA,IAAM+C,CAAK,CAAC,EAEzD9D,EAAkB,CAAC,GAAGD,EAAgB+D,CAAK,CAAC,CAEhD,EACA,UAAW,4EACT/D,EAAe,SAAS+D,CAAK,EACzB,kEACA,yGACN,GAEC,SAAAA,CAAA,EAdIA,CAAA,CAgBR,CAAA,CACH,CAAA,EACF,EAGAP,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uDAAuD,SAAA,WAAQ,QAC5E,MAAA,CAAI,UAAU,uBACZ,SAAAF,GAAS,IAAKS,GACbP,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAM,CACTvD,EAAc,SAAS8D,CAAI,EAC7B7D,EAAiBD,EAAc,OAAOqC,GAAKA,IAAMyB,CAAI,CAAC,EAEtD7D,EAAiB,CAAC,GAAGD,EAAe8D,CAAI,CAAC,CAE7C,EACA,UAAW,4EACT9D,EAAc,SAAS8D,CAAI,EACvB,kEACA,yGACN,GAEC,SAAAA,CAAA,EAdIA,CAAA,CAgBR,CAAA,CACH,CAAA,EACF,SAGC,MAAA,CACC,SAAA,CAAAP,EAAAA,IAAC,KAAA,CAAG,UAAU,uDAAuD,SAAA,QAAK,EAC1ED,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,IAAI,IACJ,IAAI,MACJ,MAAOrD,EAAW,CAAC,EACnB,SAAW,GAAMC,EAAc,CAAC,EAAG,SAAS,EAAE,OAAO,KAAK,CAAC,CAAC,EAC5D,UAAU,wBAAA,CAAA,EAEZmD,EAAAA,KAAC,MAAA,CAAI,UAAU,6EACb,SAAA,CAAAC,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRD,EAAAA,KAAC,OAAA,CAAK,UAAU,6CAA8C,SAAA,CAAApD,EAAW,CAAC,EAAE,GAAA,CAAA,CAAC,CAAA,CAAA,CAC/E,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAoD,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wDACX,SAAAnD,EACG,oBAAoBA,CAAW,IAC/B7B,EACAR,EAAc,KAAKsE,GAAKA,EAAE,KAAO9D,CAAmB,GAAG,KACvDF,EACAT,EAAW,KAAKkD,GAAKA,EAAE,KAAOzC,CAAgB,GAAG,KACjD,mBAAA,CACN,EACAiF,EAAAA,KAAC,IAAA,CAAE,UAAU,mCACV,SAAA,CAAAnF,EAAiB,OAAO,IAAEA,EAAiB,SAAW,EAAI,qBAAuB,sBAAA,CAAA,CACpF,CAAA,EACF,EAECY,EACCuE,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,2FAAA,CAA4F,EAC3GA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,wBAAA,CAAsB,CAAA,EAC7E,EACEL,EAAgB,SAAW,EAC7BI,OAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,6JACb,eAAC,IAAA,CAAE,UAAU,iEAAiE,CAAA,CAChF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,4BAAyB,EAC/FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,2BAAwB,EAC7EA,EAAAA,IAAC,SAAA,CACC,QAASZ,EACT,UAAU,mIACX,SAAA,gBAAA,CAAA,CAED,CAAA,CACF,EAEAW,EAAAA,KAAAS,EAAAA,SAAA,CACE,SAAA,CAAAR,MAAC,OAAI,UAAU,sDACZ,SAAAL,EAAgB,IAAK9B,GAAY,CAEhC,MAAM4C,EAAc5C,EAAQ,YAAcA,EAAQ,eAC5C6C,EAAgB7C,EAAQ,YAAcA,EAAQ,eAC9C8C,EAAqBF,GAAe5C,EAAQ,MAAQ,EACtD,KAAK,OAAQA,EAAQ,MAAQ6C,GAAiB7C,EAAQ,MAAS,GAAG,EAClEA,EAAQ,qBAAuB,EAEnC,OACEkC,EAAAA,KAAC,MAAA,CAEC,UAAU,0LAEV,SAAA,CAAAA,EAAAA,KAACa,IAAK,GAAI,YAAY/C,EAAQ,EAAE,GAAI,UAAU,iCAC5C,SAAA,CAAAmC,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKnC,EAAQ,SAAS,CAAC,GAAKA,EAAQ,WAAa,iQACjD,IAAKA,EAAQ,KACb,UAAU,gGACV,QAAUgD,GAAM,CACd,MAAMC,EAASD,EAAE,OACjBC,EAAO,IAAM,gQACf,CAAA,CAAA,EAEJ,EACCL,GAAeE,EAAqB,GACnCZ,EAAAA,KAAC,MAAA,CAAI,UAAU,gIAAgI,SAAA,CAAA,IAC3IY,EAAmB,GAAA,CAAA,CACvB,CAAA,EAEJ,EAEAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qFACX,SAAAnC,EAAQ,KACX,EAGAmC,EAAAA,IAAC,OAAI,UAAU,OACZ,WACCD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,kEAAkE,SAAA,CAAA,IAC3EW,EAAc,QAAQ,CAAC,CAAA,EAC3B,EACAX,EAAAA,KAAC,IAAA,CAAE,UAAU,mEAAmE,SAAA,CAAA,IAC5ElC,EAAQ,MAAM,QAAQ,CAAC,CAAA,CAAA,CAC3B,CAAA,CAAA,CACF,EAEAkC,EAAAA,KAAC,IAAA,CAAE,UAAU,kEAAkE,SAAA,CAAA,IAC3ElC,EAAQ,MAAM,QAAQ,CAAC,CAAA,CAAA,CAC3B,CAAA,CAEJ,EAGAkC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAUc,GAAM,CACdA,EAAE,eAAA,EACFxB,GAAgBxB,CAAO,CACzB,EACA,SAAUA,EAAQ,QAAU,EAC5B,UAAU,wXAEV,SAAA,CAAAmC,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAA,CAAwB,EAAI,UAAA,CAAA,CAAA,EAI3CD,EAAAA,KAAC,SAAA,CACC,QAAUc,GAAM,CACdA,EAAE,eAAA,EACFtB,GAAa1B,CAAO,CACtB,EACA,SAAUA,EAAQ,QAAU,EAC5B,UAAU,wXAEV,SAAA,CAAAmC,EAAAA,IAAC,IAAA,CAAE,UAAU,oBAAA,CAAqB,EAAI,SAAA,CAAA,CAAA,EAIxCA,EAAAA,IAAC,SAAA,CACC,QAAUa,GAAM,CACdA,EAAE,eAAA,EACFrB,GAAe3B,CAAO,CACxB,EACA,UAAU,oMAEV,SAAAmC,EAAAA,IAAC,IAAA,CACC,UAAW,WACTjE,EAAW8B,EAAQ,EAAE,EACjB,iDACA,gDACN,EAAA,CAAA,CACD,CAAA,CACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAvFKA,EAAQ,EAAA,CA0FnB,CAAC,CAAA,CACH,EAGC+B,EAAa,GACZG,OAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMzE,EAAewF,GAAQ,KAAK,IAAIA,EAAO,EAAG,CAAC,CAAC,EAC3D,SAAUzF,IAAgB,EAC1B,UAAU,kNAEV,SAAA0E,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAA,CAAuB,CAAA,CAAA,EAGrC,MAAM,KAAK,CAAE,OAAQJ,GAAc,CAACoB,EAAGC,IAAMA,EAAI,CAAC,EAAE,IAAKC,GACxDlB,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAMzE,EAAe2F,CAAI,EAClC,UAAW,8DACT5F,IAAgB4F,EACZ,kEACA,sGACN,GAEC,SAAAA,CAAA,EARIA,CAAA,CAUR,EAEDlB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMzE,EAAewF,GAAQ,KAAK,IAAIA,EAAO,EAAGnB,CAAU,CAAC,EACpE,SAAUtE,IAAgBsE,EAC1B,UAAU,kNAEV,SAAAI,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACvC,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,EACF,EACF,QAECmB,GAAA,CAAA,CAAO,CAAA,EACV,CAEJ"}