import{r as i,a as xe,b as ue,u as pe,c as be,s as A,j as a,L as fe}from"./index-DlD1gmTD.js";import{H as ke,F as ye}from"./Footer-B2vMGxQd.js";function ve(){const[h,V]=i.useState([]),[M,X]=i.useState([]),[R,G]=i.useState([]),[b,J]=i.useState([]),[d,x]=i.useState(null),[m,N]=i.useState(null),[C,S]=i.useState([]),[P,U]=i.useState(!1),[f,k]=i.useState(1),[Y,_]=i.useState(!0),q=12,{addToCart:W}=xe(),{addToFavorites:Z,removeFromFavorites:I,isFavorite:B}=ue(),[F,y]=i.useState({type:"cart",show:!1}),L=pe(),[$]=be(),[n,E]=i.useState([]),[c,z]=i.useState([]),[u,O]=i.useState([0,200]),[p,j]=i.useState(""),ee={vestido:["vestido","dress","robe","kleid"],vestidos:["vestido","dress","robe","kleid"],mala:["mala","bolsa","bag","sac","tasche"],malas:["mala","bolsa","bag","sac","tasche"],bolsa:["mala","bolsa","bag","sac","tasche"],bolsas:["mala","bolsa","bag","sac","tasche"],sapato:["sapato","shoe","chaussure","schuh","ténis","bota"],sapatos:["sapato","shoe","chaussure","schuh","ténis","bota"],ténis:["ténis","sneaker","sapato","shoe"],bota:["bota","boot","sapato"],botas:["bota","boot","sapato"],perfume:["perfume","fragrance","parfum"],perfumes:["perfume","fragrance","parfum"],maquilhagem:["maquilhagem","makeup","maquillage","cosmetic"],makeup:["maquilhagem","makeup","maquillage","cosmetic"],cosmético:["maquilhagem","makeup","cosmetic","beauty"],acessório:["acessório","accessory","bijuteria","joia"],acessórios:["acessório","accessory","bijuteria","joia"],joia:["joia","jewelry","acessório","bijuteria"],joias:["joia","jewelry","acessório","bijuteria"],colar:["colar","necklace","joia","acessório"],brinco:["brinco","earring","joia","acessório"],brincos:["brinco","earring","joia","acessório"],anel:["anel","ring","joia","acessório"],anéis:["anel","ring","joia","acessório"],pulseira:["pulseira","bracelet","joia","acessório"],camisa:["camisa","shirt","blusa","top"],camisas:["camisa","shirt","blusa","top"],blusa:["blusa","top","camisa","shirt"],blusas:["blusa","top","camisa","shirt"],top:["top","blusa","camisa"],calça:["calça","pants","jean","trouser"],calças:["calça","pants","jean","trouser"],jean:["jean","calça","denim","pants"],jeans:["jean","calça","denim","pants"],saia:["saia","skirt","jupe"],saias:["saia","skirt","jupe"],casaco:["casaco","jacket","coat","veste"],casacos:["casaco","jacket","coat","veste"],jacket:["casaco","jacket","coat"]};i.useEffect(()=>{ae(),te(),se()},[]),i.useEffect(()=>{const e=$.get("search");j(e||"");const t=$.get("category");if(t&&h.length>0){const r=h.find(s=>s.name.toLowerCase()===t.toLowerCase()||s.slug?.toLowerCase()===t.toLowerCase());r?(x(r.id),S([r.id])):x(null)}else x(null)},[$,h]),i.useEffect(()=>{re()},[R,d,m,n,c,u,p]);const ae=async()=>{const{data:e,error:t}=await A.from("categories").select("*").order("name");!t&&e&&V(e)},te=async()=>{const{data:e,error:t}=await A.from("subcategories").select("*").order("name");!t&&e&&X(e)},se=async()=>{try{_(!0);const{data:e,error:t}=await A.from("products").select("*").eq("is_active",!0);if(t)throw t;const r=e?.map(s=>({...s,name:s.name_pt||s.name_en||s.name_fr||s.name_de||"Produto",description:s.description_pt||s.description_en||s.description_fr||s.description_de||"",image:s.images?.[0]||""}))||[];G(r),_(!1)}catch(e){console.error("Erro ao carregar produtos:",e),_(!1)}},re=()=>{let e=[...R];if(p.trim()){const t=p.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");e=e.map(s=>{const o=(s.name||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),v=(s.description||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");let l=0;if(o===t)l=1e3;else if(o.startsWith(t))l=500;else if(o.includes(t))l=100;else if(v.includes(t))l=50;else{const D=ee[t]||[];for(const T of D){const g=T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");if(o.includes(g)){l=80;break}else if(v.includes(g)){l=40;break}}}if(l===0){const D=t.split(" "),T=o.split(" ");for(const g of D)if(g.length>=3){for(const ge of T)if(ge.includes(g.substring(0,Math.ceil(g.length*.7)))){l=30;break}}}return{product:s,score:l}}).filter(s=>s.score>0).sort((s,o)=>o.score-s.score).map(s=>s.product)}d&&(e=e.filter(t=>t.category_id===d)),m&&(e=e.filter(t=>t.subcategory_id===m)),n.length>0&&(e=e.filter(t=>t.colors&&t.colors.some(r=>n.includes(r)))),c.length>0&&(e=e.filter(t=>t.sizes&&t.sizes.some(r=>c.includes(r)))),e=e.filter(t=>{const r=t.sale_price||t.discount_price||t.price;return r>=u[0]&&r<=u[1]}),J(e),k(1)},ie=e=>{x(e),N(null),j(""),L("/products?category="+h.find(t=>t.id===e)?.slug||e),C.includes(e)||S([...C,e])},oe=e=>{N(e)},H=()=>{x(null),N(null),E([]),z([]),O([0,200]),S([]),j(""),L("/products")},le=e=>{const t=e.sale_price||e.discount_price||e.price;W({id:e.id,name:e.name,price:t,image:e.images?.[0]||e.image_url||"https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait",quantity:1}),y({type:"cart",show:!0}),setTimeout(()=>y({type:"cart",show:!1}),3e3)},ne=e=>{const t=e.sale_price||e.discount_price||e.price;W({id:e.id,name:e.name,price:t,image:e.images?.[0]||e.image_url||"https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait",quantity:1}),L("/checkout")},ce=e=>{B(e.id)?I(e.id):(Z({id:e.id,name:e.name,price:e.price,image:e.images?.[0]||e.image_url||"https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait"}),y({type:"favorite",show:!0}),setTimeout(()=>y({type:"favorite",show:!1}),3e3))},K=f*q,de=K-q,Q=b.slice(de,K),w=Math.ceil(b.length/q),me=["Preto","Branco","Vermelho","Rosa","Azul","Verde","Amarelo","Laranja","Roxo","Cinza","Bege","Castanho"],he=["XS","S","M","L","XL","Único"];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-pink-50/30 to-rose-50/30 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:[a.jsx(ke,{}),F.show&&a.jsx("div",{className:"fixed top-24 right-4 z-50 animate-slide-up",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-4 flex items-center gap-3 border border-pink-200 dark:border-pink-900",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full flex items-center justify-center",children:a.jsx("i",{className:`${F.type==="cart"?"ri-shopping-cart-line":"ri-heart-line"} text-white text-xl`})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:F.type==="cart"?"Adicionado ao Carrinho!":"Adicionado aos Favoritos!"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Produto adicionado com sucesso"})]})]})}),a.jsx("div",{className:"pt-32 pb-20 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("div",{className:"lg:w-64 flex-shrink-0",children:a.jsxs("div",{className:"lg:sticky lg:top-32 lg:max-h-[calc(100vh-8rem)] lg:overflow-y-auto",children:[a.jsxs("button",{onClick:()=>U(!P),className:"lg:hidden w-full mb-4 px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx("i",{className:"ri-filter-3-line text-xl"}),P?"Ocultar Filtros":"Mostrar Filtros"]}),a.jsxs("div",{className:`${P?"block":"hidden"} lg:block bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl p-6 border border-pink-100 dark:border-slate-700`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Categorias"}),(d||m||n.length>0||c.length>0)&&a.jsx("button",{onClick:H,className:"text-xs text-pink-600 dark:text-pink-400 hover:underline",children:"Limpar"})]}),a.jsx("div",{className:"space-y-2 mb-6",children:h.map(e=>{const t=M.filter(s=>s.category_id===e.id),r=C.includes(e.id);return a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>ie(e.id),className:`w-full text-left px-4 py-3 rounded-xl transition-all duration-300 flex items-center justify-between ${d===e.id?"bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg":"bg-gray-50 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-600"}`,children:[a.jsx("span",{className:"font-semibold text-sm",children:e.name}),a.jsx("i",{className:`ri-arrow-${r?"up":"down"}-s-line text-lg`})]}),r&&t.length>0&&a.jsx("div",{className:"ml-4 mt-2 space-y-1",children:t.map(s=>a.jsx("button",{onClick:()=>oe(s.id),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-all duration-300 ${m===s.id?"bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 font-semibold":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-600"}`,children:s.name},s.id))})]},e.id)})}),a.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3",children:"Cores"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:me.map(e=>a.jsx("button",{onClick:()=>{n.includes(e)?E(n.filter(t=>t!==e)):E([...n,e])},className:`px-3 py-1 rounded-full text-xs font-semibold transition-all duration-300 ${n.includes(e)?"bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-600"}`,children:e},e))})]}),a.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3",children:"Tamanhos"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:he.map(e=>a.jsx("button",{onClick:()=>{c.includes(e)?z(c.filter(t=>t!==e)):z([...c,e])},className:`px-3 py-1 rounded-full text-xs font-semibold transition-all duration-300 ${c.includes(e)?"bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-600"}`,children:e},e))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3",children:"Preço"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"range",min:"0",max:"200",value:u[1],onChange:e=>O([0,parseInt(e.target.value)]),className:"w-full accent-pink-500"}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:"0€"}),a.jsxs("span",{className:"font-bold text-pink-600 dark:text-pink-400",children:[u[1],"€"]})]})]})]})]})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:p?`Resultados para "${p}"`:m?M.find(e=>e.id===m)?.name:d?h.find(e=>e.id===d)?.name:"Todos os Produtos"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[b.length," ",b.length===1?"produto encontrado":"produtos encontrados"]})]}),Y?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mx-auto"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"A carregar produtos..."})]}):Q.length===0?a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("i",{className:"ri-shopping-bag-line text-5xl text-pink-600 dark:text-pink-400"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Nenhum produto encontrado"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Tente ajustar os filtros"}),a.jsx("button",{onClick:H,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300",children:"Limpar Filtros"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 mb-8",children:Q.map(e=>{const t=e.sale_price||e.discount_price,r=e.sale_price||e.discount_price,s=t&&e.price>0?Math.round((e.price-r)/e.price*100):e.discount_percentage||0;return a.jsxs("div",{className:"group bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-pink-100 dark:border-slate-700",children:[a.jsxs(fe,{to:`/product/${e.id}`,className:"block relative overflow-hidden",children:[a.jsx("div",{className:"relative w-full h-48 sm:h-56 lg:h-64 overflow-hidden",children:a.jsx("img",{src:e.images?.[0]||e.image_url||"https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait",alt:e.name,className:"w-full h-full object-cover object-top group-hover:scale-105 transition-transform duration-300",onError:o=>{const v=o.target;v.src="https://readdy.ai/api/search-image?query=elegant%20fashion%20clothing%20product%20on%20simple%20white%20background%20professional%20ecommerce%20photography%20high%20quality%20studio%20lighting&width=400&height=500&seq=default-product&orientation=portrait"}})}),t&&s>0&&a.jsxs("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-red-500 to-rose-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:["-",s,"%"]})]}),a.jsxs("div",{className:"p-3 sm:p-4",children:[a.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-800 dark:text-white mb-2 line-clamp-2",children:e.name}),a.jsx("div",{className:"mb-3",children:t?a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("p",{className:"text-base sm:text-lg font-bold text-pink-500 dark:text-pink-400",children:["€",r.toFixed(2)]}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 line-through",children:["€",e.price.toFixed(2)]})]}):a.jsxs("p",{className:"text-base sm:text-lg font-bold text-pink-500 dark:text-pink-400",children:["€",e.price.toFixed(2)]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:o=>{o.preventDefault(),le(e)},disabled:e.stock===0,className:"flex-1 px-3 py-2 bg-gradient-to-r from-pink-400 to-rose-400 dark:from-pink-500 dark:to-rose-500 text-white rounded-lg hover:from-pink-500 hover:to-rose-500 dark:hover:from-pink-600 dark:hover:to-rose-600 transition-all duration-300 font-semibold text-sm whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:[a.jsx("i",{className:"ri-shopping-cart-line"}),"Carrinho"]}),a.jsxs("button",{onClick:o=>{o.preventDefault(),ne(e)},disabled:e.stock===0,className:"flex-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 dark:from-blue-600 dark:to-cyan-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 dark:hover:from-blue-700 dark:hover:to-cyan-700 transition-all duration-300 font-semibold text-sm whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1",children:[a.jsx("i",{className:"ri-flashlight-line"}),"Comprar"]}),a.jsx("button",{onClick:o=>{o.preventDefault(),ce(e)},className:"w-10 h-10 flex items-center justify-center border border-gray-300 dark:border-gray-600 rounded-lg hover:border-pink-400 dark:hover:border-pink-300 transition-colors cursor-pointer flex-shrink-0",children:a.jsx("i",{className:`text-lg ${B(e.id)?"ri-heart-fill text-pink-400 dark:text-pink-300":"ri-heart-line text-gray-700 dark:text-gray-300"}`})})]})]})]},e.id)})}),w>1&&a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>k(e=>Math.max(e-1,1)),disabled:f===1,className:"px-4 py-2 rounded-xl bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pink-50 dark:hover:bg-slate-700 transition-all duration-300",children:a.jsx("i",{className:"ri-arrow-left-s-line"})}),Array.from({length:w},(e,t)=>t+1).map(e=>a.jsx("button",{onClick:()=>k(e),className:`px-4 py-2 rounded-xl font-bold transition-all duration-300 ${f===e?"bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 hover:bg-pink-50 dark:hover:bg-slate-700"}`,children:e},e)),a.jsx("button",{onClick:()=>k(e=>Math.min(e+1,w)),disabled:f===w,className:"px-4 py-2 rounded-xl bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed hover:bg-pink-50 dark:hover:bg-slate-700 transition-all duration-300",children:a.jsx("i",{className:"ri-arrow-right-s-line"})})]})]})]})]})})}),a.jsx(ye,{})]})}export{ve as default};
//# sourceMappingURL=page-5k7SskYZ.js.map
